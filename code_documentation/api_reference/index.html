
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Jennings Fantini">
      
      
        <link rel="canonical" href="https://humblfinance.github.io/humbldata/code_documentation/api_reference/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../core/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.30">
    
    
      
        <title>API Reference - humbldata</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Code:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Fira Code";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="humbldata" class="md-header__button md-logo" aria-label="humbldata" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            humbldata
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/humblFINANCE/humbldata" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    humbldata
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting_started/" class="md-tabs__link">
          
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../code_design/" class="md-tabs__link">
          
  
    
  
  Code Design

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  Code Documentation

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../contributing/" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 17q.86 0 1.45.6t.58 1.4L14 22l-7-2v-9h1.95l7.27 2.69q.78.31.78 1.12 0 .47-.34.82t-.86.37H13l-1.75-.67-.33.94L13 17h7M16 3.23Q17.06 2 18.7 2q1.36 0 2.3 1t1 2.3q0 1.03-1 2.46t-1.97 2.39T16 13q-2.08-1.89-3.06-2.85t-1.97-2.39T10 5.3q0-1.36.97-2.3t2.34-1q1.6 0 2.69 1.23M.984 11H5v11H.984V11Z"/></svg>
    
  
  Contributing

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../roadmap/" class="md-tabs__link">
        
  
    
  
  Roadmap

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="humbldata" class="md-nav__button md-logo" aria-label="humbldata" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    humbldata
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/humblFINANCE/humbldata" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    humbldata
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../getting_started/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/installation/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17 14 5-5-1.4-1.4-2.6 2.6V3h-2v7.2l-2.6-2.6L12 9l5 5m6 0v2c0 1.1-.9 2-2 2h-7v2h2v2H8v-2h2v-2H3c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h9v2H3v12h18v-2h2Z"/></svg>
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/configuration/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"/></svg>
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/usage/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.78 15.3 6 6 2.11-2.16-6-6-2.11 2.16m3.72-5.2c-.39 0-.81-.05-1.14-.19L4.97 21.25l-2.11-2.11 7.41-7.4L8.5 9.96l-.72.7-1.45-1.41v2.86l-.7.7-3.52-3.56.7-.7h2.81l-1.4-1.41 3.56-3.56a2.976 2.976 0 0 1 4.22 0L9.89 5.74l1.41 1.4-.71.71 1.79 1.78 1.82-1.88c-.14-.33-.2-.75-.2-1.12a3.49 3.49 0 0 1 3.5-3.52c.59 0 1.11.14 1.58.42L16.41 6.2l1.5 1.5 2.67-2.67c.28.47.42.97.42 1.6 0 1.92-1.55 3.47-3.5 3.47Z"/></svg>
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/development_setup/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 6V5a1 1 0 0 0-1-1H9V3H6v1H5v2h1v9H5v-2H3v2H2v2h1v4h2v-4h5v4h2v-4h1v-2h-1v-2h-2v2H9V6h8v4.62c-.47.17-.81.61-.81 1.14 0 .44.24.84.61 1.06V14h.62c.34 0 .61.28.61.62 0 .34-.27.62-.61.62-.22 0-.42-.12-.53-.31a.62.62 0 0 0-.84-.22c-.3.16-.4.54-.23.84.33.56.94.92 1.6.92 1.01 0 1.84-.83 1.84-1.85 0-.78-.5-1.48-1.23-1.74v-.06c.38-.22.62-.62.62-1.06 0-.46-.27-.85-.65-1.06V6h2M8 13.66l-1 1v-1.42l1-1v1.42m0-2.95-1 1v-1.42l1-1v1.42m-1-2V7.29l1-1v1.42l-1 1Z"/></svg>
  
  <span class="md-ellipsis">
    Development Setup
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../code_design/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Code Design
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Code Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_design/cccc_method/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 22c-1.67 0-3.16-1.5-4.1-4.07-.07-.2.03-.43.24-.49.2-.08.42.03.49.23.81 2.23 2.07 3.56 3.37 3.56.94 0 1.87-.68 2.62-1.92a.386.386 0 0 1 .66.4C14.38 21.19 13.22 22 12 22m3.91-4.28a.36.36 0 0 1-.11-.02c-.21-.07-.3-.28-.26-.49.46-1.4.68-3.03.68-4.71 0-3.85-1.25-7.26-3.03-8.36-.25.36-.69.64-1.19.64-.76 0-1.39-.62-1.39-1.39 0-.77.63-1.39 1.39-1.39.77 0 1.4.61 1.41 1.37C15.53 4.5 17 8.21 17 12.5c0 1.75-.25 3.46-.72 4.95-.05.16-.2.27-.37.27M12 2.77c-.34 0-.62.28-.62.62 0 .34.29.61.62.61.35 0 .64-.27.64-.61 0-.34-.29-.62-.64-.62M4.08 18.54c-.77 0-1.4-.63-1.4-1.39 0-.49.26-.93.65-1.18-.14-2.41 2.35-5.56 6.17-7.75 1.59-.9 3.25-1.55 4.82-1.88.18-.05.41.08.45.29.05.21-.08.42-.27.46-1.5.32-3.09.94-4.6 1.8-3.44 1.97-5.8 4.79-5.8 6.87.76.01 1.4.63 1.4 1.39 0 .77-.65 1.39-1.42 1.39m0-2.01c-.34 0-.62.28-.62.62 0 .35.28.62.62.62s.63-.27.63-.62c0-.34-.29-.62-.63-.62m14.42-3.09c-.07 0-.16-.03-.23-.09a.393.393 0 0 1-.04-.55c1.54-1.8 2.07-3.54 1.41-4.66-.47-.81-1.54-1.26-3.01-1.28-.22 0-.39-.18-.38-.39 0-.21.18-.37.39-.38 1.75.02 3.06.61 3.67 1.66.84 1.44.29 3.46-1.49 5.55-.08.09-.19.14-.32.14m-2 5.46c-2 0-4.56-.74-7-2.13-1.55-.89-2.93-1.98-4-3.14a.402.402 0 0 1 0-.55c.18-.14.42-.13.57.03 1.01 1.1 2.33 2.14 3.82 2.99 3.31 1.9 6.88 2.53 8.76 1.62-.08-.17-.15-.37-.15-.57 0-.77.65-1.39 1.42-1.39.77 0 1.4.62 1.4 1.39a1.396 1.396 0 0 1-2.15 1.17c-.7.39-1.61.58-2.67.58m3-1.27c.13.08.27.14.42.14a.619.619 0 1 0 0-1.24c-.35 0-.62.28-.62.62 0 .14.05.27.13.38.04.02.07.06.07.1M4.46 12c-.13 0-.26-.08-.33-.2-.9-1.55-1.05-2.99-.43-4.06.84-1.44 2.88-1.98 5.61-1.49.19.04.35.25.31.45-.03.21-.23.35-.44.3C6.82 6.59 5 7 4.37 8.13c-.48.82-.33 1.98.43 3.28.1.19.04.42-.15.53-.06.03-.12.06-.19.06m7.75 1.4a.92.92 0 0 1-.4-1.8c.5-.1 1 .21 1.1.71.09.49-.21.98-.7 1.09Z"/></svg>
  
  <span class="md-ellipsis">
    CCCC Organization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_design/mvcdb/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4Z"/></svg>
  
  <span class="md-ellipsis">
    M-V-C-DB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code_design/standardization_framework/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 17c-.14 0-.26 0-.39.04L17.5 13.8c.45-.45.75-1.09.75-1.8a2.5 2.5 0 0 0-2.5-2.5c-.14 0-.25 0-.4.04L13.74 6.3c.47-.46.76-1.09.76-1.8a2.5 2.5 0 0 0-5 0c0 .7.29 1.34.76 1.79L8.65 9.54c-.15-.04-.26-.04-.4-.04a2.5 2.5 0 0 0-2.5 2.5c0 .71.29 1.34.75 1.79l-1.61 3.25C4.76 17 4.64 17 4.5 17a2.5 2.5 0 0 0 0 5A2.5 2.5 0 0 0 7 19.5c0-.7-.29-1.34-.76-1.79l1.62-3.25c.14.04.26.04.39.04s.25 0 .38-.04l1.63 3.25c-.47.45-.76 1.09-.76 1.79a2.5 2.5 0 0 0 5 0A2.5 2.5 0 0 0 12 17c-.13 0-.26 0-.39.04L10 13.8c.45-.45.75-1.09.75-1.8 0-.7-.29-1.33-.75-1.79l1.61-3.25c.13.04.26.04.39.04s.26 0 .39-.04L14 10.21a2.5 2.5 0 0 0 1.75 4.29c.13 0 .25 0 .38-.04l1.63 3.25c-.47.45-.76 1.09-.76 1.79a2.5 2.5 0 0 0 5 0 2.5 2.5 0 0 0-2.5-2.5m-15 3.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m8.5-1c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1M7.25 12c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1M11 4.5c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m3.75 7.5c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m4.75 8.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1Z"/></svg>
  
  <span class="md-ellipsis">
    Standardization Framework
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Code Documentation
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Code Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 12c2.5 0 4.5 2 4.5 4.5 0 .88-.25 1.71-.69 2.4l3.08 3.1L21 23.39l-3.12-3.07c-.69.43-1.51.68-2.38.68-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5m0 2a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1v7l2.5-1.5L12 9V2h6a2 2 0 0 1 2 2v7.81A6.48 6.48 0 0 0 15.5 10 6.5 6.5 0 0 0 9 16.5c0 2.31 1.21 4.35 3.03 5.5H6Z"/></svg>
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 12c2.5 0 4.5 2 4.5 4.5 0 .88-.25 1.71-.69 2.4l3.08 3.1L21 23.39l-3.12-3.07c-.69.43-1.51.68-2.38.68-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5m0 2a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1v7l2.5-1.5L12 9V2h6a2 2 0 0 1 2 2v7.81A6.48 6.48 0 0 0 15.5 10 6.5 6.5 0 0 0 9 16.5c0 2.31 1.21 4.35 3.03 5.5H6Z"/></svg>
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#humbldata" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;humbldata
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#humbldata.cli" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;cli
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" cli">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.cli.say" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;say
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#humbldata.portfolio" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;portfolio
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" portfolio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.portfolio_controller" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;portfolio_controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" portfolio_controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.portfolio_controller.Portfolio" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Portfolio
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Portfolio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.portfolio_controller.Portfolio.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;__init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.portfolio_controller.Portfolio.analytics" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;analytics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;analytics
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" analytics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.analytics_controller" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;analytics_controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" analytics_controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.analytics_controller.Analytics" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Analytics
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Analytics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.analytics_controller.Analytics.user_table" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;user_table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;user_table
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" user_table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.helpers" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.helpers.aget_sector_filter" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;aget_sector_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.helpers.normalize_asset_class" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;normalize_asset_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.helpers.aget_asset_class_filter" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;aget_asset_class_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.helpers.calc_up_down_pct" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;calc_up_down_pct
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.model" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;model
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.model.user_table_engine" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;user_table_engine
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.view" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;view
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" view">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.view.create_example_plot" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;create_example_plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.view.generate_plots" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;generate_plots
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#humbldata.toolbox" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;toolbox
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" toolbox">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;toolbox_helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" toolbox_helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.log_returns" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;log_returns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.detrend" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;detrend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.cum_sum" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;cum_sum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.std" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;std
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.mean" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;mean
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.range_" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;range_
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;toolbox_controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" toolbox_controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller.Toolbox" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Toolbox
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Toolbox">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller.Toolbox.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;__init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller.Toolbox.technical" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;technical
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller.Toolbox.fundamental" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;fundamental
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;fundamental
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" fundamental">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.fundamental_controller" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;fundamental_controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" fundamental_controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.fundamental_controller.Fundamental" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Fundamental
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Fundamental">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.fundamental_controller.Fundamental.humbl_compass" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;humbl_compass
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.humbl_compass" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;humbl_compass
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" humbl_compass">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.humbl_compass.helpers" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;helpers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.humbl_compass.model" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;model
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.humbl_compass.model.humbl_compass" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;humbl_compass
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.humbl_compass.view" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;view
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" view">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.humbl_compass.view.create_humbl_compass_plot" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;create_humbl_compass_plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.humbl_compass.view.generate_plots" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;generate_plots
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;technical
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" technical">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.technical_controller" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;technical_controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" technical_controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.technical_controller.Technical" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Technical
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Technical">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.technical_controller.Technical.mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;mandelbrot_channel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;mandelbrot_channel
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" mandelbrot_channel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.add_window_index" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;add_window_index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_buckets" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;vol_buckets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_buckets_alt" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;vol_buckets_alt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_filter" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;vol_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.price_range" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;price_range
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;model
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;calc_mandelbrot_channel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model.acalc_mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;acalc_mandelbrot_channel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;calc_mandelbrot_channel_historical
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical_mp" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;calc_mandelbrot_channel_historical_mp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical_concurrent" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;calc_mandelbrot_channel_historical_concurrent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.view" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;view
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" view">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.view.create_historical_plot" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;create_historical_plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.view.create_current_plot" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;create_current_plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.view.is_historical_data" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;is_historical_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.view.generate_plot_for_symbol" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;generate_plot_for_symbol
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.view.generate_plots" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;generate_plots
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;volatility
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" volatility">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;realized_volatility_helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" realized_volatility_helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.std" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;std
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.parkinson" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;parkinson
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.garman_klass" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;garman_klass
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.hodges_tompkins" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;hodges_tompkins
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.rogers_satchell" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;rogers_satchell
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.yang_zhang" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;yang_zhang
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.squared_returns" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;squared_returns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_model" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;realized_volatility_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" realized_volatility_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_model.calc_realized_volatility" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;calc_realized_volatility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.quantitative" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;quantitative
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#humbldata.core" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;core
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" core">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;standard_models
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" standard_models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;abstract
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" abstract">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.errors" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;errors
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" errors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.errors.HumblDataError" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;HumblDataError
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.query_params" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;query_params
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" query_params">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.query_params.QueryParams" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;QueryParams
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.singleton" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;singleton
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" singleton">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.singleton.SingletonMeta" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;SingletonMeta
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.chart" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;chart
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" chart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.chart.ChartTemplate" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;ChartTemplate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.chart.Chart" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Chart
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.data" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;data
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.data.Data" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.humblobject" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;humblobject
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" humblobject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.humblobject.extract_subclass_dict" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;extract_subclass_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.humblobject.HumblObject" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;HumblObject
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.tagged" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;tagged
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" tagged">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.tagged.Tagged" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Tagged
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.portfolio" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;portfolio
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" portfolio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.portfolio.analytics" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;analytics
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" analytics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.portfolio.analytics.etf_category" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;etf_category
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.portfolio.analytics.user_table" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;user_table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.portfolio.PortfolioQueryParams" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;PortfolioQueryParams
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" PortfolioQueryParams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.portfolio.PortfolioQueryParams.upper_symbol" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;upper_symbol
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.portfolio.PortfolioData" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;PortfolioData
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;toolbox
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" toolbox">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.fundamental" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;fundamental
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" fundamental">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.fundamental.humbl_compass" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;humbl_compass
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.technical" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;technical
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" technical">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.technical.realized_volatility" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;realized_volatility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;mandelbrot_channel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.ToolboxQueryParams" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;ToolboxQueryParams
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ToolboxQueryParams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.ToolboxQueryParams.upper_symbol" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;upper_symbol
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_interval" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;validate_interval
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_date_format" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;validate_date_format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.ToolboxData" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;ToolboxData
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;utils
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.env" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;env
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" env">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.env.Env" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Env
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Env">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.env.Env.OBB_PAT" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;OBB_PAT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.env.Env.LOGGER_LEVEL" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;LOGGER_LEVEL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.env.Env.str2bool" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;str2bool
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.descriptions" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;descriptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.constants" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;constants
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.logger" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;logger
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" logger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.logger.setup_logger" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;setup_logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.logger.log_start_end" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;log_start_end
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;openbb_helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" openbb_helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers.obb_login" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;obb_login
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers.get_latest_price" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;get_latest_price
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers.aget_latest_price" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;aget_latest_price
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers.aget_last_close" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;aget_last_close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers.get_equity_sector" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;get_equity_sector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers.aget_equity_sector" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;aget_equity_sector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers.aget_etf_category" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;aget_etf_category
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.core_helpers" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;core_helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" core_helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.core_helpers.is_debug_mode" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;is_debug_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.core_helpers.run_async" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;run_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.62 13.28 1.64 2.26c.03-.54.12-1.07.3-1.61.18-.56.44-1.07.74-1.52l-2.68.87M17.77 19c-.02-1.32.18-2.73.64-4.15.47-1.43 1.15-2.71 1.95-3.76l-2.04.66c-.78.51-1.45 1.39-1.82 2.48-.33 1.06-.32 2.13 0 2.99L17.77 19m1.48 2c-.5.46-1.04.86-1.62 1.2l-.32-.44C15.9 21 14.04 20.5 12 20.5c-2.04 0-3.9.5-5.31 1.26l-.32.44c-.58-.34-1.12-.74-1.62-1.2l.25-.31c.33-1.61.22-3.57-.42-5.55-.64-1.95-1.68-3.58-2.87-4.68l-.44-.14c.15-.66.36-1.32.62-1.91l.4.13c1.63-.17 3.45-.89 5.14-2.11 1.66-1.21 2.89-2.7 3.57-4.17v-.47l1-.04 1 .04v.42c.67 1.5 1.91 3.02 3.6 4.24 1.66 1.21 3.46 1.92 5.07 2.11l.44-.15c.26.59.47 1.25.62 1.91l-.5.18c-1.19 1.08-2.23 2.71-2.86 4.66-.63 1.93-.75 3.84-.45 5.41l.33.43M11 11.37V8.5c-.34.42-.74.82-1.22 1.17-.49.33-1.01.62-1.53.83l2.75.87m0-7.15c-.75 1.09-1.76 2.13-3 3.02-1.22.9-2.54 1.54-3.82 1.92l1.97.64c.96.08 2.07-.24 3.04-.94.94-.68 1.57-1.59 1.81-2.5V4.22m2 7.15 2.74-.87c-.51-.2-1.02-.47-1.49-.81-.49-.36-.91-.77-1.25-1.19v2.87m6.8-2.21c-1.27-.38-2.57-1.01-3.8-1.9-1.23-.9-2.24-1.95-3-3.06v2.07c.22.94.86 1.9 1.84 2.61.93.68 1.99.99 2.93.94l2.03-.66m-9.42 4.12-2.74-.89c.31.45.56.96.74 1.52.19.59.28 1.15.3 1.71l1.7-2.34m-6.8-2.21c.8 1.05 1.48 2.33 1.95 3.76.47 1.46.67 2.91.64 4.25l1.21-1.67c.38-.91.42-2.05.05-3.19-.36-1.1-1.03-1.98-1.82-2.49l-2.03-.66M12 14.45l-1.65 2.27a6.321 6.321 0 0 1 3.3 0L12 14.45m-4.16 5.73c1.24-.43 2.66-.68 4.16-.68s2.92.25 4.16.68l-1.28-1.76c-.72-.57-1.75-.92-2.88-.92s-2.16.35-2.88.92l-1.28 1.76Z"/></svg>
  
  <span class="md-ellipsis">
    Core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../context/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 8V5H5v3h4a3 3 0 0 0 3 3 3 3 0 0 0 3-3h4m0-5a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14M3 15h6a3 3 0 0 0 3 3 3 3 0 0 0 3-3h6v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4Z"/></svg>
  
  <span class="md-ellipsis">
    Context
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Context
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../context/toolbox/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16h-2v-1H8v1H6v-1H2v5h20v-5h-4v1m2-8h-3V6c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v4h4v-2h2v2h8v-2h2v2h4v-4c0-1.1-.9-2-2-2m-5 0H9V6h6v2Z"/></svg>
  
  <span class="md-ellipsis">
    Toolbox
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../category/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 3a2 2 0 0 0-2 2h2m2-2v2h2V3m2 0v2h2V3m2 0v2h2V3m2 0v2h2a2 2 0 0 0-2-2M3 7v2h2V7m2 0v4h4V7m2 0v4h4V7m2 0v2h2V7M3 11v2h2v-2m14 0v2h2v-2M7 13v4h4v-4m2 0v4h4v-4M3 15v2h2v-2m14 0v2h2v-2M3 19a2 2 0 0 0 2 2v-2m2 0v2h2v-2m2 0v2h2v-2m2 0v2h2v-2m2 0v2a2 2 0 0 0 2-2Z"/></svg>
  
  <span class="md-ellipsis">
    Category
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../command/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.6 5.29c-1.1-.1-2.07.71-2.17 1.82L13.18 10H16v2h-3l-.44 5.07a3.986 3.986 0 0 1-4.33 3.63 4.007 4.007 0 0 1-3.06-1.87l1.5-1.5c.24.74.9 1.31 1.73 1.38 1.1.1 2.07-.71 2.17-1.82L11 12H8v-2h3.17l.27-3.07c.19-2.2 2.13-3.83 4.33-3.63 1.31.11 2.41.84 3.06 1.87l-1.5 1.5c-.24-.74-.9-1.31-1.73-1.38Z"/></svg>
  
  <span class="md-ellipsis">
    Command
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../contributing/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 17q.86 0 1.45.6t.58 1.4L14 22l-7-2v-9h1.95l7.27 2.69q.78.31.78 1.12 0 .47-.34.82t-.86.37H13l-1.75-.67-.33.94L13 17h7M16 3.23Q17.06 2 18.7 2q1.36 0 2.3 1t1 2.3q0 1.03-1 2.46t-1.97 2.39T16 13q-2.08-1.89-3.06-2.85t-1.97-2.39T10 5.3q0-1.36.97-2.3t2.34-1q1.6 0 2.69 1.23M.984 11H5v11H.984V11Z"/></svg>
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/best_practices/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.45 4.73L5.82 21 12 17.27Z"/></svg>
  
  <span class="md-ellipsis">
    Best Practices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/code_standards/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m.12 13.5 3.74 3.74 1.42-1.41-2.33-2.33 2.33-2.33-1.42-1.41-3.74 3.74m11.16 0-3.74-3.74-1.42 1.41 2.33 2.33-2.33 2.33 1.42 1.41 3.74-3.74Z"/></svg>
  
  <span class="md-ellipsis">
    Code Standards
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/adding_function/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.42 5.29c-1.1-.1-2.07.71-2.17 1.82L10 10h2.82v2h-3l-.44 5.07A4.001 4.001 0 0 1 2 18.83l1.5-1.5c.33 1.05 1.46 1.64 2.5 1.3.78-.24 1.33-.93 1.4-1.74L7.82 12h-3v-2H8l.27-3.07a4.01 4.01 0 0 1 4.33-3.65c1.26.11 2.4.81 3.06 1.89l-1.5 1.5c-.25-.77-.93-1.31-1.74-1.38M22 13.65l-1.41-1.41-2.83 2.83-2.83-2.83-1.43 1.41 2.85 2.85-2.85 2.81 1.43 1.41 2.83-2.83 2.83 2.83L22 19.31l-2.83-2.81L22 13.65Z"/></svg>
  
  <span class="md-ellipsis">
    Adding a Function
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/adding_test/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6m-2 16c-2.05 0-3.81-1.24-4.58-3h1.71c.63.9 1.68 1.5 2.87 1.5a3.5 3.5 0 0 0 3.5-3.5A3.5 3.5 0 0 0 12 9.5c-1.35 0-2.5.78-3.1 1.9l1.6 1.6h-4V9l1.3 1.3C8.69 8.92 10.23 8 12 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5Z"/></svg>
  
  <span class="md-ellipsis">
    Adding a Test
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../roadmap/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.81 3.4-5.42.96.7 3.94L.733 9.95l.867 4.92 1.97-.34c.14.78.58 1.47 1.24 1.93.65.46 1.45.64 2.24.5.78-.14 1.48-.58 1.95-1.23.44-.66.62-1.46.5-2.23l5.89-1.06c.14.79.58 1.48 1.23 1.94.65.45 1.46.62 2.24.5.79-.14 1.48-.59 1.94-1.24.46-.64.64-1.46.5-2.24l1.97-.35-.52-2.95c-.2-1.1-1.25-1.82-2.32-1.6l-1.97.32-3.65-3.42m-3.68 2.18 3.45-.61 2.36 2.12-5.37.95-.44-2.46m-4.86 6.95A1.492 1.492 0 0 1 8 13.74c.07.4 0 .8-.25 1.12-.22.33-.57.55-.96.64-.4.05-.79-.04-1.12-.27a1.48 1.48 0 0 1-.62-.97c-.05-.39.02-.79.25-1.12.23-.32.57-.54.97-.61m11.81-2.09c.39-.07.8.02 1.12.25.33.23.55.58.62.97.07.39-.02.8-.25 1.12-.23.33-.57.55-.97.62-.39.07-.79-.02-1.1-.25-.34-.23-.57-.58-.63-.97-.07-.39.02-.79.24-1.12.23-.33.58-.56.97-.62M2.83 19.17 2 20v2h20v-6h-5.38c-1.07 0-2.12.17-3.16.5l-1.38.47C10.04 17.65 7.9 18 5.75 18h-.09c-1.06 0-2.08.42-2.83 1.17Z"/></svg>
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#humbldata" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;humbldata
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#humbldata.cli" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;cli
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" cli">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.cli.say" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;say
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#humbldata.portfolio" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;portfolio
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" portfolio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.portfolio_controller" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;portfolio_controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" portfolio_controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.portfolio_controller.Portfolio" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Portfolio
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Portfolio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.portfolio_controller.Portfolio.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;__init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.portfolio_controller.Portfolio.analytics" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;analytics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;analytics
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" analytics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.analytics_controller" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;analytics_controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" analytics_controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.analytics_controller.Analytics" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Analytics
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Analytics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.analytics_controller.Analytics.user_table" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;user_table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;user_table
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" user_table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.helpers" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.helpers.aget_sector_filter" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;aget_sector_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.helpers.normalize_asset_class" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;normalize_asset_class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.helpers.aget_asset_class_filter" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;aget_asset_class_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.helpers.calc_up_down_pct" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;calc_up_down_pct
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.model" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;model
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.model.user_table_engine" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;user_table_engine
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.view" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;view
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" view">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.view.create_example_plot" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;create_example_plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.portfolio.analytics.user_table.view.generate_plots" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;generate_plots
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#humbldata.toolbox" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;toolbox
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" toolbox">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;toolbox_helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" toolbox_helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.log_returns" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;log_returns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.detrend" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;detrend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.cum_sum" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;cum_sum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.std" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;std
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.mean" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;mean
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.range_" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;range_
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;toolbox_controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" toolbox_controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller.Toolbox" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Toolbox
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Toolbox">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller.Toolbox.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;__init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller.Toolbox.technical" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;technical
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller.Toolbox.fundamental" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;fundamental
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;fundamental
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" fundamental">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.fundamental_controller" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;fundamental_controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" fundamental_controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.fundamental_controller.Fundamental" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Fundamental
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Fundamental">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.fundamental_controller.Fundamental.humbl_compass" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;humbl_compass
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.humbl_compass" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;humbl_compass
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" humbl_compass">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.humbl_compass.helpers" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;helpers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.humbl_compass.model" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;model
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.humbl_compass.model.humbl_compass" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;humbl_compass
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.humbl_compass.view" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;view
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" view">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.humbl_compass.view.create_humbl_compass_plot" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;create_humbl_compass_plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental.humbl_compass.view.generate_plots" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;generate_plots
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;technical
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" technical">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.technical_controller" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;technical_controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" technical_controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.technical_controller.Technical" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Technical
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Technical">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.technical_controller.Technical.mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;mandelbrot_channel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;mandelbrot_channel
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" mandelbrot_channel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.add_window_index" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;add_window_index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_buckets" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;vol_buckets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_buckets_alt" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;vol_buckets_alt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_filter" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;vol_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.price_range" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;price_range
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;model
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;calc_mandelbrot_channel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model.acalc_mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;acalc_mandelbrot_channel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;calc_mandelbrot_channel_historical
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical_mp" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;calc_mandelbrot_channel_historical_mp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical_concurrent" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;calc_mandelbrot_channel_historical_concurrent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.view" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;view
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" view">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.view.create_historical_plot" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;create_historical_plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.view.create_current_plot" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;create_current_plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.view.is_historical_data" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;is_historical_data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.view.generate_plot_for_symbol" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;generate_plot_for_symbol
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.view.generate_plots" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;generate_plots
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;volatility
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" volatility">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;realized_volatility_helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" realized_volatility_helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.std" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;std
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.parkinson" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;parkinson
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.garman_klass" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;garman_klass
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.hodges_tompkins" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;hodges_tompkins
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.rogers_satchell" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;rogers_satchell
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.yang_zhang" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;yang_zhang
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.squared_returns" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;squared_returns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_model" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;realized_volatility_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" realized_volatility_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_model.calc_realized_volatility" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;calc_realized_volatility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.quantitative" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;quantitative
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#humbldata.core" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;core
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" core">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;standard_models
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" standard_models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;abstract
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" abstract">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.errors" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;errors
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" errors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.errors.HumblDataError" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;HumblDataError
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.query_params" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;query_params
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" query_params">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.query_params.QueryParams" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;QueryParams
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.singleton" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;singleton
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" singleton">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.singleton.SingletonMeta" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;SingletonMeta
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.chart" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;chart
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" chart">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.chart.ChartTemplate" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;ChartTemplate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.chart.Chart" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Chart
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.data" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;data
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.data.Data" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.humblobject" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;humblobject
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" humblobject">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.humblobject.extract_subclass_dict" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;extract_subclass_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.humblobject.HumblObject" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;HumblObject
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.tagged" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;tagged
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" tagged">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.abstract.tagged.Tagged" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Tagged
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.portfolio" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;portfolio
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" portfolio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.portfolio.analytics" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;analytics
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" analytics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.portfolio.analytics.etf_category" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;etf_category
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.portfolio.analytics.user_table" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;user_table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.portfolio.PortfolioQueryParams" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;PortfolioQueryParams
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" PortfolioQueryParams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.portfolio.PortfolioQueryParams.upper_symbol" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;upper_symbol
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.portfolio.PortfolioData" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;PortfolioData
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;toolbox
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" toolbox">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.fundamental" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;fundamental
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" fundamental">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.fundamental.humbl_compass" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;humbl_compass
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.technical" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;technical
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" technical">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.technical.realized_volatility" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;realized_volatility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;mandelbrot_channel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.ToolboxQueryParams" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;ToolboxQueryParams
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ToolboxQueryParams">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.ToolboxQueryParams.upper_symbol" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;upper_symbol
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_interval" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;validate_interval
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_date_format" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;validate_date_format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.standard_models.toolbox.ToolboxData" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;ToolboxData
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;utils
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" utils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.env" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;env
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" env">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.env.Env" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;Env
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Env">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.env.Env.OBB_PAT" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;OBB_PAT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.env.Env.LOGGER_LEVEL" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;LOGGER_LEVEL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.env.Env.str2bool" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;str2bool
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.descriptions" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;descriptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.constants" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;constants
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.logger" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;logger
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" logger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.logger.setup_logger" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;setup_logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.logger.log_start_end" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;log_start_end
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;openbb_helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" openbb_helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers.obb_login" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;obb_login
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers.get_latest_price" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;get_latest_price
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers.aget_latest_price" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;aget_latest_price
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers.aget_last_close" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;aget_last_close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers.get_equity_sector" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;get_equity_sector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers.aget_equity_sector" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;aget_equity_sector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.openbb_helpers.aget_etf_category" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;aget_etf_category
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.core_helpers" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;core_helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" core_helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.core_helpers.is_debug_mode" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;is_debug_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.core.utils.core_helpers.run_async" class="md-nav__link">
    <span class="md-ellipsis">
      &nbsp;run_async
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/humblFINANCE/humbldata/edit/master/docs/code_documentation/api_reference.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/humblFINANCE/humbldata/raw/master/docs/code_documentation/api_reference.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="api-reference">📑 <strong>API Reference</strong><a class="headerlink" href="#api-reference" title="Permanent link">¤</a></h1>
<p>This section holds a comprehensive documentation of all of classes, methods and functions in the <code>humbldata</code> package.</p>


<div class="doc doc-object doc-module">



<a id="humbldata"></a>
  <div class="doc doc-contents first">
  
      <p>humbldata package.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h2 id="humbldata.cli" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.cli</span>


<a href="#humbldata.cli" class="headerlink" title="Permanent link">¤</a></h2>

  <div class="doc doc-contents ">
  
      <p>humbldata CLI.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h3 id="humbldata.cli.say" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.cli.say</span>


<a href="#humbldata.cli.say" class="headerlink" title="Permanent link">¤</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">say</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Say a message.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/cli.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">say</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Say a message.&quot;&quot;&quot;</span>
    <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h2 id="humbldata.portfolio" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.portfolio</span>


<a href="#humbldata.portfolio" class="headerlink" title="Permanent link">¤</a></h2>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h3 id="humbldata.portfolio.portfolio_controller" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.portfolio.portfolio_controller</span>


<a href="#humbldata.portfolio.portfolio_controller" class="headerlink" title="Permanent link">¤</a></h3>

  <div class="doc doc-contents ">
  
      <p><strong>Context: Portfolio</strong>.</p>
<p>The Portfolio Controller Module.</p>

  

  <div class="doc doc-children">















<div class="doc doc-object doc-class">



<h4 id="humbldata.portfolio.portfolio_controller.Portfolio" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.portfolio.portfolio_controller.Portfolio</span>


<a href="#humbldata.portfolio.portfolio_controller.Portfolio" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.PortfolioQueryParams" href="../core/#humbldata.core.standard_models.portfolio.PortfolioQueryParams">PortfolioQueryParams</a></code></p>

  
      <p>A top-level Portfolio controller for data analysis tools in <code>humblDATA</code>.</p>
<p>This module serves as the primary controller, routing user-specified
PortfolioQueryParams as core arguments that are used to fetch time series
data.</p>
<p>The <code>portfolio</code> controller also gives access to all sub-modules and their
functions.</p>
<p>It is designed to facilitate the collection of data across various types such as
stocks, options, or alternative time series by requiring minimal input from the user.</p>

<details class="submodules" open>
  <summary>Submodules</summary>
  <p>The <code>Portfolio</code> controller is composed of the following submodules:</p>
<ul>
<li><code>analytics</code>:</li>
</ul>
</details>


  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>symbol</code></td>
          <td>
                <code>str or list of str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The stock symbol(s) to query. Default is "AAPL".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>provider</code></td>
          <td>
                <code>OBB_EQUITY_PRICE_HISTORICAL_PROVIDERS</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The data provider for historical price data. Default is "yahoo".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>membership</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The membership level of the user. Default is "anonymous".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

<details class="parameter-notes" open>
  <summary>Parameter Notes</summary>
  <p>The parameters are the <code>PortfolioQueryParams</code>. They are used
for data collection further down the pipeline in other commands.
Intended to execute operations on core data sets. This approach enables
composable and standardized querying while accommodating data-specific
collection logic.</p>
<p>The symbols you input here will be used as <code>Portfolio</code> symbols for the
methods available in the <code>analytics</code> submodule.</p>
</details>
            <details class="quote">
              <summary>Source code in <code>src/humbldata/portfolio/portfolio_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Portfolio</span><span class="p">(</span><span class="n">PortfolioQueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A top-level Portfolio controller for data analysis tools in `humblDATA`.</span>

<span class="sd">    This module serves as the primary controller, routing user-specified</span>
<span class="sd">    PortfolioQueryParams as core arguments that are used to fetch time series</span>
<span class="sd">    data.</span>

<span class="sd">    The `portfolio` controller also gives access to all sub-modules and their</span>
<span class="sd">    functions.</span>

<span class="sd">    It is designed to facilitate the collection of data across various types such as</span>
<span class="sd">    stocks, options, or alternative time series by requiring minimal input from the user.</span>

<span class="sd">    Submodules</span>
<span class="sd">    ----------</span>
<span class="sd">    The `Portfolio` controller is composed of the following submodules:</span>

<span class="sd">    - `analytics`:</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbol : str or list of str</span>
<span class="sd">        The stock symbol(s) to query. Default is &quot;AAPL&quot;.</span>
<span class="sd">    provider : OBB_EQUITY_PRICE_HISTORICAL_PROVIDERS</span>
<span class="sd">        The data provider for historical price data. Default is &quot;yahoo&quot;.</span>
<span class="sd">    membership: Literal[&quot;anonymous&quot;, &quot;humblPEON&quot;, &quot;humblPREMIUM&quot;, &quot;humblPOWER&quot;, &quot;humblPERMANENT&quot;, &quot;admin&quot;]</span>
<span class="sd">        The membership level of the user. Default is &quot;anonymous&quot;.</span>

<span class="sd">    Parameter Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameters are the `PortfolioQueryParams`. They are used</span>
<span class="sd">    for data collection further down the pipeline in other commands.</span>
<span class="sd">    Intended to execute operations on core data sets. This approach enables</span>
<span class="sd">    composable and standardized querying while accommodating data-specific</span>
<span class="sd">    collection logic.</span>

<span class="sd">    The symbols you input here will be used as `Portfolio` symbols for the</span>
<span class="sd">    methods available in the `analytics` submodule.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the Portfolio module.</span>

<span class="sd">        This method does not take any parameters and does not return anything.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">analytics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The analytics submodule of the Portfolio controller.</span>

<span class="sd">        Access to all the Analytics indicators. When the Portfolio class is</span>
<span class="sd">        instantiated the parameters are initialized with the PortfolioQueryParams</span>
<span class="sd">        class, which hold all the fields needed for the context_params, like the</span>
<span class="sd">        symbol, interval, start_date, and end_date.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Analytics</span><span class="p">(</span><span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h5 id="humbldata.portfolio.portfolio_controller.Portfolio.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.portfolio.portfolio_controller.Portfolio.__init__</span>


<a href="#humbldata.portfolio.portfolio_controller.Portfolio.__init__" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="nf">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Initialize the Portfolio module.</p>
<p>This method does not take any parameters and does not return anything.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/portfolio/portfolio_controller.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the Portfolio module.</span>

<span class="sd">    This method does not take any parameters and does not return anything.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="humbldata.portfolio.portfolio_controller.Portfolio.analytics" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>          <span class="doc doc-object-name doc-attribute-name">humbldata.portfolio.portfolio_controller.Portfolio.analytics</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#humbldata.portfolio.portfolio_controller.Portfolio.analytics" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">analytics</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>The analytics submodule of the Portfolio controller.</p>
<p>Access to all the Analytics indicators. When the Portfolio class is
instantiated the parameters are initialized with the PortfolioQueryParams
class, which hold all the fields needed for the context_params, like the
symbol, interval, start_date, and end_date.</p>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h3 id="humbldata.portfolio.analytics" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.portfolio.analytics</span>


<a href="#humbldata.portfolio.analytics" class="headerlink" title="Permanent link">¤</a></h3>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h4 id="humbldata.portfolio.analytics.analytics_controller" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.portfolio.analytics.analytics_controller</span>


<a href="#humbldata.portfolio.analytics.analytics_controller" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">
  
      <p>Context: Portfolio || <strong>Category: Analytics</strong>.</p>
<p>A controller to manage and compile all of the Analytics models
available in the <code>portfolio</code> context. This will be passed as a
<code>@property</code> to the <code>portfolio()</code> class, giving access to the
Analytics module and its functions.</p>

  

  <div class="doc doc-children">















<div class="doc doc-object doc-class">



<h5 id="humbldata.portfolio.analytics.analytics_controller.Analytics" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.portfolio.analytics.analytics_controller.Analytics</span>


<a href="#humbldata.portfolio.analytics.analytics_controller.Analytics" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">

  
      <p>Module for all Analytics analysis.</p>



  <p><span class="doc-section-title">Attributes:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.portfolio.analytics.analytics_controller.Analytics.context_params">context_params</span></code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.PortfolioQueryParams" href="../core/#humbldata.core.standard_models.portfolio.PortfolioQueryParams">PortfolioQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The standard query parameters for portfolio data.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Methods:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.portfolio.analytics.analytics_controller.Analytics.user_table" href="#humbldata.portfolio.analytics.analytics_controller.Analytics.user_table">user_table</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Execute the UserTable command.</p>
              </div>
            </td>
          </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/portfolio/analytics/analytics_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Analytics</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Module for all Analytics analysis.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    context_params : PortfolioQueryParams</span>
<span class="sd">        The standard query parameters for portfolio data.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    user_table(command_params: UserTableQueryParams)</span>
<span class="sd">        Execute the UserTable command.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context_params</span><span class="p">:</span> <span class="n">PortfolioQueryParams</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span> <span class="o">=</span> <span class="n">context_params</span>

    <span class="k">def</span> <span class="nf">user_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">UserTableQueryParams</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute the UserTable command.</span>

<span class="sd">        Explain the functionality...</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">humbldata.core.standard_models.portfolio.analytics.user_table</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">UserTableFetcher</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Instantiate the Fetcher with the query parameters</span>
        <span class="n">fetcher</span> <span class="o">=</span> <span class="n">UserTableFetcher</span><span class="p">(</span>
            <span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span> <span class="n">command_params</span><span class="o">=</span><span class="n">kwargs</span>
        <span class="p">)</span>

        <span class="c1"># Use the fetcher to get the data</span>
        <span class="k">return</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h6 id="humbldata.portfolio.analytics.analytics_controller.Analytics.user_table" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.portfolio.analytics.analytics_controller.Analytics.user_table</span>


<a href="#humbldata.portfolio.analytics.analytics_controller.Analytics.user_table" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">user_table</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams" href="../core/#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams">UserTableQueryParams</a></span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Execute the UserTable command.</p>
<p>Explain the functionality...</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/portfolio/analytics/analytics_controller.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">user_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">UserTableQueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Execute the UserTable command.</span>

<span class="sd">    Explain the functionality...</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">humbldata.core.standard_models.portfolio.analytics.user_table</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">UserTableFetcher</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Instantiate the Fetcher with the query parameters</span>
    <span class="n">fetcher</span> <span class="o">=</span> <span class="n">UserTableFetcher</span><span class="p">(</span>
        <span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span> <span class="n">command_params</span><span class="o">=</span><span class="n">kwargs</span>
    <span class="p">)</span>

    <span class="c1"># Use the fetcher to get the data</span>
    <span class="k">return</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="humbldata.portfolio.analytics.user_table" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.portfolio.analytics.user_table</span>


<a href="#humbldata.portfolio.analytics.user_table" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h5 id="humbldata.portfolio.analytics.user_table.helpers" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.portfolio.analytics.user_table.helpers</span>


<a href="#humbldata.portfolio.analytics.user_table.helpers" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p><strong>Context: Portfolio || Category: Analytics || Command: user_table</strong>.</p>
<p>The UserTable Helpers Module.</p>

  

  <div class="doc doc-children">
































<div class="doc doc-object doc-function">



<h6 id="humbldata.portfolio.analytics.user_table.helpers.aget_sector_filter" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.portfolio.analytics.user_table.helpers.aget_sector_filter</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#humbldata.portfolio.analytics.user_table.helpers.aget_sector_filter" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">aget_sector_filter</span><span class="p">(</span><span class="n">symbols</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">provider</span><span class="p">:</span> <span class="n"><span title="humbldata.core.utils.constants.OBB_EQUITY_PROFILE_PROVIDERS">OBB_EQUITY_PROFILE_PROVIDERS</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;yfinance&#39;</span><span class="p">,</span> <span class="n">etf_data</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.analytics.etf_category.ETFCategoryData" href="../core/#humbldata.core.standard_models.portfolio.analytics.etf_category.ETFCategoryData">ETFCategoryData</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Portfolio || Category: Analytics || Command: User Table || <strong>Command: aget_sector_filter</strong>.</p>
<p>Retrieves equity sector information for given symbols, filling in the ETF sector
with the <code>obb.etf.info</code> category column from <code>aget_etf_sector</code>. This function
also normalizes the sector to GICS_SECTORS via the
<code>.replace(GICS_SECTOR_MAPPING)</code> method, and renames the <code>category</code> column to
<code>sector</code>. The normalization is different from the normalization in
<code>aget_asset_class_filter</code> in that this function uses <code>.str.replace()</code> to
normalize the sector, while <code>aget_asset_class_filter</code> uses <code>.replace()</code>.
Using <code>.str.replace()</code> allows for Regex matching, but this method since all
values are known is slightly more performant.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>symbols</code></td>
          <td>
                <code>str | list[str] | <span title="polars.Series">Series</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The symbols to query for sector/category information.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>provider</code></td>
          <td>
                <code><span title="humbldata.core.utils.constants.OBB_EQUITY_PROFILE_PROVIDERS">OBB_EQUITY_PROFILE_PROVIDERS</span> | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The data provider to use. Default is "yfinance".</p>
            </div>
          </td>
          <td>
                <code>&#39;yfinance&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A Polars LazyFrame with columns for symbols and their corresponding sectors/categories.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>This function uses aget_equity_sector() to fetch sector information and aget_etf_category()
for symbols without sectors. It then combines the results.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/portfolio/analytics/user_table/helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">aget_sector_filter</span><span class="p">(</span>
    <span class="n">symbols</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">provider</span><span class="p">:</span> <span class="n">OBB_EQUITY_PROFILE_PROVIDERS</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;yfinance&quot;</span><span class="p">,</span>
    <span class="n">etf_data</span><span class="p">:</span> <span class="n">ETFCategoryData</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Portfolio || Category: Analytics || Command: User Table || **Command: aget_sector_filter**.</span>

<span class="sd">    Retrieves equity sector information for given symbols, filling in the ETF sector</span>
<span class="sd">    with the `obb.etf.info` category column from `aget_etf_sector`. This function</span>
<span class="sd">    also normalizes the sector to GICS_SECTORS via the</span>
<span class="sd">    `.replace(GICS_SECTOR_MAPPING)` method, and renames the `category` column to</span>
<span class="sd">    `sector`. The normalization is different from the normalization in</span>
<span class="sd">    `aget_asset_class_filter` in that this function uses `.str.replace()` to</span>
<span class="sd">    normalize the sector, while `aget_asset_class_filter` uses `.replace()`.</span>
<span class="sd">    Using `.str.replace()` allows for Regex matching, but this method since all</span>
<span class="sd">    values are known is slightly more performant.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbols : str | list[str] | pl.Series</span>
<span class="sd">        The symbols to query for sector/category information.</span>
<span class="sd">    provider : OBB_EQUITY_PROFILE_PROVIDERS | None, optional</span>
<span class="sd">        The data provider to use. Default is &quot;yfinance&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        A Polars LazyFrame with columns for symbols and their corresponding sectors/categories.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function uses aget_equity_sector() to fetch sector information and aget_etf_category()</span>
<span class="sd">    for symbols without sectors. It then combines the results.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get sector information</span>
    <span class="n">equity_sectors</span> <span class="o">=</span> <span class="k">await</span> <span class="n">aget_equity_sector</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;yfinance&quot;</span><span class="p">)</span>

    <span class="c1"># Identify symbols with null sectors</span>
    <span class="n">etf_symbols</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">equity_sectors</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;sector&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_null</span><span class="p">())</span>
        <span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">&quot;symbol&quot;</span><span class="p">])</span>
        <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
        <span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
        <span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">equity_sectors</span> <span class="o">=</span> <span class="n">equity_sectors</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;sector&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_not_null</span><span class="p">())</span>

    <span class="c1"># Get ETF categories for symbols with null sectors</span>
    <span class="k">if</span> <span class="n">etf_symbols</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">etf_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">etf_categories</span> <span class="o">=</span> <span class="k">await</span> <span class="n">aget_etf_category</span><span class="p">(</span>
                <span class="n">etf_symbols</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;yfinance&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Remove columns with NULL (incoming equity symbols from ETF_DATA)</span>
            <span class="c1"># since only etf symbols are collected from logic above</span>
            <span class="c1"># Validation</span>
            <span class="n">etf_data</span> <span class="o">=</span> <span class="n">etf_data</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_in</span><span class="p">(</span><span class="n">etf_symbols</span><span class="p">))</span>
            <span class="n">etf_categories</span> <span class="o">=</span> <span class="n">ETFCategoryData</span><span class="p">(</span><span class="n">etf_data</span><span class="p">)</span>

        <span class="c1"># Normalize Sectors to GICS_SECTORS</span>
        <span class="n">etf_categories</span> <span class="o">=</span> <span class="n">etf_categories</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
            <span class="p">{</span><span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;sector&quot;</span><span class="p">}</span>
        <span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;sector&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">GICS_SECTOR_MAPPING</span><span class="p">))</span>

        <span class="c1"># If all symbols are ETFs, return the ETF sectors (no need to combine)</span>
        <span class="k">if</span> <span class="n">etf_symbols</span> <span class="o">==</span> <span class="n">symbols</span><span class="p">:</span>
            <span class="n">out_sectors</span> <span class="o">=</span> <span class="n">etf_categories</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out_sectors</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span>
                <span class="p">[</span><span class="n">equity_sectors</span><span class="p">,</span> <span class="n">etf_categories</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out_sectors</span> <span class="o">=</span> <span class="n">equity_sectors</span>

    <span class="k">return</span> <span class="n">out_sectors</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.portfolio.analytics.user_table.helpers.normalize_asset_class" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.portfolio.analytics.user_table.helpers.normalize_asset_class</span>


<a href="#humbldata.portfolio.analytics.user_table.helpers.normalize_asset_class" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">normalize_asset_class</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Normalize the asset class in the given LazyFrame to standard ASSET_CLASSES values.</p>
<p>This function uses string replacement to standardize asset class names in
the 'category' column of the input LazyFrame.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input LazyFrame containing 'symbol' and 'category' columns to be normalized.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A new LazyFrame with the 'category' column normalized to standard asset classes.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>This function assumes that the input LazyFrame has 'symbol' and 'category' columns.
If these columns don't exist, the function may raise an error.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/portfolio/analytics/user_table/helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">normalize_asset_class</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Normalize the asset class in the given LazyFrame to standard ASSET_CLASSES values.</span>

<span class="sd">    This function uses string replacement to standardize asset class names in</span>
<span class="sd">    the &#39;category&#39; column of the input LazyFrame.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.LazyFrame</span>
<span class="sd">        The input LazyFrame containing &#39;symbol&#39; and &#39;category&#39; columns to be normalized.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        A new LazyFrame with the &#39;category&#39; column normalized to standard asset classes.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function assumes that the input LazyFrame has &#39;symbol&#39; and &#39;category&#39; columns.</span>
<span class="sd">    If these columns don&#39;t exist, the function may raise an error.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_in</span><span class="p">([</span><span class="s2">&quot;GLD&quot;</span><span class="p">,</span> <span class="s2">&quot;FGDL&quot;</span><span class="p">,</span> <span class="s2">&quot;BGLD&quot;</span><span class="p">]))</span>
        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;Foreign Exchange&quot;</span><span class="p">))</span>
        <span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_in</span><span class="p">([</span><span class="s2">&quot;UUP&quot;</span><span class="p">,</span> <span class="s2">&quot;UDN&quot;</span><span class="p">,</span> <span class="s2">&quot;USDU&quot;</span><span class="p">]))</span>
        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;Cash&quot;</span><span class="p">))</span>
        <span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_in</span><span class="p">([</span><span class="s2">&quot;BITI&quot;</span><span class="p">,</span> <span class="s2">&quot;ETHU&quot;</span><span class="p">,</span> <span class="s2">&quot;ZZZ&quot;</span><span class="p">]))</span>
        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;Crypto&quot;</span><span class="p">))</span>
        <span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_in</span><span class="p">([</span><span class="s2">&quot;BDRY&quot;</span><span class="p">,</span> <span class="s2">&quot;LNGG&quot;</span><span class="p">,</span> <span class="s2">&quot;AMPD&quot;</span><span class="p">,</span> <span class="s2">&quot;USOY&quot;</span><span class="p">]))</span>
        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;Commodity&quot;</span><span class="p">))</span>
        <span class="o">.</span><span class="n">otherwise</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="sa">r</span><span class="s2">&quot;^(?:\w+\s){0,2}\w*\bBond\b\w*(?:\s\w+){0,2}$&quot;</span><span class="p">,</span> <span class="s2">&quot;Fixed Income&quot;</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;.*Commodities.*&quot;</span><span class="p">,</span> <span class="s2">&quot;Commodity&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;.*Digital.*&quot;</span><span class="p">,</span> <span class="s2">&quot;Crypto&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;.*Currency.*&quot;</span><span class="p">,</span> <span class="s2">&quot;Foreign Exchange&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;.*Equity.*&quot;</span><span class="p">,</span> <span class="s2">&quot;Equity&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Utilities&quot;</span><span class="p">,</span> <span class="s2">&quot;Equity&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Financial&quot;</span><span class="p">,</span> <span class="s2">&quot;Equity&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Technology&quot;</span><span class="p">,</span> <span class="s2">&quot;Equity&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.portfolio.analytics.user_table.helpers.aget_asset_class_filter" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.portfolio.analytics.user_table.helpers.aget_asset_class_filter</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#humbldata.portfolio.analytics.user_table.helpers.aget_asset_class_filter" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">aget_asset_class_filter</span><span class="p">(</span><span class="n">symbols</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">provider</span><span class="p">:</span> <span class="n"><span title="humbldata.core.utils.constants.OBB_ETF_INFO_PROVIDERS">OBB_ETF_INFO_PROVIDERS</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;yfinance&#39;</span><span class="p">,</span> <span class="n">etf_data</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.analytics.etf_category.ETFCategoryData" href="../core/#humbldata.core.standard_models.portfolio.analytics.etf_category.ETFCategoryData">ETFCategoryData</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Portfolio || Category: Analytics || Command: User Table || <strong>Command: aget_asset_class_filter</strong>.</p>
<p>This function takes in a list of symbols and returns a LazyFrame with the
asset class for each symbol. Unlike aget_sector_filter, this function
normalizes the asset class using the normalize_asset_class() method, which
employs <code>.str.replace()</code> for Regex matching. This approach allows for more
flexible pattern matching but may be slightly less performant than the
direct <code>.replace()</code> method used in aget_sector_filter.</p>
<p>The function also renames the 'category' column to 'asset_class'. The
normalization process maps the asset classes to standard ASSET_CLASSES values.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/portfolio/analytics/user_table/helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">aget_asset_class_filter</span><span class="p">(</span>
    <span class="n">symbols</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">provider</span><span class="p">:</span> <span class="n">OBB_ETF_INFO_PROVIDERS</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;yfinance&quot;</span><span class="p">,</span>
    <span class="n">etf_data</span><span class="p">:</span> <span class="n">ETFCategoryData</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Portfolio || Category: Analytics || Command: User Table || **Command: aget_asset_class_filter**.</span>

<span class="sd">    This function takes in a list of symbols and returns a LazyFrame with the</span>
<span class="sd">    asset class for each symbol. Unlike aget_sector_filter, this function</span>
<span class="sd">    normalizes the asset class using the normalize_asset_class() method, which</span>
<span class="sd">    employs `.str.replace()` for Regex matching. This approach allows for more</span>
<span class="sd">    flexible pattern matching but may be slightly less performant than the</span>
<span class="sd">    direct `.replace()` method used in aget_sector_filter.</span>

<span class="sd">    The function also renames the &#39;category&#39; column to &#39;asset_class&#39;. The</span>
<span class="sd">    normalization process maps the asset classes to standard ASSET_CLASSES values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">etf_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="k">await</span> <span class="n">aget_etf_category</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="n">provider</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">ETFCategoryData</span><span class="p">(</span><span class="n">etf_data</span><span class="p">)</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_null</span><span class="p">())</span>
            <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;Equity&quot;</span><span class="p">))</span>
            <span class="o">.</span><span class="n">otherwise</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">))</span>
            <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">normalize_asset_class</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;asset_class&quot;</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.portfolio.analytics.user_table.helpers.calc_up_down_pct" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.portfolio.analytics.user_table.helpers.calc_up_down_pct</span>


<a href="#humbldata.portfolio.analytics.user_table.helpers.calc_up_down_pct" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">calc_up_down_pct</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">recent_price_col</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;recent_price&#39;</span><span class="p">,</span> <span class="n">bottom_price_col</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;bottom_price&#39;</span><span class="p">,</span> <span class="n">top_price_col</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;top_price&#39;</span><span class="p">,</span> <span class="n">pct_output_col</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;ud_pct&#39;</span><span class="p">,</span> <span class="n">ratio_output_col</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;ud_ratio&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Calculate the difference between recent and bottom prices, and recent and top prices, and express the ratio of the two.</p>
<p>This function computes the percentage change from the recent price to the bottom price,
and from the recent price to the top price. The results are combined into a single string
column, and the ratio is provided in a separate column normalized between 0 and 1.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Input DataFrame containing price data.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>recent_price_col</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the column containing recent prices. Default is "recent_price".</p>
            </div>
          </td>
          <td>
                <code>&#39;recent_price&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>bottom_price_col</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the column containing bottom prices. Default is "bottom_price".</p>
            </div>
          </td>
          <td>
                <code>&#39;bottom_price&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>top_price_col</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the column containing top prices. Default is "top_price".</p>
            </div>
          </td>
          <td>
                <code>&#39;top_price&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>pct_output_col</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the output column for price percentages. Default is "price_percentages".</p>
            </div>
          </td>
          <td>
                <code>&#39;ud_pct&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>ratio_output_col</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the output column for the up/down ratio. Default is "ud_ratio".</p>
            </div>
          </td>
          <td>
                <code>&#39;ud_ratio&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>DataFrame with additional columns containing the calculated price percentages and normalized ratio.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>The output column will contain strings in the format "-X.XX / +Y.YY", where X.XX is the
percentage decrease from recent to bottom price, and Y.YY is the percentage increase from
recent to top price. The ratio column will contain a normalized value between 0 and 1,
where values closer to 1 indicate a better upside/downside ratio.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/portfolio/analytics/user_table/helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calc_up_down_pct</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">recent_price_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;recent_price&quot;</span><span class="p">,</span>
    <span class="n">bottom_price_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottom_price&quot;</span><span class="p">,</span>
    <span class="n">top_price_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;top_price&quot;</span><span class="p">,</span>
    <span class="n">pct_output_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ud_pct&quot;</span><span class="p">,</span>
    <span class="n">ratio_output_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;ud_ratio&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the difference between recent and bottom prices, and recent and top prices, and express the ratio of the two.</span>

<span class="sd">    This function computes the percentage change from the recent price to the bottom price,</span>
<span class="sd">    and from the recent price to the top price. The results are combined into a single string</span>
<span class="sd">    column, and the ratio is provided in a separate column normalized between 0 and 1.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame</span>
<span class="sd">        Input DataFrame containing price data.</span>
<span class="sd">    recent_price_col : str, optional</span>
<span class="sd">        Name of the column containing recent prices. Default is &quot;recent_price&quot;.</span>
<span class="sd">    bottom_price_col : str, optional</span>
<span class="sd">        Name of the column containing bottom prices. Default is &quot;bottom_price&quot;.</span>
<span class="sd">    top_price_col : str, optional</span>
<span class="sd">        Name of the column containing top prices. Default is &quot;top_price&quot;.</span>
<span class="sd">    pct_output_col : str, optional</span>
<span class="sd">        Name of the output column for price percentages. Default is &quot;price_percentages&quot;.</span>
<span class="sd">    ratio_output_col : str, optional</span>
<span class="sd">        Name of the output column for the up/down ratio. Default is &quot;ud_ratio&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame</span>
<span class="sd">        DataFrame with additional columns containing the calculated price percentages and normalized ratio.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The output column will contain strings in the format &quot;-X.XX / +Y.YY&quot;, where X.XX is the</span>
<span class="sd">    percentage decrease from recent to bottom price, and Y.YY is the percentage increase from</span>
<span class="sd">    recent to top price. The ratio column will contain a normalized value between 0 and 1,</span>
<span class="sd">    where values closer to 1 indicate a better upside/downside ratio.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">concat_str</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">),</span>
                        <span class="p">(</span>
                            <span class="p">(</span>
                                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">recent_price_col</span><span class="p">)</span>
                                <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">bottom_price_col</span><span class="p">)</span>
                            <span class="p">)</span>
                            <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">recent_price_col</span><span class="p">)</span>
                            <span class="o">*</span> <span class="mi">100</span>
                        <span class="p">)</span>
                        <span class="o">.</span><span class="n">abs</span><span class="p">()</span>
                        <span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span><span class="p">),</span>
                        <span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot; / +&quot;</span><span class="p">),</span>
                        <span class="p">(</span>
                            <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">top_price_col</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">recent_price_col</span><span class="p">))</span>
                            <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">recent_price_col</span><span class="p">)</span>
                            <span class="o">*</span> <span class="mi">100</span>
                        <span class="p">)</span>
                        <span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span><span class="p">),</span>
                    <span class="p">]</span>
                <span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="n">pct_output_col</span><span class="p">),</span>
            <span class="p">(</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">top_price_col</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">recent_price_col</span><span class="p">))</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span>
                <span class="o">/</span> <span class="p">(</span>
                    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">top_price_col</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">recent_price_col</span><span class="p">))</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span>
                    <span class="o">+</span> <span class="p">(</span>
                        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">recent_price_col</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">bottom_price_col</span><span class="p">)</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="n">ratio_output_col</span><span class="p">),</span>
        <span class="p">]</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.portfolio.analytics.user_table.model" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.portfolio.analytics.user_table.model</span>


<a href="#humbldata.portfolio.analytics.user_table.model" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p><strong>Context: Portfolio || Category: Analytics || Command: user_table</strong>.</p>
<p>The user_table Command Module.</p>

  

  <div class="doc doc-children">
































<div class="doc doc-object doc-function">



<h6 id="humbldata.portfolio.analytics.user_table.model.user_table_engine" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.portfolio.analytics.user_table.model.user_table_engine</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#humbldata.portfolio.analytics.user_table.model.user_table_engine" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">user_table_engine</span><span class="p">(</span><span class="n">symbols</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">etf_data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">toolbox</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.toolbox.toolbox_controller.Toolbox" href="../context/toolbox/#humbldata.toolbox.toolbox_controller.Toolbox">Toolbox</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">mandelbrot_data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">membership</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;anonymous&#39;</span><span class="p">,</span> <span class="s1">&#39;humblPEON&#39;</span><span class="p">,</span> <span class="s1">&#39;humblPREMIUM&#39;</span><span class="p">,</span> <span class="s1">&#39;humblPOWER&#39;</span><span class="p">,</span> <span class="s1">&#39;admin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;anonymous&#39;</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Aggregate user table data from various sources.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>symbols</code></td>
          <td>
                <code>str or list of str or pl.Series</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The stock symbols to aggregate data for.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>etf_data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span> or None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Pre-fetched ETF data. If None, it will be fetched, by default None.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>toolbox</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.toolbox.toolbox_controller.Toolbox" href="../context/toolbox/#humbldata.toolbox.toolbox_controller.Toolbox">Toolbox</a> or None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Pre-generated toolbox. If None, it will be generated, by default None.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>mandelbrot_data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span> or None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Pre-calculated Mandelbrot channel data. If None, it will be calculated, by default None.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>membership</code></td>
          <td>
                <code><span title="typing.Literal">Literal</span>[&#39;anonymous&#39;, &#39;humblPEON&#39;, &#39;humblPREMIUM&#39;, &#39;humblPOWER&#39;, &#39;admin&#39;]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The user's role. If None, it will be calculated, by default None.</p>
            </div>
          </td>
          <td>
                <code>&#39;anonymous&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A LazyFrame containing the aggregated user table data with columns:
date, symbol, bottom_price, recent_price, top_price, ud_pct, ud_ratio,
sector, and asset_class.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>This function performs the following steps:
1. Fetches ETF data if not provided
2. Generates a toolbox if not provided
3. Calculates Mandelbrot channel if not provided
4. Concurrently fetches latest price, sector, and asset class data
5. Combines all data into a single LazyFrame
6. Calculates up/down percentages and ratios
7. Selects and returns relevant columns</p>
<p>The function uses asynchronous operations for improved performance when
fetching data from multiple sources.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/portfolio/analytics/user_table/model.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">user_table_engine</span><span class="p">(</span>
    <span class="n">symbols</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">etf_data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">toolbox</span><span class="p">:</span> <span class="n">Toolbox</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">mandelbrot_data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">membership</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span>
        <span class="s2">&quot;anonymous&quot;</span><span class="p">,</span> <span class="s2">&quot;humblPEON&quot;</span><span class="p">,</span> <span class="s2">&quot;humblPREMIUM&quot;</span><span class="p">,</span> <span class="s2">&quot;humblPOWER&quot;</span><span class="p">,</span> <span class="s2">&quot;admin&quot;</span>
    <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;anonymous&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Aggregate user table data from various sources.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbols : str or list of str or pl.Series</span>
<span class="sd">        The stock symbols to aggregate data for.</span>
<span class="sd">    etf_data : pl.LazyFrame or None, optional</span>
<span class="sd">        Pre-fetched ETF data. If None, it will be fetched, by default None.</span>
<span class="sd">    toolbox : Toolbox or None, optional</span>
<span class="sd">        Pre-generated toolbox. If None, it will be generated, by default None.</span>
<span class="sd">    mandelbrot_data : pl.LazyFrame or None, optional</span>
<span class="sd">        Pre-calculated Mandelbrot channel data. If None, it will be calculated, by default None.</span>
<span class="sd">    membership : Literal[&quot;anonymous&quot;, &quot;humblPEON&quot;, &quot;humblPREMIUM&quot;, &quot;humblPOWER&quot;, &quot;admin&quot;], optional</span>
<span class="sd">        The user&#39;s role. If None, it will be calculated, by default None.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        A LazyFrame containing the aggregated user table data with columns:</span>
<span class="sd">        date, symbol, bottom_price, recent_price, top_price, ud_pct, ud_ratio,</span>
<span class="sd">        sector, and asset_class.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function performs the following steps:</span>
<span class="sd">    1. Fetches ETF data if not provided</span>
<span class="sd">    2. Generates a toolbox if not provided</span>
<span class="sd">    3. Calculates Mandelbrot channel if not provided</span>
<span class="sd">    4. Concurrently fetches latest price, sector, and asset class data</span>
<span class="sd">    5. Combines all data into a single LazyFrame</span>
<span class="sd">    6. Calculates up/down percentages and ratios</span>
<span class="sd">    7. Selects and returns relevant columns</span>

<span class="sd">    The function uses asynchronous operations for improved performance when</span>
<span class="sd">    fetching data from multiple sources.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Fetch ETF data if not provided</span>
    <span class="k">if</span> <span class="n">etf_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">etf_data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">aget_etf_category</span><span class="p">(</span><span class="n">symbols</span><span class="o">=</span><span class="n">symbols</span><span class="p">)</span>

    <span class="c1"># Calculate Mandelbrot channel if not provided</span>
    <span class="k">if</span> <span class="n">mandelbrot_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Generate toolbox params based on membership if not provided</span>
        <span class="k">if</span> <span class="n">toolbox</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">toolbox</span> <span class="o">=</span> <span class="n">Toolbox</span><span class="p">(</span><span class="n">symbols</span><span class="o">=</span><span class="n">symbols</span><span class="p">,</span> <span class="n">membership</span><span class="o">=</span><span class="n">membership</span><span class="p">)</span>
        <span class="n">mandelbrot_data</span> <span class="o">=</span> <span class="n">toolbox</span><span class="o">.</span><span class="n">technical</span><span class="o">.</span><span class="n">mandelbrot_channel</span><span class="p">()</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span>
            <span class="n">collect</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
    <span class="c1"># Fetch data from all sources concurrently, passing etf_data where needed</span>
    <span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">aget_latest_price</span><span class="p">(</span><span class="n">symbols</span><span class="o">=</span><span class="n">symbols</span><span class="p">),</span>
        <span class="n">aget_sector_filter</span><span class="p">(</span><span class="n">symbols</span><span class="o">=</span><span class="n">symbols</span><span class="p">,</span> <span class="n">etf_data</span><span class="o">=</span><span class="n">etf_data</span><span class="p">),</span>
        <span class="n">aget_asset_class_filter</span><span class="p">(</span><span class="n">symbols</span><span class="o">=</span><span class="n">symbols</span><span class="p">,</span> <span class="n">etf_data</span><span class="o">=</span><span class="n">etf_data</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">lazyframes</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">tasks</span><span class="p">)</span>

    <span class="c1"># Combine all DataFrames into a single LazyFrame</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">lazyframes</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;align&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
            <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mandelbrot_data</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">calc_up_down_pct</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">select</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="s2">&quot;date&quot;</span><span class="p">,</span>
                <span class="s2">&quot;symbol&quot;</span><span class="p">,</span>
                <span class="s2">&quot;bottom_price&quot;</span><span class="p">,</span>
                <span class="s2">&quot;recent_price&quot;</span><span class="p">,</span>
                <span class="s2">&quot;top_price&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ud_pct&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ud_ratio&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sector&quot;</span><span class="p">,</span>
                <span class="s2">&quot;asset_class&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&quot;recent_price&quot;</span><span class="p">:</span> <span class="s2">&quot;last_price&quot;</span><span class="p">})</span>
        <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&quot;bottom_price&quot;</span><span class="p">:</span> <span class="s2">&quot;buy_price&quot;</span><span class="p">})</span>
        <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&quot;top_price&quot;</span><span class="p">:</span> <span class="s2">&quot;sell_price&quot;</span><span class="p">})</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.portfolio.analytics.user_table.view" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.portfolio.analytics.user_table.view</span>


<a href="#humbldata.portfolio.analytics.user_table.view" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p><strong>Context: Portfolio || Category: Analytics || Command: user_table</strong>.</p>
<p>The UserTable View Module.</p>

  

  <div class="doc doc-children">
















<div class="doc doc-object doc-function">



<h6 id="humbldata.portfolio.analytics.user_table.view.create_example_plot" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.portfolio.analytics.user_table.view.create_example_plot</span>


<a href="#humbldata.portfolio.analytics.user_table.view.create_example_plot" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_example_plot</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="plotly.graph_objs.Figure">Figure</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Generate an example plot from the provided data.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dataframe containing the data to be plotted.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>template</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The template to be used for styling the plot.</p>
            </div>
          </td>
          <td>
                <code><span title="humbldata.core.standard_models.abstract.chart.ChartTemplate.plotly">plotly</span></code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="plotly.graph_objs.Figure">Figure</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A plotly figure object representing the example plot.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/portfolio/analytics/user_table/view.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_example_plot</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="n">ChartTemplate</span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate an example plot from the provided data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame</span>
<span class="sd">        The dataframe containing the data to be plotted.</span>
<span class="sd">    template : ChartTemplate</span>
<span class="sd">        The template to be used for styling the plot.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    go.Figure</span>
<span class="sd">        A plotly figure object representing the example plot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
        <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;x_column&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_series</span><span class="p">(),</span>
            <span class="n">y</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;y_column&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_series</span><span class="p">(),</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Example Data&quot;</span><span class="p">,</span>
            <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Example Plot&quot;</span><span class="p">,</span>
        <span class="n">xaxis_title</span><span class="o">=</span><span class="s2">&quot;X Axis&quot;</span><span class="p">,</span>
        <span class="n">yaxis_title</span><span class="o">=</span><span class="s2">&quot;Y Axis&quot;</span><span class="p">,</span>
        <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.portfolio.analytics.user_table.view.generate_plots" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.portfolio.analytics.user_table.view.generate_plots</span>


<a href="#humbldata.portfolio.analytics.user_table.view.generate_plots" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate_plots</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.Chart" href="../core/#humbldata.core.standard_models.abstract.chart.Chart">Chart</a></span><span class="p">]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Portfolio || Category: Analytics || Command: user_table || <strong>Function: generate_plots()</strong>.</p>
<p>Generate plots from the given dataframe.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The LazyFrame containing the data to be plotted.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>template</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The template/theme to use for the plotly figure.</p>
            </div>
          </td>
          <td>
                <code><span title="humbldata.core.standard_models.abstract.chart.ChartTemplate.plotly">plotly</span></code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.Chart" href="../core/#humbldata.core.standard_models.abstract.chart.Chart">Chart</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of Chart objects, each representing a plot.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/portfolio/analytics/user_table/view.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_plots</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="n">ChartTemplate</span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Chart</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Portfolio || Category: Analytics || Command: user_table || **Function: generate_plots()**.</span>

<span class="sd">    Generate plots from the given dataframe.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.LazyFrame</span>
<span class="sd">        The LazyFrame containing the data to be plotted.</span>
<span class="sd">    template : ChartTemplate</span>
<span class="sd">        The template/theme to use for the plotly figure.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    List[Chart]</span>
<span class="sd">        A list of Chart objects, each representing a plot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">collected_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    <span class="n">plot</span> <span class="o">=</span> <span class="n">create_example_plot</span><span class="p">(</span><span class="n">collected_data</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">Chart</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">plot</span><span class="o">.</span><span class="n">to_plotly_json</span><span class="p">(),</span> <span class="n">fig</span><span class="o">=</span><span class="n">plot</span><span class="p">)]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h2 id="humbldata.toolbox" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox</span>


<a href="#humbldata.toolbox" class="headerlink" title="Permanent link">¤</a></h2>

  <div class="doc doc-contents ">
  
      <p><strong>Context: Toolbox</strong>.</p>
<p>A category to group all of the technical indicators available in the <code>Toolbox()</code></p>
<p>Technical indicators rely on statistical transformations of time series data.
These are raw math operations.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h3 id="humbldata.toolbox.toolbox_helpers" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.toolbox_helpers</span>


<a href="#humbldata.toolbox.toolbox_helpers" class="headerlink" title="Permanent link">¤</a></h3>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || <strong>Category: Helpers</strong>.</p>
<p>These <code>Toolbox()</code> helpers are used in various calculations in the toolbox
context. Most of the helpers will be mathematical transformations of data. These
functions should be <strong>DUMB</strong> functions.</p>

  

  <div class="doc doc-children">












<div class="doc doc-object doc-function">



<h4 id="humbldata.toolbox.toolbox_helpers.log_returns" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.toolbox_helpers.log_returns</span>


<a href="#humbldata.toolbox.toolbox_helpers.log_returns" class="headerlink" title="Permanent link">¤</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">log_returns</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.Series">Series</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_column_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;adj_close&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.Series">Series</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Helpers || <strong>Command: log_returns</strong>.</p>
<p>This is a DUMB command. It can be used in any CONTEXT or CATEGORY.
Calculates the logarithmic returns for a given Polars Series, DataFrame, or
LazyFrame. Logarithmic returns are widely used in the financial
industry to measure the rate of return on investments over time. This
function supports calculations on both individual series and dataframes
containing financial time series data.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.Series">Series</span> | <span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data for which to calculate the log returns. Default is None.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_drop_nulls</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to drop null values from the result. Default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The column name to use for log return calculations in DataFrame or
LazyFrame. Default is "adj_close".</p>
            </div>
          </td>
          <td>
                <code>&#39;adj_close&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_sort</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, sorts the DataFrame or LazyFrame by <code>date</code> and <code>symbol</code> before
calculation. If you want a DUMB function, set to False.
Default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.Series">Series</span> | <span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The original <code>data</code>, with an extra column of <code>log returns</code> of the input
data. The return type matches the input type.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Raises:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.errors.HumblDataError" href="../core/#humbldata.core.standard_models.abstract.errors.HumblDataError">HumblDataError</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If neither a series, DataFrame, nor LazyFrame is provided as input.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">series</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">103</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log_returns</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">series</span><span class="p">)</span>
<span class="go">series([-inf, 0.048790, -0.019418])</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;adj_close&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">103</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log_returns</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
<span class="go">shape: (3, 2)</span>
<span class="go">┌───────────┬────────────┐</span>
<span class="go">│ adj_close ┆ log_returns│</span>
<span class="go">│ ---       ┆ ---        │</span>
<span class="go">│ f64       ┆ f64        │</span>
<span class="go">╞═══════════╪════════════╡</span>
<span class="go">│ 100.0     ┆ NaN        │</span>
<span class="go">├───────────┼────────────┤</span>
<span class="go">│ 105.0     ┆ 0.048790   │</span>
<span class="go">├───────────┼────────────┤</span>
<span class="go">│ 103.0     ┆ -0.019418  │</span>
<span class="go">└───────────┴────────────┘</span>
</code></pre></div>

<details class="improvements" open>
  <summary>Improvements</summary>
  <p>Add a parameter <code>_sort_cols: list[str] | None = None</code> to make the function even
dumber. This way you could specify certain columns to sort by instead of
using default <code>date</code> and <code>symbol</code>. If <code>_sort_cols=None</code> and <code>_sort=True</code>,
then the function will use the default <code>date</code> and <code>symbol</code> columns for
sorting.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/toolbox_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">log_returns</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;adj_close&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Helpers || **Command: log_returns**.</span>

<span class="sd">    This is a DUMB command. It can be used in any CONTEXT or CATEGORY.</span>
<span class="sd">    Calculates the logarithmic returns for a given Polars Series, DataFrame, or</span>
<span class="sd">    LazyFrame. Logarithmic returns are widely used in the financial</span>
<span class="sd">    industry to measure the rate of return on investments over time. This</span>
<span class="sd">    function supports calculations on both individual series and dataframes</span>
<span class="sd">    containing financial time series data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.Series | pl.DataFrame | pl.LazyFrame, optional</span>
<span class="sd">        The input data for which to calculate the log returns. Default is None.</span>
<span class="sd">    _drop_nulls : bool, optional</span>
<span class="sd">        Whether to drop null values from the result. Default is True.</span>
<span class="sd">    _column_name : str, optional</span>
<span class="sd">        The column name to use for log return calculations in DataFrame or</span>
<span class="sd">        LazyFrame. Default is &quot;adj_close&quot;.</span>
<span class="sd">    _sort : bool, optional</span>
<span class="sd">        If True, sorts the DataFrame or LazyFrame by `date` and `symbol` before</span>
<span class="sd">        calculation. If you want a DUMB function, set to False.</span>
<span class="sd">        Default is True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.Series | pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The original `data`, with an extra column of `log returns` of the input</span>
<span class="sd">        data. The return type matches the input type.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    HumblDataError</span>
<span class="sd">        If neither a series, DataFrame, nor LazyFrame is provided as input.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; series = pl.Series([100, 105, 103])</span>
<span class="sd">    &gt;&gt;&gt; log_returns(data=series)</span>
<span class="sd">    series([-inf, 0.048790, -0.019418])</span>

<span class="sd">    &gt;&gt;&gt; df = pl.DataFrame({&quot;adj_close&quot;: [100, 105, 103]})</span>
<span class="sd">    &gt;&gt;&gt; log_returns(data=df)</span>
<span class="sd">    shape: (3, 2)</span>
<span class="sd">    ┌───────────┬────────────┐</span>
<span class="sd">    │ adj_close ┆ log_returns│</span>
<span class="sd">    │ ---       ┆ ---        │</span>
<span class="sd">    │ f64       ┆ f64        │</span>
<span class="sd">    ╞═══════════╪════════════╡</span>
<span class="sd">    │ 100.0     ┆ NaN        │</span>
<span class="sd">    ├───────────┼────────────┤</span>
<span class="sd">    │ 105.0     ┆ 0.048790   │</span>
<span class="sd">    ├───────────┼────────────┤</span>
<span class="sd">    │ 103.0     ┆ -0.019418  │</span>
<span class="sd">    └───────────┴────────────┘</span>

<span class="sd">    Improvements</span>
<span class="sd">    -----------</span>
<span class="sd">    Add a parameter `_sort_cols: list[str] | None = None` to make the function even</span>
<span class="sd">    dumber. This way you could specify certain columns to sort by instead of</span>
<span class="sd">    using default `date` and `symbol`. If `_sort_cols=None` and `_sort=True`,</span>
<span class="sd">    then the function will use the default `date` and `symbol` columns for</span>
<span class="sd">    sorting.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Calculation for Polars Series</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">log</span><span class="p">()</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">()</span>
    <span class="c1"># Calculation for Polars DataFrame or LazyFrame</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sort_cols</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Data must contain &#39;symbol&#39; and &#39;date&#39; columns for sorting.&quot;</span>
            <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;log_returns&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">collect_schema</span><span class="p">()</span><span class="o">.</span><span class="n">names</span><span class="p">():</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">log</span><span class="p">()</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_returns&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="s2">&quot;log_returns&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No valid data type was provided for `log_returns()` calculation.&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h4 id="humbldata.toolbox.toolbox_helpers.detrend" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.toolbox_helpers.detrend</span>


<a href="#humbldata.toolbox.toolbox_helpers.detrend" class="headerlink" title="Permanent link">¤</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">detrend</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">_detrend_col</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;log_returns&#39;</span><span class="p">,</span> <span class="n">_detrend_value_col</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;window_mean&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Helpers || <strong>Command: detrend</strong>.</p>
<p>This is a DUMB command. It can be used in any CONTEXT or CATEGORY.</p>
<p>Detrends a column in a DataFrame, LazyFrame, or Series by subtracting the
values of another column from it. Optionally sorts the data by 'symbol' and
'date' before detrending if _sort is True.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code>Union[<span title="polars.DataFrame">DataFrame</span>, <span title="polars.LazyFrame">LazyFrame</span>, <span title="polars.Series">Series</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The data structure containing the columns to be processed.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_detrend_col</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column from which values will be subtracted.</p>
            </div>
          </td>
          <td>
                <code>&#39;log_returns&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_detrend_value_col</code></td>
          <td>
                <code>str | <span title="polars.Series">Series</span> | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column whose values will be subtracted OR if you
pass a pl.Series to the <code>data</code> parameter, then you can use this to
pass a second <code>pl.Series</code> to subtract from the first.</p>
            </div>
          </td>
          <td>
                <code>&#39;window_mean&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_sort</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, sorts the data by 'symbol' and 'date' before detrending.
Default is False.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>Union[<span title="polars.DataFrame">DataFrame</span>, <span title="polars.LazyFrame">LazyFrame</span>, <span title="polars.Series">Series</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The detrended data structure with the same type as the input,
with an added column named <code>f"detrended_{_detrend_col}"</code>.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>Function doesn't use <code>.over()</code> in calculation. Once the data is sorted,
subtracting _detrend_value_col from _detrend_col is a simple operation
that doesn't need to be grouped, because the sorting has already aligned
the rows for subtraction</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/toolbox_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">detrend</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">_detrend_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log_returns&quot;</span><span class="p">,</span>
    <span class="n">_detrend_value_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;window_mean&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Helpers || **Command: detrend**.</span>

<span class="sd">    This is a DUMB command. It can be used in any CONTEXT or CATEGORY.</span>

<span class="sd">    Detrends a column in a DataFrame, LazyFrame, or Series by subtracting the</span>
<span class="sd">    values of another column from it. Optionally sorts the data by &#39;symbol&#39; and</span>
<span class="sd">    &#39;date&#39; before detrending if _sort is True.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : Union[pl.DataFrame, pl.LazyFrame, pl.Series]</span>
<span class="sd">        The data structure containing the columns to be processed.</span>
<span class="sd">    _detrend_col : str</span>
<span class="sd">        The name of the column from which values will be subtracted.</span>
<span class="sd">    _detrend_value_col : str | pl.Series | None, optional</span>
<span class="sd">        The name of the column whose values will be subtracted OR if you</span>
<span class="sd">        pass a pl.Series to the `data` parameter, then you can use this to</span>
<span class="sd">        pass a second `pl.Series` to subtract from the first.</span>
<span class="sd">    _sort : bool, optional</span>
<span class="sd">        If True, sorts the data by &#39;symbol&#39; and &#39;date&#39; before detrending.</span>
<span class="sd">        Default is False.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Union[pl.DataFrame, pl.LazyFrame, pl.Series]</span>
<span class="sd">        The detrended data structure with the same type as the input,</span>
<span class="sd">        with an added column named `f&quot;detrended_{_detrend_col}&quot;`.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Function doesn&#39;t use `.over()` in calculation. Once the data is sorted,</span>
<span class="sd">    subtracting _detrend_value_col from _detrend_col is a simple operation</span>
<span class="sd">    that doesn&#39;t need to be grouped, because the sorting has already aligned</span>
<span class="sd">    the rows for subtraction</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sort_cols</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Data must contain &#39;symbol&#39; and &#39;date&#39; columns for sorting.&quot;</span>
            <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">col_names</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">collect_schema</span><span class="p">()</span><span class="o">.</span><span class="n">names</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">_detrend_value_col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span> <span class="ow">or</span> <span class="n">_detrend_col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Both </span><span class="si">{</span><span class="n">_detrend_value_col</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">_detrend_col</span><span class="si">}</span><span class="s2"> must be columns in the data.&quot;</span>
            <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">detrended</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_detrend_col</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_detrend_value_col</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;detrended_</span><span class="si">{</span><span class="n">_detrend_col</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_detrend_value_col</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;When &#39;data&#39; is a Series, &#39;_detrend_value_col&#39; must also be a Series.&quot;</span>
            <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">detrended</span> <span class="o">=</span> <span class="n">data</span> <span class="o">-</span> <span class="n">_detrend_value_col</span>
        <span class="n">detrended</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;detrended_</span><span class="si">{</span><span class="n">_detrend_col</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">detrended</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h4 id="humbldata.toolbox.toolbox_helpers.cum_sum" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.toolbox_helpers.cum_sum</span>


<a href="#humbldata.toolbox.toolbox_helpers.cum_sum" class="headerlink" title="Permanent link">¤</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">cum_sum</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_column_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;detrended_returns&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_mandelbrot_usage</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Helpers || <strong>Command: cum_sum</strong>.</p>
<p>This is a DUMB command. It can be used in any CONTEXT or CATEGORY.</p>
<p>Calculate the cumulative sum of a series or column in a DataFrame or
LazyFrame.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.Series">Series</span> | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The data to process.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column to calculate the cumulative sum on,
applicable if df is provided.</p>
            </div>
          </td>
          <td>
                <code>&#39;detrended_returns&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_sort</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, sorts the DataFrame or LazyFrame by date and symbol before
calculation. Default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_mandelbrot_usage</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, performs additional checks specific to the Mandelbrot Channel
calculation. This should be set to True when you have a cumulative
deviate series, and False when not. Please check 'Notes' for more
information. Default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.Series">Series</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The DataFrame or Series with the cumulative deviate series added as a
new column or as itself.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>This function is used to calculate the cumulative sum for the deviate series
of detrended returns for the data in the pipeline for
<code>calc_mandelbrot_channel</code>.</p>
<p>So, although it is calculating a cumulative sum, it is known as a cumulative
deviate because it is a cumulative sum on a deviate series, meaning that the
cumulative sum should = 0 for each window. The _mandelbrot_usage parameter
allows for checks to ensure the data is suitable for Mandelbrot Channel
calculations, i.e that the deviate series was calculated correctly by the
end of each series being 0, meaning the trend (the mean over the
window_index) was successfully removed from the data.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/toolbox_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">cum_sum</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;detrended_returns&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_mandelbrot_usage</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Helpers || **Command: cum_sum**.</span>

<span class="sd">    This is a DUMB command. It can be used in any CONTEXT or CATEGORY.</span>

<span class="sd">    Calculate the cumulative sum of a series or column in a DataFrame or</span>
<span class="sd">    LazyFrame.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame | pl.Series | None</span>
<span class="sd">        The data to process.</span>
<span class="sd">    _column_name : str</span>
<span class="sd">        The name of the column to calculate the cumulative sum on,</span>
<span class="sd">        applicable if df is provided.</span>
<span class="sd">    _sort : bool, optional</span>
<span class="sd">        If True, sorts the DataFrame or LazyFrame by date and symbol before</span>
<span class="sd">        calculation. Default is True.</span>
<span class="sd">    _mandelbrot_usage : bool, optional</span>
<span class="sd">        If True, performs additional checks specific to the Mandelbrot Channel</span>
<span class="sd">        calculation. This should be set to True when you have a cumulative</span>
<span class="sd">        deviate series, and False when not. Please check &#39;Notes&#39; for more</span>
<span class="sd">        information. Default is True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame | pl.LazyFrame | pl.Series</span>
<span class="sd">        The DataFrame or Series with the cumulative deviate series added as a</span>
<span class="sd">        new column or as itself.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function is used to calculate the cumulative sum for the deviate series</span>
<span class="sd">    of detrended returns for the data in the pipeline for</span>
<span class="sd">    `calc_mandelbrot_channel`.</span>

<span class="sd">    So, although it is calculating a cumulative sum, it is known as a cumulative</span>
<span class="sd">    deviate because it is a cumulative sum on a deviate series, meaning that the</span>
<span class="sd">    cumulative sum should = 0 for each window. The _mandelbrot_usage parameter</span>
<span class="sd">    allows for checks to ensure the data is suitable for Mandelbrot Channel</span>
<span class="sd">    calculations, i.e that the deviate series was calculated correctly by the</span>
<span class="sd">    end of each series being 0, meaning the trend (the mean over the</span>
<span class="sd">    window_index) was successfully removed from the data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sort_cols</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>

        <span class="n">over_cols</span> <span class="o">=</span> <span class="n">_set_over_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;window_index&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">over_cols</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">cum_sum</span><span class="p">()</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="n">over_cols</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;cum_sum&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">cum_sum</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;cum_sum&quot;</span><span class="p">)</span>
            <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">cum_sum</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;cum_sum&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No DataFrame/LazyFrame/Series was provided.&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">_mandelbrot_usage</span><span class="p">:</span>
        <span class="n">_cumsum_check</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">_column_name</span><span class="o">=</span><span class="s2">&quot;cum_sum&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h4 id="humbldata.toolbox.toolbox_helpers.std" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.toolbox_helpers.std</span>


<a href="#humbldata.toolbox.toolbox_helpers.std" class="headerlink" title="Permanent link">¤</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">std</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">_column_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;cum_sum&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Helpers || <strong>Command: std</strong>.</p>
<p>Calculate the standard deviation of the cumulative deviate series within
each window of the dataset.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>df</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The LazyFrame from which to calculate the standard deviation.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column from which to calculate the standard deviation,
with "cumdev" as the default value.</p>
            </div>
          </td>
          <td>
                <code>&#39;cum_sum&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_sort</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, sorts the DataFrame or LazyFrame by date and symbol before
calculation. Default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A LazyFrame with the standard deviation of the specified column for each
window, added as a new column named "S".</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="improvements" open>
  <summary>Improvements</summary>
  <p>Just need to parametrize <code>.over()</code> call in the function if want an even
dumber function, that doesn't calculate each <code>window_index</code>.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/toolbox_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">std</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cum_sum&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Helpers || **Command: std**.</span>

<span class="sd">    Calculate the standard deviation of the cumulative deviate series within</span>
<span class="sd">    each window of the dataset.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    df : pl.LazyFrame</span>
<span class="sd">        The LazyFrame from which to calculate the standard deviation.</span>
<span class="sd">    _column_name : str, optional</span>
<span class="sd">        The name of the column from which to calculate the standard deviation,</span>
<span class="sd">        with &quot;cumdev&quot; as the default value.</span>
<span class="sd">    _sort : bool, optional</span>
<span class="sd">        If True, sorts the DataFrame or LazyFrame by date and symbol before</span>
<span class="sd">        calculation. Default is True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        A LazyFrame with the standard deviation of the specified column for each</span>
<span class="sd">        window, added as a new column named &quot;S&quot;.</span>

<span class="sd">    Improvements</span>
<span class="sd">    -----------</span>
<span class="sd">    Just need to parametrize `.over()` call in the function if want an even</span>
<span class="sd">    dumber function, that doesn&#39;t calculate each `window_index`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="n">over_cols</span> <span class="o">=</span> <span class="n">_set_over_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;window_index&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sort_cols</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">over_cols</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">std</span><span class="p">()</span>
                    <span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="n">over_cols</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_std&quot;</span><span class="p">),</span>  <span class="c1"># used to be &#39;S&#39;</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">),</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h4 id="humbldata.toolbox.toolbox_helpers.mean" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.toolbox_helpers.mean</span>


<a href="#humbldata.toolbox.toolbox_helpers.mean" class="headerlink" title="Permanent link">¤</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">mean</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">_column_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;log_returns&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Helpers || <strong>Function: mean</strong>.</p>
<p>This is a DUMB command. It can be used in any CONTEXT or CATEGORY.</p>
<p>This function calculates the mean of a column (&lt;_column_name&gt;) over a
each window in the dataset, if there are any.
This window is intended to be the <code>window</code> that is passed in the
<code>calc_mandelbrot_channel()</code> function. The mean calculated is meant to be
used as the mean of each <code>window</code> within the time series. This
way, each block of windows has their own mean, which can then be used to
normalize the data (i.e remove the mean) from each window section.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The DataFrame or LazyFrame to calculate the mean on.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column to calculate the mean on.</p>
            </div>
          </td>
          <td>
                <code>&#39;log_returns&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_sort</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, sorts the DataFrame or LazyFrame by date before calculation.
Default is False.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The original DataFrame or LazyFrame with a <code>window_mean</code> &amp; <code>date</code> column,
which contains the mean of 'log_returns' per range/window.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>Since this function is an aggregation function, it reduces the # of
observations in the dataset,thus, unless I take each value and iterate each
window_mean value to correlate to the row in the original dataframe, the
function will return a dataframe WITHOUT the original data.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/toolbox_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mean</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log_returns&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Helpers || **Function: mean**.</span>

<span class="sd">    This is a DUMB command. It can be used in any CONTEXT or CATEGORY.</span>

<span class="sd">    This function calculates the mean of a column (&lt;_column_name&gt;) over a</span>
<span class="sd">    each window in the dataset, if there are any.</span>
<span class="sd">    This window is intended to be the `window` that is passed in the</span>
<span class="sd">    `calc_mandelbrot_channel()` function. The mean calculated is meant to be</span>
<span class="sd">    used as the mean of each `window` within the time series. This</span>
<span class="sd">    way, each block of windows has their own mean, which can then be used to</span>
<span class="sd">    normalize the data (i.e remove the mean) from each window section.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The DataFrame or LazyFrame to calculate the mean on.</span>
<span class="sd">    _column_name : str</span>
<span class="sd">        The name of the column to calculate the mean on.</span>
<span class="sd">    _sort : bool</span>
<span class="sd">        If True, sorts the DataFrame or LazyFrame by date before calculation.</span>
<span class="sd">        Default is False.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The original DataFrame or LazyFrame with a `window_mean` &amp; `date` column,</span>
<span class="sd">        which contains the mean of &#39;log_returns&#39; per range/window.</span>


<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Since this function is an aggregation function, it reduces the # of</span>
<span class="sd">    observations in the dataset,thus, unless I take each value and iterate each</span>
<span class="sd">    window_mean value to correlate to the row in the original dataframe, the</span>
<span class="sd">    function will return a dataframe WITHOUT the original data.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No DataFrame was passed to the `mean()` function.&quot;</span>
            <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="n">over_cols</span> <span class="o">=</span> <span class="n">_set_over_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;window_index&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>  <span class="c1"># Check if _sort is True</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sort_cols</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">over_cols</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="n">over_cols</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;window_mean&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h4 id="humbldata.toolbox.toolbox_helpers.range_" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.toolbox_helpers.range_</span>


<a href="#humbldata.toolbox.toolbox_helpers.range_" class="headerlink" title="Permanent link">¤</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">range_</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">_column_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;cum_sum&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: MandelBrot Channel || Sub-Category: Helpers || <strong>Function: mandelbrot_range</strong>.</p>
<p>Calculate the range (max - min) of the cumulative deviate values of a
specified column in a DataFrame for each window in the dataset, if there are any.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The DataFrame to calculate the range from.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The column to calculate the range from, by default "cumdev".</p>
            </div>
          </td>
          <td>
                <code>&#39;cum_sum&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A DataFrame with the range of the specified column for each window.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/toolbox_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">range_</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cum_sum&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Sub-Category: MandelBrot Channel || Sub-Category: Helpers || **Function: mandelbrot_range**.</span>

<span class="sd">    Calculate the range (max - min) of the cumulative deviate values of a</span>
<span class="sd">    specified column in a DataFrame for each window in the dataset, if there are any.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.LazyFrame</span>
<span class="sd">        The DataFrame to calculate the range from.</span>
<span class="sd">    _column_name : str, optional</span>
<span class="sd">        The column to calculate the range from, by default &quot;cumdev&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame | pl.DataFrame</span>
<span class="sd">        A DataFrame with the range of the specified column for each window.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">data</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="n">over_cols</span> <span class="o">=</span> <span class="n">_set_over_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;window_index&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sort_cols</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">over_cols</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">min</span><span class="p">()</span>
                        <span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="n">over_cols</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_min&quot;</span><span class="p">),</span>
                        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">max</span><span class="p">()</span>
                        <span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="n">over_cols</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_max&quot;</span><span class="p">),</span>
                    <span class="p">]</span>
                <span class="p">)</span>
                <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
                <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                    <span class="p">(</span>
                        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_max&quot;</span><span class="p">)</span>
                        <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_min&quot;</span><span class="p">)</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_range&quot;</span><span class="p">),</span>  <span class="c1"># used to be &#39;R&#39;</span>
                <span class="p">)</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_min&quot;</span><span class="p">),</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_max&quot;</span><span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
            <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_max&quot;</span><span class="p">)</span>
                    <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_min&quot;</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_range&quot;</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h3 id="humbldata.toolbox.toolbox_controller" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.toolbox_controller</span>


<a href="#humbldata.toolbox.toolbox_controller" class="headerlink" title="Permanent link">¤</a></h3>

  <div class="doc doc-contents ">
  
      <p><strong>Context: Toolbox</strong>.</p>
<p>The Toolbox Controller Module.</p>

  

  <div class="doc doc-children">



















<div class="doc doc-object doc-class">



<h4 id="humbldata.toolbox.toolbox_controller.Toolbox" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.toolbox.toolbox_controller.Toolbox</span>


<a href="#humbldata.toolbox.toolbox_controller.Toolbox" class="headerlink" title="Permanent link">¤</a></h4>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams">ToolboxQueryParams</a></code></p>

  
      <p>A top-level <context> controller for data analysis tools in <code>humblDATA</code>.</p>
<p>This module serves as the primary controller, routing user-specified
ToolboxQueryParams as core arguments that are used to fetch time series
data.</p>
<p>The <code>Toolbox</code> controller also gives access to all sub-modules adn their
functions.</p>
<p>It is designed to facilitate the collection of data across various types such as
stocks, options, or alternative time series by requiring minimal input from the user.</p>

<details class="submodules" open>
  <summary>Submodules</summary>
  <p>The <code>Toolbox</code> controller is composed of the following submodules:</p>
<ul>
<li><code>technical</code>:</li>
<li><code>quantitative</code>:</li>
<li><code>fundamental</code>:</li>
</ul>
</details>


  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>symbol</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The symbol or ticker of the stock.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>interval</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The interval of the data. Defaults to '1d'.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>start_date</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The start date for the data query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>end_date</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The end date for the data query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>provider</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The provider to use for the data query. Defaults to 'yfinance'.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

<details class="parameter-notes" open>
  <summary>Parameter Notes</summary>
  <p>The parameters (<code>symbol</code>, <code>interval</code>, <code>start_date</code>, <code>end_date</code>)
are the <code>ToolboxQueryParams</code>. They are used for data collection further
down the pipeline in other commands. Intended to execute operations on core
data sets. This approach enables composable and standardized querying while
accommodating data-specific collection logic.</p>
</details>
            <details class="quote">
              <summary>Source code in <code>src/humbldata/toolbox/toolbox_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Toolbox</span><span class="p">(</span><span class="n">ToolboxQueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    A top-level &lt;context&gt; controller for data analysis tools in `humblDATA`.</span>

<span class="sd">    This module serves as the primary controller, routing user-specified</span>
<span class="sd">    ToolboxQueryParams as core arguments that are used to fetch time series</span>
<span class="sd">    data.</span>

<span class="sd">    The `Toolbox` controller also gives access to all sub-modules adn their</span>
<span class="sd">    functions.</span>

<span class="sd">    It is designed to facilitate the collection of data across various types such as</span>
<span class="sd">    stocks, options, or alternative time series by requiring minimal input from the user.</span>

<span class="sd">    Submodules</span>
<span class="sd">    ----------</span>
<span class="sd">    The `Toolbox` controller is composed of the following submodules:</span>

<span class="sd">    - `technical`:</span>
<span class="sd">    - `quantitative`:</span>
<span class="sd">    - `fundamental`:</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbol : str</span>
<span class="sd">        The symbol or ticker of the stock.</span>
<span class="sd">    interval : str, optional</span>
<span class="sd">        The interval of the data. Defaults to &#39;1d&#39;.</span>
<span class="sd">    start_date : str</span>
<span class="sd">        The start date for the data query.</span>
<span class="sd">    end_date : str</span>
<span class="sd">        The end date for the data query.</span>
<span class="sd">    provider : str, optional</span>
<span class="sd">        The provider to use for the data query. Defaults to &#39;yfinance&#39;.</span>

<span class="sd">    Parameter Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameters (`symbol`, `interval`, `start_date`, `end_date`)</span>
<span class="sd">    are the `ToolboxQueryParams`. They are used for data collection further</span>
<span class="sd">    down the pipeline in other commands. Intended to execute operations on core</span>
<span class="sd">    data sets. This approach enables composable and standardized querying while</span>
<span class="sd">    accommodating data-specific collection logic.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the Toolbox module.</span>

<span class="sd">        This method does not take any parameters and does not return anything.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">technical</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The technical submodule of the Toolbox controller.</span>

<span class="sd">        Access to all the technical indicators. WHen the Toolbox class is</span>
<span class="sd">        instatiated the parameters are initialized with the ToolboxQueryParams</span>
<span class="sd">        class, which hold all the fields needed for the context_params, like the</span>
<span class="sd">        symbol, interval, start_date, and end_date.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Technical</span><span class="p">(</span><span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fundamental</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The fundamental submodule of the Toolbox controller.</span>

<span class="sd">        Access to all the Fundamental indicators. When the Toolbox class is</span>
<span class="sd">        instantiated the parameters are initialized with the ToolboxQueryParams</span>
<span class="sd">        class, which hold all the fields needed for the context_params, like the</span>
<span class="sd">        symbol, interval, start_date, and end_date.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Fundamental</span><span class="p">(</span><span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h5 id="humbldata.toolbox.toolbox_controller.Toolbox.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.toolbox_controller.Toolbox.__init__</span>


<a href="#humbldata.toolbox.toolbox_controller.Toolbox.__init__" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="nf">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Initialize the Toolbox module.</p>
<p>This method does not take any parameters and does not return anything.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/toolbox_controller.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the Toolbox module.</span>

<span class="sd">    This method does not take any parameters and does not return anything.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="humbldata.toolbox.toolbox_controller.Toolbox.technical" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>          <span class="doc doc-object-name doc-attribute-name">humbldata.toolbox.toolbox_controller.Toolbox.technical</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#humbldata.toolbox.toolbox_controller.Toolbox.technical" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">technical</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>The technical submodule of the Toolbox controller.</p>
<p>Access to all the technical indicators. WHen the Toolbox class is
instatiated the parameters are initialized with the ToolboxQueryParams
class, which hold all the fields needed for the context_params, like the
symbol, interval, start_date, and end_date.</p>
  </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="humbldata.toolbox.toolbox_controller.Toolbox.fundamental" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>          <span class="doc doc-object-name doc-attribute-name">humbldata.toolbox.toolbox_controller.Toolbox.fundamental</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#humbldata.toolbox.toolbox_controller.Toolbox.fundamental" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">fundamental</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>The fundamental submodule of the Toolbox controller.</p>
<p>Access to all the Fundamental indicators. When the Toolbox class is
instantiated the parameters are initialized with the ToolboxQueryParams
class, which hold all the fields needed for the context_params, like the
symbol, interval, start_date, and end_date.</p>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h3 id="humbldata.toolbox.fundamental" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.fundamental</span>


<a href="#humbldata.toolbox.fundamental" class="headerlink" title="Permanent link">¤</a></h3>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || <strong>Category: Fundamental</strong>.</p>
<p>A category to group all of the fundamental indicators available in the
<code>Toolbox()</code>.</p>
<p>Fundamental indicators relies on earnings data, valuation models of companies,
balance sheet metrics etc...</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h4 id="humbldata.toolbox.fundamental.fundamental_controller" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.fundamental.fundamental_controller</span>


<a href="#humbldata.toolbox.fundamental.fundamental_controller" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || <strong>Category: Fundamental</strong>.</p>
<p>A controller to manage and compile all of the Fundamental models
available in the <code>toolbox</code> context. This will be passed as a
<code>@property</code> to the <code>toolbox()</code> class, giving access to the
Fundamental module and its functions.</p>

  

  <div class="doc doc-children">















<div class="doc doc-object doc-class">



<h5 id="humbldata.toolbox.fundamental.fundamental_controller.Fundamental" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.toolbox.fundamental.fundamental_controller.Fundamental</span>


<a href="#humbldata.toolbox.fundamental.fundamental_controller.Fundamental" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">

  
      <p>Module for all Fundamental analysis.</p>



  <p><span class="doc-section-title">Attributes:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.toolbox.fundamental.fundamental_controller.Fundamental.context_params">context_params</span></code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams">ToolboxQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The standard query parameters for toolbox data.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Methods:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.toolbox.fundamental.fundamental_controller.Fundamental.humbl_compass" href="../context/toolbox/#humbldata.toolbox.fundamental.fundamental_controller.Fundamental.humbl_compass">humbl_compass</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Execute the HumblCompass command.</p>
              </div>
            </td>
          </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/toolbox/fundamental/fundamental_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Fundamental</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Module for all Fundamental analysis.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    context_params : ToolboxQueryParams</span>
<span class="sd">        The standard query parameters for toolbox data.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    humbl_compass(command_params: HumblCompassQueryParams)</span>
<span class="sd">        Execute the HumblCompass command.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context_params</span><span class="p">:</span> <span class="n">ToolboxQueryParams</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span> <span class="o">=</span> <span class="n">context_params</span>

    <span class="k">def</span> <span class="nf">humbl_compass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute the HumblCompass command.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        country : str</span>
<span class="sd">            The country or group of countries to analyze</span>
<span class="sd">        recommendations : bool, optional</span>
<span class="sd">            Whether to include investment recommendations based on the HUMBL regime</span>
<span class="sd">        chart : bool, optional</span>
<span class="sd">            Whether to return a chart object</span>
<span class="sd">        template : str, optional</span>
<span class="sd">            The template/theme to use for the plotly figure</span>
<span class="sd">        z_score : str, optional</span>
<span class="sd">            The time window for z-score calculation</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        HumblObject</span>
<span class="sd">            The HumblObject containing the transformed data and metadata</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">humbldata.core.standard_models.toolbox.fundamental.humbl_compass</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">HumblCompassFetcher</span><span class="p">,</span>
            <span class="n">HumblCompassQueryParams</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Convert kwargs to HumblCompassQueryParams</span>
        <span class="n">command_params</span> <span class="o">=</span> <span class="n">HumblCompassQueryParams</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Instantiate the Fetcher with the query parameters</span>
        <span class="n">fetcher</span> <span class="o">=</span> <span class="n">HumblCompassFetcher</span><span class="p">(</span>
            <span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span> <span class="n">command_params</span><span class="o">=</span><span class="n">command_params</span>
        <span class="p">)</span>

        <span class="c1"># Use the fetcher to get the data</span>
        <span class="k">return</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.fundamental.fundamental_controller.Fundamental.humbl_compass" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.fundamental.fundamental_controller.Fundamental.humbl_compass</span>


<a href="#humbldata.toolbox.fundamental.fundamental_controller.Fundamental.humbl_compass" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">humbl_compass</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Execute the HumblCompass command.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>country</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The country or group of countries to analyze</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>recommendations</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to include investment recommendations based on the HUMBL regime</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>chart</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to return a chart object</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>template</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The template/theme to use for the plotly figure</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>z_score</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The time window for z-score calculation</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>HumblObject</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The HumblObject containing the transformed data and metadata</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/fundamental/fundamental_controller.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">humbl_compass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Execute the HumblCompass command.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    country : str</span>
<span class="sd">        The country or group of countries to analyze</span>
<span class="sd">    recommendations : bool, optional</span>
<span class="sd">        Whether to include investment recommendations based on the HUMBL regime</span>
<span class="sd">    chart : bool, optional</span>
<span class="sd">        Whether to return a chart object</span>
<span class="sd">    template : str, optional</span>
<span class="sd">        The template/theme to use for the plotly figure</span>
<span class="sd">    z_score : str, optional</span>
<span class="sd">        The time window for z-score calculation</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    HumblObject</span>
<span class="sd">        The HumblObject containing the transformed data and metadata</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">humbldata.core.standard_models.toolbox.fundamental.humbl_compass</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">HumblCompassFetcher</span><span class="p">,</span>
        <span class="n">HumblCompassQueryParams</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Convert kwargs to HumblCompassQueryParams</span>
    <span class="n">command_params</span> <span class="o">=</span> <span class="n">HumblCompassQueryParams</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># Instantiate the Fetcher with the query parameters</span>
    <span class="n">fetcher</span> <span class="o">=</span> <span class="n">HumblCompassFetcher</span><span class="p">(</span>
        <span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span> <span class="n">command_params</span><span class="o">=</span><span class="n">command_params</span>
    <span class="p">)</span>

    <span class="c1"># Use the fetcher to get the data</span>
    <span class="k">return</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="humbldata.toolbox.fundamental.humbl_compass" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.fundamental.humbl_compass</span>


<a href="#humbldata.toolbox.fundamental.humbl_compass" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h5 id="humbldata.toolbox.fundamental.humbl_compass.helpers" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.fundamental.humbl_compass.helpers</span>


<a href="#humbldata.toolbox.fundamental.humbl_compass.helpers" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p><strong>Context: Toolbox || Category: Fundamental || Command: humbl_compass</strong>.</p>
<p>The HumblCompass Helpers Module.</p>

  

  <div class="doc doc-children">





  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.toolbox.fundamental.humbl_compass.model" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.fundamental.humbl_compass.model</span>


<a href="#humbldata.toolbox.fundamental.humbl_compass.model" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p><strong>Context: Toolbox || Category: Fundamental || Command: humbl_compass</strong>.</p>
<p>The humbl_compass Command Module. This is typically
used in the <code>.transform_data()</code> method of the <code>HumblCompassFetcher</code> class.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.fundamental.humbl_compass.model.humbl_compass" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.fundamental.humbl_compass.model.humbl_compass</span>


<a href="#humbldata.toolbox.fundamental.humbl_compass.model.humbl_compass" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">humbl_compass</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Fundamental ||| <strong>Command: humbl_compass</strong>.</p>
<p>Execute the humbl_compass command.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>Returns</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/fundamental/humbl_compass/model.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">humbl_compass</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Fundamental ||| **Command: humbl_compass**.</span>

<span class="sd">    Execute the humbl_compass command.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.toolbox.fundamental.humbl_compass.view" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.fundamental.humbl_compass.view</span>


<a href="#humbldata.toolbox.fundamental.humbl_compass.view" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p><strong>Context: Toolbox || Category: Fundamental || Command: humbl_compass</strong>.</p>
<p>The HumblCompass View Module.</p>

  

  <div class="doc doc-children">
















<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.fundamental.humbl_compass.view.create_humbl_compass_plot" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.fundamental.humbl_compass.view.create_humbl_compass_plot</span>


<a href="#humbldata.toolbox.fundamental.humbl_compass.view.create_humbl_compass_plot" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_humbl_compass_plot</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="plotly.graph_objs.Figure">Figure</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Generate a HumblCompass plot from the provided data.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dataframe containing the data to be plotted.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>template</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The template to be used for styling the plot.</p>
            </div>
          </td>
          <td>
                <code><span title="humbldata.core.standard_models.abstract.chart.ChartTemplate.plotly">plotly</span></code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="plotly.graph_objs.Figure">Figure</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A plotly figure object representing the HumblCompass plot.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/fundamental/humbl_compass/view.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_humbl_compass_plot</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="n">ChartTemplate</span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a HumblCompass plot from the provided data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame</span>
<span class="sd">        The dataframe containing the data to be plotted.</span>
<span class="sd">    template : ChartTemplate</span>
<span class="sd">        The template to be used for styling the plot.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    go.Figure</span>
<span class="sd">        A plotly figure object representing the HumblCompass plot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Sort data by date and create a color scale</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;date_month_start&quot;</span><span class="p">)</span>
    <span class="n">full_color_scale</span> <span class="o">=</span> <span class="n">sequential</span><span class="o">.</span><span class="n">Reds</span>
    <span class="n">custom_colorscale</span> <span class="o">=</span> <span class="n">sample_colorscale</span><span class="p">(</span><span class="n">full_color_scale</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">])</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>

    <span class="c1"># Calculate the range for x and y axes based on data</span>
    <span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;cpi_3m_delta&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;cpi_3m_delta&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
    <span class="n">y_min</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;cli_3m_delta&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;cli_3m_delta&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

    <span class="c1"># Ensure minimum range of -0.3 to 0.3 on both axes</span>
    <span class="n">x_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x_min</span> <span class="k">if</span> <span class="n">x_min</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">x_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">x_max</span> <span class="k">if</span> <span class="n">x_max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
    <span class="n">y_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_min</span> <span class="k">if</span> <span class="n">y_min</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">y_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">y_max</span> <span class="k">if</span> <span class="n">y_max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>

    <span class="c1"># Add some padding to the ranges (e.g., 10% on each side)</span>
    <span class="n">x_padding</span> <span class="o">=</span> <span class="nb">max</span><span class="p">((</span><span class="n">x_max</span> <span class="o">-</span> <span class="n">x_min</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span>  <span class="c1"># Ensure minimum padding</span>
    <span class="n">y_padding</span> <span class="o">=</span> <span class="nb">max</span><span class="p">((</span><span class="n">y_max</span> <span class="o">-</span> <span class="n">y_min</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span>  <span class="c1"># Ensure minimum padding</span>

    <span class="c1"># Calculate tick values (e.g., every 0.1)</span>
    <span class="n">x_ticks</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nb">round</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x_min</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">x_max</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="n">y_ticks</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nb">round</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">y_min</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">y_max</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">]</span>

    <span class="c1"># Add colored quadrants from -10 to 10</span>
    <span class="n">quadrants</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
            <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
            <span class="s2">&quot;fillcolor&quot;</span><span class="p">:</span> <span class="s2">&quot;rgba(173, 216, 230, 0.3)&quot;</span><span class="p">,</span>
        <span class="p">},</span>  <span class="c1"># Light blue</span>
        <span class="p">{</span>
            <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
            <span class="s2">&quot;fillcolor&quot;</span><span class="p">:</span> <span class="s2">&quot;rgba(144, 238, 144, 0.3)&quot;</span><span class="p">,</span>
        <span class="p">},</span>  <span class="c1"># Green</span>
        <span class="p">{</span>
            <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
            <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s2">&quot;fillcolor&quot;</span><span class="p">:</span> <span class="s2">&quot;rgba(255, 165, 0, 0.3)&quot;</span><span class="p">,</span>
        <span class="p">},</span>  <span class="c1"># Orange</span>
        <span class="p">{</span>
            <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="s2">&quot;fillcolor&quot;</span><span class="p">:</span> <span class="s2">&quot;rgba(255, 99, 71, 0.3)&quot;</span><span class="p">,</span>
        <span class="p">},</span>  <span class="c1"># Red</span>
    <span class="p">]</span>

    <span class="k">for</span> <span class="n">quadrant</span> <span class="ow">in</span> <span class="n">quadrants</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">add_shape</span><span class="p">(</span>
            <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;rect&quot;</span><span class="p">,</span>
            <span class="n">x0</span><span class="o">=</span><span class="n">quadrant</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">y0</span><span class="o">=</span><span class="n">quadrant</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">x1</span><span class="o">=</span><span class="n">quadrant</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">y1</span><span class="o">=</span><span class="n">quadrant</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">fillcolor</span><span class="o">=</span><span class="n">quadrant</span><span class="p">[</span><span class="s2">&quot;fillcolor&quot;</span><span class="p">],</span>
            <span class="n">line_color</span><span class="o">=</span><span class="s2">&quot;rgba(0,0,0,0)&quot;</span><span class="p">,</span>
            <span class="n">layer</span><span class="o">=</span><span class="s2">&quot;below&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Create a color array based on the date order</span>
    <span class="n">color_array</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
        <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;cpi_3m_delta&quot;</span><span class="p">],</span>
            <span class="n">y</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;cli_3m_delta&quot;</span><span class="p">],</span>
            <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;lines+markers+text&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;HumblCompass Data&quot;</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="p">[</span>
                <span class="n">d</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%b %Y&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
                <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;date_month_start&quot;</span><span class="p">]</span>
            <span class="p">],</span>
            <span class="n">textposition</span><span class="o">=</span><span class="s2">&quot;top center&quot;</span><span class="p">,</span>
            <span class="n">textfont</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;white&quot;</span><span class="p">},</span>
            <span class="n">marker</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">color_array</span><span class="p">,</span>
                <span class="s2">&quot;colorscale&quot;</span><span class="p">:</span> <span class="n">custom_colorscale</span><span class="p">,</span>
                <span class="s2">&quot;showscale&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">line</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
                <span class="s2">&quot;shape&quot;</span><span class="p">:</span> <span class="s2">&quot;spline&quot;</span><span class="p">,</span>
                <span class="s2">&quot;smoothing&quot;</span><span class="p">:</span> <span class="mf">1.3</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">hovertemplate</span><span class="o">=</span><span class="s2">&quot;&lt;b&gt;%</span><span class="si">{text}</span><span class="s2">&lt;/b&gt;&lt;br&gt;CPI 3m Δ: %</span><span class="si">{x:.2f}</span><span class="s2">&lt;br&gt;CLI 3m Δ: %</span><span class="si">{y:.2f}</span><span class="s2">&lt;extra&gt;&lt;/extra&gt;&quot;</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Add axis lines with tick marks</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">add_shape</span><span class="p">(</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;line&quot;</span><span class="p">,</span>
        <span class="n">x0</span><span class="o">=</span><span class="n">x_min</span> <span class="o">-</span> <span class="n">x_padding</span><span class="p">,</span>
        <span class="n">y0</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">x1</span><span class="o">=</span><span class="n">x_max</span> <span class="o">+</span> <span class="n">x_padding</span><span class="p">,</span>
        <span class="n">y1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">add_shape</span><span class="p">(</span>
        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;line&quot;</span><span class="p">,</span>
        <span class="n">x0</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">y0</span><span class="o">=</span><span class="n">y_min</span> <span class="o">-</span> <span class="n">y_padding</span><span class="p">,</span>
        <span class="n">x1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">y1</span><span class="o">=</span><span class="n">y_max</span> <span class="o">+</span> <span class="n">y_padding</span><span class="p">,</span>
        <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># Add tick marks and labels to the x-axis</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x_ticks</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># Skip the center point</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">add_shape</span><span class="p">(</span>
                <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;line&quot;</span><span class="p">,</span>
                <span class="n">x0</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                <span class="n">y0</span><span class="o">=-</span><span class="mf">0.005</span><span class="p">,</span>
                <span class="n">x1</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                <span class="n">y1</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span>
                <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">add_annotation</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">showarrow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">yshift</span><span class="o">=-</span><span class="mi">15</span><span class="p">,</span>
                <span class="n">font</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">),</span>
            <span class="p">)</span>

    <span class="c1"># Add tick marks and labels to the y-axis</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">y_ticks</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">y</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># Skip the center point</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">add_shape</span><span class="p">(</span>
                <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;line&quot;</span><span class="p">,</span>
                <span class="n">x0</span><span class="o">=-</span><span class="mf">0.005</span><span class="p">,</span>
                <span class="n">y0</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                <span class="n">x1</span><span class="o">=</span><span class="mf">0.005</span><span class="p">,</span>
                <span class="n">y1</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">add_annotation</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">y</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">showarrow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">xshift</span><span class="o">=-</span><span class="mi">15</span><span class="p">,</span>
                <span class="n">font</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">),</span>
            <span class="p">)</span>

    <span class="c1"># Calculate the center of each visible quadrant</span>
    <span class="n">x_center_pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_max</span> <span class="o">+</span> <span class="n">x_padding</span> <span class="o">+</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="n">x_center_neg</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_min</span> <span class="o">-</span> <span class="n">x_padding</span> <span class="o">+</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="n">y_center_pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_max</span> <span class="o">+</span> <span class="n">y_padding</span> <span class="o">+</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="n">y_center_neg</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_min</span> <span class="o">-</span> <span class="n">y_padding</span> <span class="o">+</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="c1"># Add quadrant labels</span>
    <span class="n">quadrant_labels</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;humblBOOM&quot;</span><span class="p">,</span>
            <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">x_center_neg</span><span class="p">,</span>
            <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">y_center_pos</span><span class="p">,</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;rgba(144, 238, 144, 0.5)&quot;</span><span class="p">,</span>  <span class="c1"># Changed opacity to 0.5</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;humblBOUNCE&quot;</span><span class="p">,</span>
            <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">x_center_pos</span><span class="p">,</span>
            <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">y_center_pos</span><span class="p">,</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;rgba(173, 216, 230, 0.5)&quot;</span><span class="p">,</span>  <span class="c1"># Changed opacity to 0.5</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;humblBLOAT&quot;</span><span class="p">,</span>
            <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">x_center_pos</span><span class="p">,</span>
            <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">y_center_neg</span><span class="p">,</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;rgba(255, 165, 0, 0.5)&quot;</span><span class="p">,</span>  <span class="c1"># Changed opacity to 0.5</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;humblBUST&quot;</span><span class="p">,</span>
            <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">x_center_neg</span><span class="p">,</span>
            <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">y_center_neg</span><span class="p">,</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;rgba(255, 99, 71, 0.5)&quot;</span><span class="p">,</span>  <span class="c1"># Changed opacity to 0.5</span>
        <span class="p">},</span>
    <span class="p">]</span>

    <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">quadrant_labels</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">add_annotation</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">label</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span>
            <span class="n">y</span><span class="o">=</span><span class="n">label</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">],</span>
            <span class="n">text</span><span class="o">=</span><span class="n">label</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">],</span>
            <span class="n">showarrow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">font</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">label</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]},</span>
            <span class="n">opacity</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>  <span class="c1"># Changed opacity to 0.5</span>
        <span class="p">)</span>

    <span class="c1"># Add custom watermark</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">add_annotation</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">text</span><span class="o">=</span><span class="s2">&quot;humblDATA&quot;</span><span class="p">,</span>
        <span class="n">showarrow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">font</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;rgba(255, 255, 255, 0.1)&quot;</span><span class="p">},</span>
        <span class="n">textangle</span><span class="o">=-</span><span class="mi">25</span><span class="p">,</span>
        <span class="n">xanchor</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
        <span class="n">yanchor</span><span class="o">=</span><span class="s2">&quot;middle&quot;</span><span class="p">,</span>
        <span class="n">xref</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span>
        <span class="n">yref</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Create a copy of the template without the watermark</span>
    <span class="n">custom_template</span> <span class="o">=</span> <span class="n">pio</span><span class="o">.</span><span class="n">templates</span><span class="p">[</span><span class="n">template</span><span class="o">.</span><span class="n">value</span><span class="p">]</span><span class="o">.</span><span class="n">to_plotly_json</span><span class="p">()</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="s2">&quot;layout&quot;</span> <span class="ow">in</span> <span class="n">custom_template</span>
        <span class="ow">and</span> <span class="s2">&quot;annotations&quot;</span> <span class="ow">in</span> <span class="n">custom_template</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span>
    <span class="p">):</span>
        <span class="n">custom_template</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;annotations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ann</span>
            <span class="k">for</span> <span class="n">ann</span> <span class="ow">in</span> <span class="n">custom_template</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">][</span><span class="s2">&quot;annotations&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">ann</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;draft watermark&quot;</span>
        <span class="p">]</span>

    <span class="c1"># Update layout</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;humblCOMPASS: CLI 3m Delta vs CPI 3m Delta&quot;</span><span class="p">,</span>
        <span class="n">title_font_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">xaxis_title</span><span class="o">=</span><span class="s2">&quot;Inflation (CPI) 3-Month Delta&quot;</span><span class="p">,</span>
        <span class="n">yaxis_title</span><span class="o">=</span><span class="s2">&quot;Growth (CLI) 3-Month Delta&quot;</span><span class="p">,</span>
        <span class="n">xaxis</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
            <span class="s2">&quot;showgrid&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;zeroline&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;range&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">x_min</span> <span class="o">-</span> <span class="n">x_padding</span><span class="p">,</span> <span class="n">x_max</span> <span class="o">+</span> <span class="n">x_padding</span><span class="p">],</span>
            <span class="s2">&quot;showticklabels&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>  <span class="c1"># Hide default tick labels</span>
            <span class="s2">&quot;ticks&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>  <span class="c1"># Hide default ticks</span>
        <span class="p">},</span>
        <span class="n">yaxis</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
            <span class="s2">&quot;showgrid&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;zeroline&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;range&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">y_min</span> <span class="o">-</span> <span class="n">y_padding</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">+</span> <span class="n">y_padding</span><span class="p">],</span>
            <span class="s2">&quot;showticklabels&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>  <span class="c1"># Hide default tick labels</span>
            <span class="s2">&quot;ticks&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>  <span class="c1"># Hide default ticks</span>
        <span class="p">},</span>
        <span class="n">template</span><span class="o">=</span><span class="n">custom_template</span><span class="p">,</span>  <span class="c1"># Use the custom template without watermark</span>
        <span class="n">hovermode</span><span class="o">=</span><span class="s2">&quot;closest&quot;</span><span class="p">,</span>
        <span class="n">plot_bgcolor</span><span class="o">=</span><span class="s2">&quot;rgba(0,0,0,0)&quot;</span><span class="p">,</span>
        <span class="n">paper_bgcolor</span><span class="o">=</span><span class="s2">&quot;rgba(0,0,0,0)&quot;</span><span class="p">,</span>
        <span class="n">font</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;white&quot;</span><span class="p">},</span>
        <span class="n">margin</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">},</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.fundamental.humbl_compass.view.generate_plots" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.fundamental.humbl_compass.view.generate_plots</span>


<a href="#humbldata.toolbox.fundamental.humbl_compass.view.generate_plots" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate_plots</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.Chart" href="../core/#humbldata.core.standard_models.abstract.chart.Chart">Chart</a></span><span class="p">]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Fundamental || Command: humbl_compass || <strong>Function: generate_plots()</strong>.</p>
<p>Generate plots from the given dataframe.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The LazyFrame containing the data to be plotted.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>template</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The template/theme to use for the plotly figure.</p>
            </div>
          </td>
          <td>
                <code><span title="humbldata.core.standard_models.abstract.chart.ChartTemplate.plotly">plotly</span></code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.Chart" href="../core/#humbldata.core.standard_models.abstract.chart.Chart">Chart</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of Chart objects, each representing a plot.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/fundamental/humbl_compass/view.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_plots</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="n">ChartTemplate</span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Chart</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Fundamental || Command: humbl_compass || **Function: generate_plots()**.</span>

<span class="sd">    Generate plots from the given dataframe.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.LazyFrame</span>
<span class="sd">        The LazyFrame containing the data to be plotted.</span>
<span class="sd">    template : ChartTemplate</span>
<span class="sd">        The template/theme to use for the plotly figure.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    List[Chart]</span>
<span class="sd">        A list of Chart objects, each representing a plot.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">collected_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    <span class="n">plot</span> <span class="o">=</span> <span class="n">create_humbl_compass_plot</span><span class="p">(</span><span class="n">collected_data</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">Chart</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">plot</span><span class="o">.</span><span class="n">to_json</span><span class="p">(),</span> <span class="n">fig</span><span class="o">=</span><span class="n">plot</span><span class="p">)]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h3 id="humbldata.toolbox.technical" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.technical</span>


<a href="#humbldata.toolbox.technical" class="headerlink" title="Permanent link">¤</a></h3>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h4 id="humbldata.toolbox.technical.technical_controller" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.technical.technical_controller</span>


<a href="#humbldata.toolbox.technical.technical_controller" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || <strong>Category: Technical</strong>.</p>
<p>A controller to manage and compile all of the technical indicator models
available. This will be passed as a <code>@property</code> to the <code>Toolbox()</code> class, giving
access to the technical module and its functions.</p>

  

  <div class="doc doc-children">















<div class="doc doc-object doc-class">



<h5 id="humbldata.toolbox.technical.technical_controller.Technical" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.toolbox.technical.technical_controller.Technical</span>


<a href="#humbldata.toolbox.technical.technical_controller.Technical" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">

  
      <p>Module for all technical analysis.</p>



  <p><span class="doc-section-title">Attributes:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.toolbox.technical.technical_controller.Technical.context_params">context_params</span></code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams">ToolboxQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The standard query parameters for toolbox data.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Methods:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.toolbox.technical.technical_controller.Technical.mandelbrot_channel" href="../context/toolbox/#humbldata.toolbox.technical.technical_controller.Technical.mandelbrot_channel">mandelbrot_channel</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Calculate the rescaled range statistics.</p>
              </div>
            </td>
          </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/toolbox/technical/technical_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Technical</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Module for all technical analysis.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    context_params : ToolboxQueryParams</span>
<span class="sd">        The standard query parameters for toolbox data.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    mandelbrot_channel(command_params: MandelbrotChannelQueryParams)</span>
<span class="sd">        Calculate the rescaled range statistics.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context_params</span><span class="p">:</span> <span class="n">ToolboxQueryParams</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span> <span class="o">=</span> <span class="n">context_params</span>

    <span class="k">def</span> <span class="nf">mandelbrot_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">MandelbrotChannelQueryParams</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the Mandelbrot Channel.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        window : str, optional</span>
<span class="sd">            The width of the window used for splitting the data into sections for</span>
<span class="sd">            detrending. Defaults to &quot;1mo&quot;.</span>
<span class="sd">        rv_adjustment : bool, optional</span>
<span class="sd">            Whether to adjust the calculation for realized volatility. If True, the</span>
<span class="sd">            data is filtered to only include observations in the same volatility bucket</span>
<span class="sd">            that the stock is currently in. Defaults to True.</span>
<span class="sd">        rv_method : str, optional</span>
<span class="sd">            The method to calculate the realized volatility. Only need to define</span>
<span class="sd">            when rv_adjustment is True. Defaults to &quot;std&quot;.</span>
<span class="sd">        rs_method : Literal[&quot;RS&quot;, &quot;RS_min&quot;, &quot;RS_max&quot;, &quot;RS_mean&quot;], optional</span>
<span class="sd">            The method to use for Range/STD calculation. This is either min, max</span>
<span class="sd">            or mean of all RS ranges per window. If not defined, just used the</span>
<span class="sd">            most recent RS window. Defaults to &quot;RS&quot;.</span>
<span class="sd">        rv_grouped_mean : bool, optional</span>
<span class="sd">            Whether to calculate the mean value of realized volatility over</span>
<span class="sd">            multiple window lengths. Defaults to False.</span>
<span class="sd">        live_price : bool, optional</span>
<span class="sd">            Whether to calculate the ranges using the current live price, or the</span>
<span class="sd">            most recent &#39;close&#39; observation. Defaults to False.</span>
<span class="sd">        historical : bool, optional</span>
<span class="sd">            Whether to calculate the Historical Mandelbrot Channel (over-time), and</span>
<span class="sd">            return a time-series of channels from the start to the end date. If</span>
<span class="sd">            False, the Mandelbrot Channel calculation is done aggregating all of the</span>
<span class="sd">            data into one observation. If True, then it will enable daily</span>
<span class="sd">            observations over-time. Defaults to False.</span>
<span class="sd">        chart : bool, optional</span>
<span class="sd">            Whether to return a chart object. Defaults to False.</span>
<span class="sd">        template : str, optional</span>
<span class="sd">            The template/theme to use for the plotly figure. Defaults to &quot;humbl_dark&quot;.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        HumblObject</span>
<span class="sd">            An object containing the Mandelbrot Channel data and metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">humbldata.core.standard_models.toolbox.technical.mandelbrot_channel</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">MandelbrotChannelFetcher</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Instantiate the Fetcher with the query parameters</span>
        <span class="n">fetcher</span> <span class="o">=</span> <span class="n">MandelbrotChannelFetcher</span><span class="p">(</span>
            <span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span> <span class="n">command_params</span><span class="o">=</span><span class="n">kwargs</span>
        <span class="p">)</span>

        <span class="c1"># Use the fetcher to get the data</span>
        <span class="k">return</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.technical_controller.Technical.mandelbrot_channel" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.technical_controller.Technical.mandelbrot_channel</span>


<a href="#humbldata.toolbox.technical.technical_controller.Technical.mandelbrot_channel" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">mandelbrot_channel</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams" href="../core/#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams">MandelbrotChannelQueryParams</a></span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Calculate the Mandelbrot Channel.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The width of the window used for splitting the data into sections for
detrending. Defaults to "1mo".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>rv_adjustment</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to adjust the calculation for realized volatility. If True, the
data is filtered to only include observations in the same volatility bucket
that the stock is currently in. Defaults to True.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>rv_method</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The method to calculate the realized volatility. Only need to define
when rv_adjustment is True. Defaults to "std".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>rs_method</code></td>
          <td>
                <code>Literal[RS, RS_min, RS_max, RS_mean]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The method to use for Range/STD calculation. This is either min, max
or mean of all RS ranges per window. If not defined, just used the
most recent RS window. Defaults to "RS".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>rv_grouped_mean</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to calculate the mean value of realized volatility over
multiple window lengths. Defaults to False.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>live_price</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to calculate the ranges using the current live price, or the
most recent 'close' observation. Defaults to False.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>historical</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to calculate the Historical Mandelbrot Channel (over-time), and
return a time-series of channels from the start to the end date. If
False, the Mandelbrot Channel calculation is done aggregating all of the
data into one observation. If True, then it will enable daily
observations over-time. Defaults to False.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>chart</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to return a chart object. Defaults to False.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>template</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The template/theme to use for the plotly figure. Defaults to "humbl_dark".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>HumblObject</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An object containing the Mandelbrot Channel data and metadata.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/technical_controller.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mandelbrot_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">MandelbrotChannelQueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the Mandelbrot Channel.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    window : str, optional</span>
<span class="sd">        The width of the window used for splitting the data into sections for</span>
<span class="sd">        detrending. Defaults to &quot;1mo&quot;.</span>
<span class="sd">    rv_adjustment : bool, optional</span>
<span class="sd">        Whether to adjust the calculation for realized volatility. If True, the</span>
<span class="sd">        data is filtered to only include observations in the same volatility bucket</span>
<span class="sd">        that the stock is currently in. Defaults to True.</span>
<span class="sd">    rv_method : str, optional</span>
<span class="sd">        The method to calculate the realized volatility. Only need to define</span>
<span class="sd">        when rv_adjustment is True. Defaults to &quot;std&quot;.</span>
<span class="sd">    rs_method : Literal[&quot;RS&quot;, &quot;RS_min&quot;, &quot;RS_max&quot;, &quot;RS_mean&quot;], optional</span>
<span class="sd">        The method to use for Range/STD calculation. This is either min, max</span>
<span class="sd">        or mean of all RS ranges per window. If not defined, just used the</span>
<span class="sd">        most recent RS window. Defaults to &quot;RS&quot;.</span>
<span class="sd">    rv_grouped_mean : bool, optional</span>
<span class="sd">        Whether to calculate the mean value of realized volatility over</span>
<span class="sd">        multiple window lengths. Defaults to False.</span>
<span class="sd">    live_price : bool, optional</span>
<span class="sd">        Whether to calculate the ranges using the current live price, or the</span>
<span class="sd">        most recent &#39;close&#39; observation. Defaults to False.</span>
<span class="sd">    historical : bool, optional</span>
<span class="sd">        Whether to calculate the Historical Mandelbrot Channel (over-time), and</span>
<span class="sd">        return a time-series of channels from the start to the end date. If</span>
<span class="sd">        False, the Mandelbrot Channel calculation is done aggregating all of the</span>
<span class="sd">        data into one observation. If True, then it will enable daily</span>
<span class="sd">        observations over-time. Defaults to False.</span>
<span class="sd">    chart : bool, optional</span>
<span class="sd">        Whether to return a chart object. Defaults to False.</span>
<span class="sd">    template : str, optional</span>
<span class="sd">        The template/theme to use for the plotly figure. Defaults to &quot;humbl_dark&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    HumblObject</span>
<span class="sd">        An object containing the Mandelbrot Channel data and metadata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">humbldata.core.standard_models.toolbox.technical.mandelbrot_channel</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">MandelbrotChannelFetcher</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Instantiate the Fetcher with the query parameters</span>
    <span class="n">fetcher</span> <span class="o">=</span> <span class="n">MandelbrotChannelFetcher</span><span class="p">(</span>
        <span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span> <span class="n">command_params</span><span class="o">=</span><span class="n">kwargs</span>
    <span class="p">)</span>

    <span class="c1"># Use the fetcher to get the data</span>
    <span class="k">return</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="humbldata.toolbox.technical.mandelbrot_channel" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.technical.mandelbrot_channel</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h5 id="humbldata.toolbox.technical.mandelbrot_channel.helpers" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.technical.mandelbrot_channel.helpers</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: MandelBrot Channel || <strong>Sub-Category: Helpers</strong>.</p>
<p>These <code>Toolbox()</code> helpers are used in various calculations in the toolbox
context. Most of the helpers will be mathematical transformations of data. These
functions should be <strong>DUMB</strong> functions.</p>

  

  <div class="doc doc-children">












<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.helpers.add_window_index" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.helpers.add_window_index</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.add_window_index" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_window_index</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <pre><code>Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: **add_window_index**.
</code></pre>
<p>Add a column to the dataframe indicating the window grouping for each row in
a time series.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data frame or lazy frame to which the window index will be
added.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The window size as a string, used to determine the grouping of rows into
windows.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The original data frame or lazy frame with an additional column named
"window_index" indicating
the window grouping for each row.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <ul>
<li>This function is essential for calculating the Mandelbrot Channel, where
the dataset is split into
numerous 'windows', and statistics are calculated for each window.</li>
<li>The function adds a dummy <code>symbol</code> column if the data contains only one
symbol, to avoid errors in the <code>group_by_dynamic()</code> function.</li>
<li>It is utilized within the <code>log_mean()</code> and <code>calc_mandelbrot_channel()</code>
functions for window-based calculations.</li>
</ul>
</details>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;2021-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2021-01-02&quot;</span><span class="p">],</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span> <span class="s2">&quot;AAPL&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">window</span> <span class="o">=</span> <span class="s2">&quot;1d&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_window_index</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">window</span><span class="p">)</span>
<span class="go">shape: (2, 4)</span>
<span class="go">┌────────────┬────────┬───────┬──────────────┐</span>
<span class="go">│ date       ┆ symbol ┆ value ┆ window_index │</span>
<span class="go">│ ---        ┆ ---    ┆ ---   ┆ ---          │</span>
<span class="go">│ date       ┆ str    ┆ i64   ┆ i64          │</span>
<span class="go">╞════════════╪════════╪═══════╪══════════════╡</span>
<span class="go">│ 2021-01-01 ┆ AAPL   ┆ 1     ┆ 0            │</span>
<span class="go">├────────────┼────────┼───────┼──────────────┤</span>
<span class="go">│ 2021-01-02 ┆ AAPL   ┆ 2     ┆ 1            │</span>
<span class="go">└────────────┴────────┴───────┴──────────────┘</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_window_index</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: **add_window_index**.</span>

<span class="sd">    Add a column to the dataframe indicating the window grouping for each row in</span>
<span class="sd">    a time series.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.LazyFrame | pl.DataFrame</span>
<span class="sd">        The input data frame or lazy frame to which the window index will be</span>
<span class="sd">        added.</span>
<span class="sd">    window : str</span>
<span class="sd">        The window size as a string, used to determine the grouping of rows into</span>
<span class="sd">        windows.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame | pl.DataFrame</span>
<span class="sd">        The original data frame or lazy frame with an additional column named</span>
<span class="sd">        &quot;window_index&quot; indicating</span>
<span class="sd">        the window grouping for each row.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    - This function is essential for calculating the Mandelbrot Channel, where</span>
<span class="sd">    the dataset is split into</span>
<span class="sd">    numerous &#39;windows&#39;, and statistics are calculated for each window.</span>
<span class="sd">    - The function adds a dummy `symbol` column if the data contains only one</span>
<span class="sd">    symbol, to avoid errors in the `group_by_dynamic()` function.</span>
<span class="sd">    - It is utilized within the `log_mean()` and `calc_mandelbrot_channel()`</span>
<span class="sd">    functions for window-based calculations.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; data = pl.DataFrame({&quot;date&quot;: [&quot;2021-01-01&quot;, &quot;2021-01-02&quot;], &quot;symbol&quot;: [&quot;AAPL&quot;, &quot;AAPL&quot;], &quot;value&quot;: [1, 2]})</span>
<span class="sd">    &gt;&gt;&gt; window = &quot;1d&quot;</span>
<span class="sd">    &gt;&gt;&gt; add_window_index(data, window)</span>
<span class="sd">    shape: (2, 4)</span>
<span class="sd">    ┌────────────┬────────┬───────┬──────────────┐</span>
<span class="sd">    │ date       ┆ symbol ┆ value ┆ window_index │</span>
<span class="sd">    │ ---        ┆ ---    ┆ ---   ┆ ---          │</span>
<span class="sd">    │ date       ┆ str    ┆ i64   ┆ i64          │</span>
<span class="sd">    ╞════════════╪════════╪═══════╪══════════════╡</span>
<span class="sd">    │ 2021-01-01 ┆ AAPL   ┆ 1     ┆ 0            │</span>
<span class="sd">    ├────────────┼────────┼───────┼──────────────┤</span>
<span class="sd">    │ 2021-01-02 ┆ AAPL   ┆ 2     ┆ 1            │</span>
<span class="sd">    └────────────┴────────┴───────┴──────────────┘</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_create_monthly_window_index</span><span class="p">(</span><span class="n">col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">year_diff</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">()</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">()</span>
        <span class="n">month_diff</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">()</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">()</span>
        <span class="n">day_indicator</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">day</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">day</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">12</span> <span class="o">*</span> <span class="n">year_diff</span> <span class="o">+</span> <span class="n">month_diff</span> <span class="o">-</span> <span class="n">day_indicator</span><span class="p">)</span> <span class="o">//</span> <span class="n">k</span>

    <span class="c1"># Clean the window into standardized strings (i.e &quot;1month&quot;/&quot;1 month&quot; = &quot;1mo&quot;)</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># returns `str`</span>

    <span class="k">if</span> <span class="s2">&quot;w&quot;</span> <span class="ow">in</span> <span class="n">window</span> <span class="ow">or</span> <span class="s2">&quot;d&quot;</span> <span class="ow">in</span> <span class="n">window</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;The window cannot include &#39;d&#39; or &#39;w&#39;, the window needs to be larger than 1 month!&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">window_monthly</span> <span class="o">=</span> <span class="n">_window_format_monthly</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="n">_create_monthly_window_index</span><span class="p">(</span><span class="n">col</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">window_monthly</span><span class="p">)</span>
        <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;window_index&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_buckets" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_buckets</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_buckets" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">vol_buckets</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">lo_quantile</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span> <span class="n">hi_quantile</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span> <span class="n">_column_name_volatility</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;realized_volatility&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_boundary_group_down</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: <strong>vol_buckets</strong>.</p>
<p>Splitting data observations into 3 volatility buckets: low, mid and high.
The function does this for each <code>symbol</code> present in the data.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input dataframe or lazy frame.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>lo_quantile</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The lower quantile for bucketing. Default is 0.4.</p>
            </div>
          </td>
          <td>
                <code>0.4</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>hi_quantile</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The higher quantile for bucketing. Default is 0.8.</p>
            </div>
          </td>
          <td>
                <code>0.8</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_volatility</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column to apply volatility bucketing. Default is
"realized_volatility".</p>
            </div>
          </td>
          <td>
                <code>&#39;realized_volatility&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_boundary_group_down</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, then group boundary values down to the lower bucket, using
<code>vol_buckets_alt()</code> If False, then group boundary values up to the
higher bucket, using the Polars <code>.qcut()</code> method.
Default is False.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The <code>data</code> with an additional column: <code>vol_bucket</code></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">vol_buckets</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">lo_quantile</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span>
    <span class="n">hi_quantile</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span>
    <span class="n">_column_name_volatility</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;realized_volatility&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_boundary_group_down</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: **vol_buckets**.</span>

<span class="sd">    Splitting data observations into 3 volatility buckets: low, mid and high.</span>
<span class="sd">    The function does this for each `symbol` present in the data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.LazyFrame | pl.DataFrame</span>
<span class="sd">        The input dataframe or lazy frame.</span>
<span class="sd">    lo_quantile : float</span>
<span class="sd">        The lower quantile for bucketing. Default is 0.4.</span>
<span class="sd">    hi_quantile : float</span>
<span class="sd">        The higher quantile for bucketing. Default is 0.8.</span>
<span class="sd">    _column_name_volatility : str</span>
<span class="sd">        The name of the column to apply volatility bucketing. Default is</span>
<span class="sd">        &quot;realized_volatility&quot;.</span>
<span class="sd">    _boundary_group_down: bool = False</span>
<span class="sd">        If True, then group boundary values down to the lower bucket, using</span>
<span class="sd">        `vol_buckets_alt()` If False, then group boundary values up to the</span>
<span class="sd">        higher bucket, using the Polars `.qcut()` method.</span>
<span class="sd">        Default is False.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        The `data` with an additional column: `vol_bucket`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_check_required_columns</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">_column_name_volatility</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">_boundary_group_down</span><span class="p">:</span>
        <span class="c1"># Grouping Boundary Values in Higher Bucket</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_volatility</span><span class="p">)</span>
            <span class="o">.</span><span class="n">qcut</span><span class="p">(</span>
                <span class="p">[</span><span class="n">lo_quantile</span><span class="p">,</span> <span class="n">hi_quantile</span><span class="p">],</span>
                <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="s2">&quot;mid&quot;</span><span class="p">,</span> <span class="s2">&quot;high&quot;</span><span class="p">],</span>
                <span class="n">left_closed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">allow_duplicates</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;vol_bucket&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">vol_buckets_alt</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span> <span class="n">lo_quantile</span><span class="p">,</span> <span class="n">hi_quantile</span><span class="p">,</span> <span class="n">_column_name_volatility</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_buckets_alt" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_buckets_alt</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_buckets_alt" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">vol_buckets_alt</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">lo_quantile</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span> <span class="n">hi_quantile</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span> <span class="n">_column_name_volatility</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;realized_volatility&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: <strong>vol_buckets_alt</strong>.</p>
<p>This is an alternative implementation of <code>vol_buckets()</code> using expressions,
and not using <code>.qcut()</code>.
The biggest difference is how the function groups values on the boundaries
of quantiles. This function groups boundary values down
Splitting data observations into 3 volatility buckets: low, mid and high.
The function does this for each <code>symbol</code> present in the data.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input dataframe or lazy frame.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>lo_quantile</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The lower quantile for bucketing. Default is 0.4.</p>
            </div>
          </td>
          <td>
                <code>0.4</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>hi_quantile</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The higher quantile for bucketing. Default is 0.8.</p>
            </div>
          </td>
          <td>
                <code>0.8</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_volatility</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column to apply volatility bucketing. Default is "realized_volatility".</p>
            </div>
          </td>
          <td>
                <code>&#39;realized_volatility&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The <code>data</code> with an additional column: <code>vol_bucket</code></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>The biggest difference is how the function groups values on the boundaries
of quantiles. This function <strong>groups boundary values down</strong> to the lower bucket.
So, if there is a value that lies on the mid/low border, this function will
group it with <code>low</code>, whereas <code>vol_buckets()</code> will group it with <code>mid</code></p>
<p>This function is also slightly less performant.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">vol_buckets_alt</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">lo_quantile</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span>
    <span class="n">hi_quantile</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span>
    <span class="n">_column_name_volatility</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;realized_volatility&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: **vol_buckets_alt**.</span>

<span class="sd">    This is an alternative implementation of `vol_buckets()` using expressions,</span>
<span class="sd">    and not using `.qcut()`.</span>
<span class="sd">    The biggest difference is how the function groups values on the boundaries</span>
<span class="sd">    of quantiles. This function groups boundary values down</span>
<span class="sd">    Splitting data observations into 3 volatility buckets: low, mid and high.</span>
<span class="sd">    The function does this for each `symbol` present in the data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.LazyFrame | pl.DataFrame</span>
<span class="sd">        The input dataframe or lazy frame.</span>
<span class="sd">    lo_quantile : float</span>
<span class="sd">        The lower quantile for bucketing. Default is 0.4.</span>
<span class="sd">    hi_quantile : float</span>
<span class="sd">        The higher quantile for bucketing. Default is 0.8.</span>
<span class="sd">    _column_name_volatility : str</span>
<span class="sd">        The name of the column to apply volatility bucketing. Default is &quot;realized_volatility&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        The `data` with an additional column: `vol_bucket`</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The biggest difference is how the function groups values on the boundaries</span>
<span class="sd">    of quantiles. This function __groups boundary values down__ to the lower bucket.</span>
<span class="sd">    So, if there is a value that lies on the mid/low border, this function will</span>
<span class="sd">    group it with `low`, whereas `vol_buckets()` will group it with `mid`</span>

<span class="sd">    This function is also slightly less performant.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Calculate low and high quantiles for each symbol</span>
    <span class="n">low_vol</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_volatility</span><span class="p">)</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">lo_quantile</span><span class="p">)</span>
    <span class="n">high_vol</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_volatility</span><span class="p">)</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">hi_quantile</span><span class="p">)</span>

    <span class="c1"># Determine the volatility bucket for each row using expressions</span>
    <span class="n">vol_bucket</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_volatility</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">low_vol</span><span class="p">)</span>
        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;low&quot;</span><span class="p">))</span>
        <span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_volatility</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">high_vol</span><span class="p">)</span>
        <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;mid&quot;</span><span class="p">))</span>
        <span class="o">.</span><span class="n">otherwise</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;high&quot;</span><span class="p">))</span>
        <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;vol_bucket&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Add the volatility bucket column to the data</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">vol_bucket</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_filter" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_filter</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_filter" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">vol_filter</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: <strong>vol_filter</strong>.</p>
<p>If <code>_rv_adjustment</code> is True, then filter the data to only include rows
that are in the same vol_bucket as the latest row for each symbol.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input dataframe or lazy frame. This should be the output of
<code>vol_buckets()</code> function in <code>calc_mandelbrot_channel()</code>.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The data with only observations in the same volatility bucket as the
most recent data observation</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">vol_filter</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: **vol_filter**.</span>

<span class="sd">    If `_rv_adjustment` is True, then filter the data to only include rows</span>
<span class="sd">    that are in the same vol_bucket as the latest row for each symbol.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The input dataframe or lazy frame. This should be the output of</span>
<span class="sd">        `vol_buckets()` function in `calc_mandelbrot_channel()`.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        The data with only observations in the same volatility bucket as the</span>
<span class="sd">        most recent data observation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_check_required_columns</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;vol_bucket&quot;</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;vol_bucket&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;last_vol_bucket&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;vol_bucket&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;last_vol_bucket&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;last_vol_bucket&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.helpers.price_range" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.helpers.price_range</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.price_range" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">price_range</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span><span class="p">,</span> <span class="n">recent_price_data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">rs_method</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;RS&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_mean&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_max&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;RS&#39;</span><span class="p">,</span> <span class="n">_detrended_returns</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;detrended_log_returns&#39;</span><span class="p">,</span> <span class="n">_column_name_cum_sum_max</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;cum_sum_max&#39;</span><span class="p">,</span> <span class="n">_column_name_cum_sum_min</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;cum_sum_min&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_rv_adjustment</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: <strong>price_range</strong>.</p>
<p>Calculate the price range for a given dataset using the Mandelbrot method.</p>
<p>This function computes the price range based on the recent price data,
cumulative sum max and min, and RS method specified. It supports adjustments
for real volatility and sorting of the data based on symbols and dates.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dataset containing the financial data.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>recent_price_data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span> | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dataset containing the most recent price data. If None, the most recent prices are extracted from <code>data</code>.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>rs_method</code></td>
          <td>
                <code><span title="typing.Literal">Literal</span>[&#39;RS&#39;, &#39;RS_mean&#39;, &#39;RS_max&#39;, &#39;RS_min&#39;]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The RS value to use. Must be one of 'RS', 'RS_mean', 'RS_max', 'RS_min'.
RS is the column that is the Range/STD of the detrended returns.</p>
            </div>
          </td>
          <td>
                <code>&#34;RS&#34;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_detrended_returns</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The column name for detrended returns in <code>data</code></p>
            </div>
          </td>
          <td>
                <code>&#34;detrended_log_returns&#34;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_cum_sum_max</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The column name for cumulative sum max in <code>data</code></p>
            </div>
          </td>
          <td>
                <code>&#34;cum_sum_max&#34;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_cum_sum_min</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The column name for cumulative sum min in <code>data</code></p>
            </div>
          </td>
          <td>
                <code>&#34;cum_sum_min&#34;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_rv_adjustment</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, calculated the <code>std()</code> for all observations (since they have
already been filtered by volatility bucket). If False, then calculates
the <code>std()</code> for the most recent <code>window_index</code>
and uses that to adjust the price range.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_sort</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, sorts the data based on symbols and dates.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>**kwargs</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Arbitrary keyword arguments.</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dataset with calculated price range, including columns for top and
bottom prices.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Raises:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.errors.HumblDataError" href="../core/#humbldata.core.standard_models.abstract.errors.HumblDataError">HumblDataError</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the RS method specified is not supported.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">price_range_data</span> <span class="o">=</span> <span class="n">price_range</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">recent_price_data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rs_method</span><span class="o">=</span><span class="s2">&quot;RS&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">price_range_data</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="go">[&#39;symbol&#39;, &#39;bottom_price&#39;, &#39;recent_price&#39;, &#39;top_price&#39;]</span>
</code></pre></div>

<details class="note" open>
  <summary>Notes</summary>
  <p>For <code>rs_method</code>, you should know how this affects the mandelbrot channel
that is produced. Selecting RS uses the most recent RS value to calculate
the price range, whereas selecting RS_mean, RS_max, or RS_min uses the mean,
max, or min of the RS values, respectively.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">price_range</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">recent_price_data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">rs_method</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;RS&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_mean&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_max&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_min&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;RS&quot;</span><span class="p">,</span>
    <span class="n">_detrended_returns</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;detrended_log_returns&quot;</span><span class="p">,</span>  <span class="c1"># Parameterized detrended_returns column</span>
    <span class="n">_column_name_cum_sum_max</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cum_sum_max&quot;</span><span class="p">,</span>
    <span class="n">_column_name_cum_sum_min</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cum_sum_min&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_rv_adjustment</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: **price_range**.</span>

<span class="sd">    Calculate the price range for a given dataset using the Mandelbrot method.</span>

<span class="sd">    This function computes the price range based on the recent price data,</span>
<span class="sd">    cumulative sum max and min, and RS method specified. It supports adjustments</span>
<span class="sd">    for real volatility and sorting of the data based on symbols and dates.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.LazyFrame | pl.DataFrame</span>
<span class="sd">        The dataset containing the financial data.</span>
<span class="sd">    recent_price_data : pl.DataFrame | pl.LazyFrame | None</span>
<span class="sd">        The dataset containing the most recent price data. If None, the most recent prices are extracted from `data`.</span>
<span class="sd">    rs_method : Literal[&quot;RS&quot;, &quot;RS_mean&quot;, &quot;RS_max&quot;, &quot;RS_min&quot;], default &quot;RS&quot;</span>
<span class="sd">        The RS value to use. Must be one of &#39;RS&#39;, &#39;RS_mean&#39;, &#39;RS_max&#39;, &#39;RS_min&#39;.</span>
<span class="sd">        RS is the column that is the Range/STD of the detrended returns.</span>
<span class="sd">    _detrended_returns : str, default &quot;detrended_log_returns&quot;</span>
<span class="sd">        The column name for detrended returns in `data`</span>
<span class="sd">    _column_name_cum_sum_max : str, default &quot;cum_sum_max&quot;</span>
<span class="sd">        The column name for cumulative sum max in `data`</span>
<span class="sd">    _column_name_cum_sum_min : str, default &quot;cum_sum_min&quot;</span>
<span class="sd">        The column name for cumulative sum min in `data`</span>
<span class="sd">    _rv_adjustment : bool, default False</span>
<span class="sd">        If True, calculated the `std()` for all observations (since they have</span>
<span class="sd">        already been filtered by volatility bucket). If False, then calculates</span>
<span class="sd">        the `std()` for the most recent `window_index`</span>
<span class="sd">        and uses that to adjust the price range.</span>
<span class="sd">    _sort : bool, default True</span>
<span class="sd">        If True, sorts the data based on symbols and dates.</span>
<span class="sd">    **kwargs</span>
<span class="sd">        Arbitrary keyword arguments.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        The dataset with calculated price range, including columns for top and</span>
<span class="sd">        bottom prices.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    HumblDataError</span>
<span class="sd">        If the RS method specified is not supported.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; price_range_data = price_range(data, recent_price_data=None, rs_method=&quot;RS&quot;)</span>
<span class="sd">    &gt;&gt;&gt; print(price_range_data.columns)</span>
<span class="sd">    [&#39;symbol&#39;, &#39;bottom_price&#39;, &#39;recent_price&#39;, &#39;top_price&#39;]</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    For `rs_method`, you should know how this affects the mandelbrot channel</span>
<span class="sd">    that is produced. Selecting RS uses the most recent RS value to calculate</span>
<span class="sd">    the price range, whereas selecting RS_mean, RS_max, or RS_min uses the mean,</span>
<span class="sd">    max, or min of the RS values, respectively.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if RS_method is one of the allowed values</span>
    <span class="k">if</span> <span class="n">rs_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">RS_METHODS</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;RS_method must be one of &#39;RS&#39;, &#39;RS_mean&#39;, &#39;RS_max&#39;, &#39;RS_min&#39;&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>

    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_sort</span><span class="p">:</span>
        <span class="n">data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>

    <span class="c1"># Define Polars Expressions ================================================</span>
    <span class="n">last_cum_sum_max</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_cum_sum_max</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;last_cum_sum_max&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">last_cum_sum_min</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_cum_sum_min</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;last_cum_sum_min&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="c1"># Define a conditional expression for std_detrended_returns based on _rv_adjustment</span>
    <span class="n">std_detrended_returns_expr</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_detrended_returns</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;std_</span><span class="si">{</span><span class="n">_detrended_returns</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_rv_adjustment</span>
        <span class="k">else</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_detrended_returns</span><span class="p">)</span>
        <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;window_index&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;window_index&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
        <span class="o">.</span><span class="n">std</span><span class="p">()</span>
        <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;std_</span><span class="si">{</span><span class="n">_detrended_returns</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="c1"># if rv_adjustment isnt used, then use the most recent window will be used</span>
    <span class="c1"># for calculating the price_range</span>
    <span class="n">date_expr</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
    <span class="c1"># ===========================================================================</span>

    <span class="k">if</span> <span class="n">rs_method</span> <span class="o">==</span> <span class="s2">&quot;RS&quot;</span><span class="p">:</span>
        <span class="n">rs_expr</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;RS&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;RS&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">rs_method</span> <span class="o">==</span> <span class="s2">&quot;RS_mean&quot;</span><span class="p">:</span>
        <span class="n">rs_expr</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;RS&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;RS_mean&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">rs_method</span> <span class="o">==</span> <span class="s2">&quot;RS_max&quot;</span><span class="p">:</span>
        <span class="n">rs_expr</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;RS&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;RS_max&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">rs_method</span> <span class="o">==</span> <span class="s2">&quot;RS_min&quot;</span><span class="p">:</span>
        <span class="n">rs_expr</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;RS&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;RS_min&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">recent_price_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># if no recent_prices_data is passed, then pull the most recent prices from the data</span>
        <span class="n">recent_price_expr</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;close&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;recent_price&quot;</span><span class="p">)</span>
        <span class="c1"># Perform a single group_by operation to calculate both STD of detrended returns and RS statistics</span>
        <span class="n">price_range_data</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">data</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">date_expr</span><span class="p">,</span>
                    <span class="c1"># Conditional STD calculation based on _rv_adjustment</span>
                    <span class="n">std_detrended_returns_expr</span><span class="p">,</span>
                    <span class="c1"># Recent Price Data</span>
                    <span class="n">recent_price_expr</span><span class="p">,</span>
                    <span class="c1"># cum_sum_max/min last</span>
                    <span class="n">last_cum_sum_max</span><span class="p">,</span>
                    <span class="n">last_cum_sum_min</span><span class="p">,</span>
                    <span class="c1"># RS statistics</span>
                    <span class="n">rs_expr</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>
            <span class="c1"># Join with recent_price_data on symbol</span>
            <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">rs_method</span><span class="p">)</span>
                    <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;std_detrended_log_returns&quot;</span><span class="p">)</span>
                    <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;recent_price&quot;</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;price_range&quot;</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">price_range_data</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">data</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">date_expr</span><span class="p">,</span>
                    <span class="c1"># Conditional STD calculation based on _rv_adjustment</span>
                    <span class="n">std_detrended_returns_expr</span><span class="p">,</span>
                    <span class="c1"># cum_sum_max/min last</span>
                    <span class="n">last_cum_sum_max</span><span class="p">,</span>
                    <span class="n">last_cum_sum_min</span><span class="p">,</span>
                    <span class="c1"># RS statistics</span>
                    <span class="n">rs_expr</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>
            <span class="c1"># Join with recent_price_data on symbol</span>
            <span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">recent_price_data</span><span class="o">.</span><span class="n">lazy</span><span class="p">(),</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">rs_method</span><span class="p">)</span>
                    <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;std_detrended_log_returns&quot;</span><span class="p">)</span>
                    <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;recent_price&quot;</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;price_range&quot;</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="c1"># Relative Position Modifier</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">_price_range_engine</span><span class="p">(</span><span class="n">price_range_data</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.toolbox.technical.mandelbrot_channel.model" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.technical.mandelbrot_channel.model</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.model" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || <strong>Command: calc_mandelbrot_channel</strong>.</p>
<p>A command to generate a Mandelbrot Channel for any time series.</p>

  

  <div class="doc doc-children">
































































<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">calc_mandelbrot_channel</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">rv_method</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;std&#39;</span><span class="p">,</span> <span class="n">rs_method</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;RS&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_mean&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_max&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;RS&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">rv_adjustment</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">rv_grouped_mean</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">live_price</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || <strong>Command: calc_mandelbrot_channel</strong>.</p>
<p>This command calculates the Mandelbrot Channel for a given time series, utilizing various parameters to adjust the calculation. The Mandelbrot Channel provides insights into the volatility and price range of a stock over a specified window.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The time series data for which to calculate the Mandelbrot Channel.
There needs to be a <code>close</code> and <code>date</code> column.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The window size for the calculation, specified as a string. This
determines the period over which the channel is calculated.</p>
            </div>
          </td>
          <td>
                <code>&#39;1m&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>rv_adjustment</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Adjusts the calculation for realized volatility. If True, filters the
data to include only observations within the current volatility bucket
of the stock.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>rv_grouped_mean</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Determines whether to use the grouped mean in the realized volatility
calculation.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>rv_method</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Specifies the method for calculating realized volatility, applicable
only if <code>rv_adjustment</code> is True.</p>
            </div>
          </td>
          <td>
                <code>&#39;std&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>rs_method</code></td>
          <td>
                <code><span title="typing.Literal">Literal</span>[&#39;RS&#39;, &#39;RS_mean&#39;, &#39;RS_max&#39;, &#39;RS_min&#39;]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Defines the method for calculating the range over standard deviation,
affecting the width of the Mandelbrot Channel. Options include RS,
RS_mean, RS_min, and RS_max.</p>
            </div>
          </td>
          <td>
                <code>&#39;RS&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>live_price</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Indicates whether to incorporate live price data into the calculation,
which may extend the calculation time by 1-3 seconds.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>**kwargs</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Additional keyword arguments to pass to the function, if you want to
change the behavior or pass parameters to internal functions.</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A LazyFrame containing the calculated Mandelbrot Channel data for the specified time series.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>The function returns a pl.LazyFrame; remember to call <code>.collect()</code> on the result to obtain a DataFrame. This lazy evaluation strategy postpones the calculation until it is explicitly requested.</p>
</details>
<details class="example" open>
  <summary>Example</summary>
  <p>To calculate the Mandelbrot Channel for a yearly window with adjustments for realized volatility using the 'yz' method, and incorporating live price data:</p>
<div class="highlight"><pre><span></span><code><span class="n">mandelbrot_channel</span> <span class="o">=</span> <span class="n">calc_mandelbrot_channel</span><span class="p">(</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">window</span><span class="o">=</span><span class="s2">&quot;1y&quot;</span><span class="p">,</span>
    <span class="n">rv_adjustment</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">rv_method</span><span class="o">=</span><span class="s2">&quot;yz&quot;</span><span class="p">,</span>
    <span class="n">rv_grouped_mean</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">rs_method</span><span class="o">=</span><span class="s2">&quot;RS&quot;</span><span class="p">,</span>
    <span class="n">live_price</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/model.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calc_mandelbrot_channel</span><span class="p">(</span>  <span class="c1"># noqa: PLR0913</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">rv_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="n">rs_method</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;RS&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_mean&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_max&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_min&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;RS&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">rv_adjustment</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">rv_grouped_mean</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">live_price</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || **Command: calc_mandelbrot_channel**.</span>

<span class="sd">    This command calculates the Mandelbrot Channel for a given time series, utilizing various parameters to adjust the calculation. The Mandelbrot Channel provides insights into the volatility and price range of a stock over a specified window.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data: pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The time series data for which to calculate the Mandelbrot Channel.</span>
<span class="sd">        There needs to be a `close` and `date` column.</span>
<span class="sd">    window: str, default &quot;1m&quot;</span>
<span class="sd">        The window size for the calculation, specified as a string. This</span>
<span class="sd">        determines the period over which the channel is calculated.</span>
<span class="sd">    rv_adjustment: bool, default True</span>
<span class="sd">        Adjusts the calculation for realized volatility. If True, filters the</span>
<span class="sd">        data to include only observations within the current volatility bucket</span>
<span class="sd">        of the stock.</span>
<span class="sd">    rv_grouped_mean: bool, default True</span>
<span class="sd">        Determines whether to use the grouped mean in the realized volatility</span>
<span class="sd">        calculation.</span>
<span class="sd">    rv_method: str, default &quot;std&quot;</span>
<span class="sd">        Specifies the method for calculating realized volatility, applicable</span>
<span class="sd">        only if `rv_adjustment` is True.</span>
<span class="sd">    rs_method: str, default &quot;RS&quot;</span>
<span class="sd">        Defines the method for calculating the range over standard deviation,</span>
<span class="sd">        affecting the width of the Mandelbrot Channel. Options include RS,</span>
<span class="sd">        RS_mean, RS_min, and RS_max.</span>
<span class="sd">    live_price: bool, default True</span>
<span class="sd">        Indicates whether to incorporate live price data into the calculation,</span>
<span class="sd">        which may extend the calculation time by 1-3 seconds.</span>
<span class="sd">    **kwargs</span>
<span class="sd">        Additional keyword arguments to pass to the function, if you want to</span>
<span class="sd">        change the behavior or pass parameters to internal functions.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        A LazyFrame containing the calculated Mandelbrot Channel data for the specified time series.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The function returns a pl.LazyFrame; remember to call `.collect()` on the result to obtain a DataFrame. This lazy evaluation strategy postpones the calculation until it is explicitly requested.</span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    To calculate the Mandelbrot Channel for a yearly window with adjustments for realized volatility using the &#39;yz&#39; method, and incorporating live price data:</span>

<span class="sd">    ```python</span>
<span class="sd">    mandelbrot_channel = calc_mandelbrot_channel(</span>
<span class="sd">        data,</span>
<span class="sd">        window=&quot;1y&quot;,</span>
<span class="sd">        rv_adjustment=True,</span>
<span class="sd">        rv_method=&quot;yz&quot;,</span>
<span class="sd">        rv_grouped_mean=False,</span>
<span class="sd">        rs_method=&quot;RS&quot;,</span>
<span class="sd">        live_price=True</span>
<span class="sd">    ).collect()</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Setup ====================================================================</span>
    <span class="c1"># window_datetime = _window_format(window, _return_timedelta=True)</span>
    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
    <span class="c1"># Step 1: Collect Price Data -----------------------------------------------</span>
    <span class="c1"># Step X: Add window bins --------------------------------------------------</span>
    <span class="c1"># We want date grouping, non-overlapping window bins</span>
    <span class="n">data1</span> <span class="o">=</span> <span class="n">add_window_index</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">)</span>

    <span class="c1"># Step X: Calculate Log Returns + Rvol -------------------------------------</span>
    <span class="k">if</span> <span class="s2">&quot;log_returns&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data1</span><span class="o">.</span><span class="n">collect_schema</span><span class="p">()</span><span class="o">.</span><span class="n">names</span><span class="p">():</span>
        <span class="n">data2</span> <span class="o">=</span> <span class="n">log_returns</span><span class="p">(</span><span class="n">data1</span><span class="p">,</span> <span class="n">_column_name</span><span class="o">=</span><span class="s2">&quot;close&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data2</span> <span class="o">=</span> <span class="n">data1</span>

    <span class="c1"># Step X: Calculate Log Mean Series ----------------------------------------</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data2</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">data3</span> <span class="o">=</span> <span class="n">mean</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;A series was passed to `mean()` calculation. Please provide a DataFrame or LazyFrame.&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="c1"># Step X: Calculate Mean De-trended Series ---------------------------------</span>
    <span class="n">data4</span> <span class="o">=</span> <span class="n">detrend</span><span class="p">(</span>
        <span class="n">data3</span><span class="p">,</span> <span class="n">_detrend_value_col</span><span class="o">=</span><span class="s2">&quot;window_mean&quot;</span><span class="p">,</span> <span class="n">_detrend_col</span><span class="o">=</span><span class="s2">&quot;log_returns&quot;</span>
    <span class="p">)</span>
    <span class="c1"># Step X: Calculate Cumulative Deviate Series ------------------------------</span>
    <span class="n">data5</span> <span class="o">=</span> <span class="n">cum_sum</span><span class="p">(</span><span class="n">data4</span><span class="p">,</span> <span class="n">_column_name</span><span class="o">=</span><span class="s2">&quot;detrended_log_returns&quot;</span><span class="p">)</span>
    <span class="c1"># Step X: Calculate Mandelbrot Range ---------------------------------------</span>
    <span class="n">data6</span> <span class="o">=</span> <span class="n">range_</span><span class="p">(</span><span class="n">data5</span><span class="p">,</span> <span class="n">_column_name</span><span class="o">=</span><span class="s2">&quot;cum_sum&quot;</span><span class="p">)</span>
    <span class="c1"># Step X: Calculate Standard Deviation -------------------------------------</span>
    <span class="n">data7</span> <span class="o">=</span> <span class="n">std</span><span class="p">(</span><span class="n">data6</span><span class="p">,</span> <span class="n">_column_name</span><span class="o">=</span><span class="s2">&quot;cum_sum&quot;</span><span class="p">)</span>
    <span class="c1"># Step X: Calculate Range (R) &amp; Standard Deviation (S) ---------------------</span>
    <span class="k">if</span> <span class="n">rv_adjustment</span><span class="p">:</span>
        <span class="c1"># Step 8.1: Calculate Realized Volatility ------------------------------</span>
        <span class="n">data7</span> <span class="o">=</span> <span class="n">calc_realized_volatility</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data7</span><span class="p">,</span>
            <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="n">rv_method</span><span class="p">,</span>
            <span class="n">grouped_mean</span><span class="o">=</span><span class="n">rv_grouped_mean</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># rename col for easy selection</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">data7</span><span class="o">.</span><span class="n">collect_schema</span><span class="p">()</span><span class="o">.</span><span class="n">names</span><span class="p">():</span>
            <span class="k">if</span> <span class="s2">&quot;volatility_pct&quot;</span> <span class="ow">in</span> <span class="n">col</span><span class="p">:</span>
                <span class="n">data7</span> <span class="o">=</span> <span class="n">data7</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="n">col</span><span class="p">:</span> <span class="s2">&quot;realized_volatility&quot;</span><span class="p">})</span>
        <span class="c1"># Step 8.2: Calculate Volatility Bucket Stats --------------------------</span>
        <span class="n">data7</span> <span class="o">=</span> <span class="n">vol_buckets</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data7</span><span class="p">,</span> <span class="n">lo_quantile</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">hi_quantile</span><span class="o">=</span><span class="mf">0.65</span><span class="p">)</span>
        <span class="n">data7</span> <span class="o">=</span> <span class="n">vol_filter</span><span class="p">(</span>
            <span class="n">data7</span>
        <span class="p">)</span>  <span class="c1"># removes rows that arent in the same vol bucket</span>

    <span class="c1"># Step X: Calculate RS -----------------------------------------------------</span>
    <span class="n">data8</span> <span class="o">=</span> <span class="n">data7</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cum_sum_range&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cum_sum_std&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;RS&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Step X: Collect Recent Prices --------------------------------------------</span>
    <span class="k">if</span> <span class="n">live_price</span><span class="p">:</span>
        <span class="n">symbols</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">recent_prices</span> <span class="o">=</span> <span class="n">get_latest_price</span><span class="p">(</span><span class="n">symbols</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">recent_prices</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Step X: Calculate Rescaled Price Range ----------------------------------</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">price_range</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data8</span><span class="p">,</span>
        <span class="n">recent_price_data</span><span class="o">=</span><span class="n">recent_prices</span><span class="p">,</span>
        <span class="n">rs_method</span><span class="o">=</span><span class="n">rs_method</span><span class="p">,</span>
        <span class="n">_rv_adjustment</span><span class="o">=</span><span class="n">rv_adjustment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.model.acalc_mandelbrot_channel" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.model.acalc_mandelbrot_channel</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#humbldata.toolbox.technical.mandelbrot_channel.model.acalc_mandelbrot_channel" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">acalc_mandelbrot_channel</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">rv_method</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;std&#39;</span><span class="p">,</span> <span class="n">rs_method</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;RS&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_mean&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_max&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;RS&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">rv_adjustment</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">rv_grouped_mean</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">live_price</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: Mandelbrot Channel || <strong>Command: acalc_mandelbrot_channel</strong>.</p>
<p>Asynchronous wrapper for calc_mandelbrot_channel.
This function allows calc_mandelbrot_channel to be called in an async context.</p>

<details class="note" open>
  <summary>Notes</summary>
  <p>This does not make <code>calc_mandelbrot_channel()</code> non-blocking or asynchronous.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/model.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">acalc_mandelbrot_channel</span><span class="p">(</span>  <span class="c1"># noqa: PLR0913</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">rv_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="n">rs_method</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;RS&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_mean&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_max&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_min&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;RS&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">rv_adjustment</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">rv_grouped_mean</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">live_price</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Sub-Category: Mandelbrot Channel || **Command: acalc_mandelbrot_channel**.</span>

<span class="sd">    Asynchronous wrapper for calc_mandelbrot_channel.</span>
<span class="sd">    This function allows calc_mandelbrot_channel to be called in an async context.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This does not make `calc_mandelbrot_channel()` non-blocking or asynchronous.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Directly call the synchronous calc_mandelbrot_channel function</span>

    <span class="k">return</span> <span class="n">calc_mandelbrot_channel</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span>
        <span class="n">rv_adjustment</span><span class="o">=</span><span class="n">rv_adjustment</span><span class="p">,</span>
        <span class="n">rv_method</span><span class="o">=</span><span class="n">rv_method</span><span class="p">,</span>
        <span class="n">rs_method</span><span class="o">=</span><span class="n">rs_method</span><span class="p">,</span>
        <span class="n">rv_grouped_mean</span><span class="o">=</span><span class="n">rv_grouped_mean</span><span class="p">,</span>
        <span class="n">live_price</span><span class="o">=</span><span class="n">live_price</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">calc_mandelbrot_channel_historical</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">rv_method</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;std&#39;</span><span class="p">,</span> <span class="n">rs_method</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;RS&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_mean&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_max&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;RS&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">rv_adjustment</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">rv_grouped_mean</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">live_price</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: Mandelbrot Channel || <strong>Command: calc_mandelbrot_channel_historical</strong>.</p>
<p>This function calculates the Mandelbrot Channel for historical data.</p>
<p>Synchronous wrapper for the asynchronous Mandelbrot Channel historical calculation.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>The</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>Please</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>description</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A LazyFrame containing the historical Mandelbrot Channel calculations.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/model.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calc_mandelbrot_channel_historical</span><span class="p">(</span>  <span class="c1"># noqa: PLR0913</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">rv_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="n">rs_method</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;RS&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_mean&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_max&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_min&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;RS&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">rv_adjustment</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">rv_grouped_mean</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">live_price</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Sub-Category: Mandelbrot Channel || **Command: calc_mandelbrot_channel_historical**.</span>

<span class="sd">    This function calculates the Mandelbrot Channel for historical data.</span>

<span class="sd">    Synchronous wrapper for the asynchronous Mandelbrot Channel historical calculation.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    The parameters for this function are the same as those for calc_mandelbrot_channel().</span>
<span class="sd">    Please refer to the documentation of calc_mandelbrot_channel() for a detailed</span>
<span class="sd">    description of each parameter.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        A LazyFrame containing the historical Mandelbrot Channel calculations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">run_async</span><span class="p">(</span>
        <span class="n">_acalc_mandelbrot_channel_historical_engine</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span>
            <span class="n">rv_adjustment</span><span class="o">=</span><span class="n">rv_adjustment</span><span class="p">,</span>
            <span class="n">rv_method</span><span class="o">=</span><span class="n">rv_method</span><span class="p">,</span>
            <span class="n">rs_method</span><span class="o">=</span><span class="n">rs_method</span><span class="p">,</span>
            <span class="n">rv_grouped_mean</span><span class="o">=</span><span class="n">rv_grouped_mean</span><span class="p">,</span>
            <span class="n">live_price</span><span class="o">=</span><span class="n">live_price</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical_mp" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical_mp</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical_mp" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">calc_mandelbrot_channel_historical_mp</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">rv_adjustment</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">rv_method</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;std&#39;</span><span class="p">,</span> <span class="n">rs_method</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;RS&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_mean&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_max&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;RS&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">rv_grouped_mean</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">live_price</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">n_processes</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Calculate the Mandelbrot Channel historically using multiprocessing.</p>

<details class="parameters:" open>
  <summary>Parameters:</summary>
  <p>n_processes : int, optional
    Number of processes to use. If None, it uses all available cores.</p>
<p>Other parameters are the same as calc_mandelbrot_channel_historical.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/model.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calc_mandelbrot_channel_historical_mp</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">rv_adjustment</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">rv_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="n">rs_method</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;RS&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_mean&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_max&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_min&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;RS&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">rv_grouped_mean</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">live_price</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">n_processes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the Mandelbrot Channel historically using multiprocessing.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    -----------</span>
<span class="sd">    n_processes : int, optional</span>
<span class="sd">        Number of processes to use. If None, it uses all available cores.</span>

<span class="sd">    Other parameters are the same as calc_mandelbrot_channel_historical.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">window_days</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">start_date</span> <span class="o">+</span> <span class="n">window_days</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">start_date</span> <span class="o">&gt;=</span> <span class="n">end_date</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;You set &lt;historical=True&gt; </span><span class="se">\n\</span>
<span class="s2">        This calculation needs *at least* one window of data. </span><span class="se">\n\</span>
<span class="s2">        The (start date + window) is: </span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2"> and the dataset ended: </span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s2">. </span><span class="se">\n\</span>
<span class="s2">        Please adjust dates accordingly.&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">dates</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">))</span>
        <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">start_date</span><span class="p">)</span>
        <span class="o">.</span><span class="n">unique</span><span class="p">()</span>
        <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
        <span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Prepare the partial function with all arguments except the date</span>
    <span class="n">calc_func</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span>
        <span class="n">_calc_mandelbrot_for_date</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span>
        <span class="n">rv_adjustment</span><span class="o">=</span><span class="n">rv_adjustment</span><span class="p">,</span>
        <span class="n">rv_method</span><span class="o">=</span><span class="n">rv_method</span><span class="p">,</span>
        <span class="n">rs_method</span><span class="o">=</span><span class="n">rs_method</span><span class="p">,</span>
        <span class="n">rv_grouped_mean</span><span class="o">=</span><span class="n">rv_grouped_mean</span><span class="p">,</span>
        <span class="n">live_price</span><span class="o">=</span><span class="n">live_price</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Use multiprocessing to calculate in parallel</span>
    <span class="k">with</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Pool</span><span class="p">(</span><span class="n">processes</span><span class="o">=</span><span class="n">n_processes</span><span class="p">)</span> <span class="k">as</span> <span class="n">pool</span><span class="p">:</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">calc_func</span><span class="p">,</span> <span class="n">dates</span><span class="p">)</span>

    <span class="c1"># Combine results</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">([</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">out</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical_concurrent" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical_concurrent</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel_historical_concurrent" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">calc_mandelbrot_channel_historical_concurrent</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">rv_method</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;std&#39;</span><span class="p">,</span> <span class="n">rs_method</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;RS&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_mean&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_max&#39;</span><span class="p">,</span> <span class="s1">&#39;RS_min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;RS&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">rv_adjustment</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">rv_grouped_mean</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">live_price</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">max_workers</span><span class="p">:</span> <span class="n">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">use_processes</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Calculate the Mandelbrot Channel historically using concurrent.futures.</p>

<details class="parameters:" open>
  <summary>Parameters:</summary>
  <p>max_workers : int, optional
    Maximum number of workers to use. If None, it uses the default for ProcessPoolExecutor
    or ThreadPoolExecutor (usually the number of processors on the machine, multiplied by 5).
use_processes : bool, default True
    If True, use ProcessPoolExecutor, otherwise use ThreadPoolExecutor.</p>
<p>Other parameters are the same as calc_mandelbrot_channel_historical.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/model.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calc_mandelbrot_channel_historical_concurrent</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">rv_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="n">rs_method</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;RS&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_mean&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_max&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_min&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;RS&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">rv_adjustment</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">rv_grouped_mean</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">live_price</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">max_workers</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">use_processes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the Mandelbrot Channel historically using concurrent.futures.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    -----------</span>
<span class="sd">    max_workers : int, optional</span>
<span class="sd">        Maximum number of workers to use. If None, it uses the default for ProcessPoolExecutor</span>
<span class="sd">        or ThreadPoolExecutor (usually the number of processors on the machine, multiplied by 5).</span>
<span class="sd">    use_processes : bool, default True</span>
<span class="sd">        If True, use ProcessPoolExecutor, otherwise use ThreadPoolExecutor.</span>

<span class="sd">    Other parameters are the same as calc_mandelbrot_channel_historical.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">window_days</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">start_date</span> <span class="o">=</span> <span class="n">start_date</span> <span class="o">+</span> <span class="n">window_days</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">start_date</span> <span class="o">&gt;=</span> <span class="n">end_date</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;You set &lt;historical=True&gt; </span><span class="se">\n\</span>
<span class="s2">        This calculation needs *at least* one window of data. </span><span class="se">\n\</span>
<span class="s2">        The (start date + window) is: </span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2"> and the dataset ended: </span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s2">. </span><span class="se">\n\</span>
<span class="s2">        Please adjust dates accordingly.&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">dates</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">))</span>
        <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">start_date</span><span class="p">)</span>
        <span class="o">.</span><span class="n">unique</span><span class="p">()</span>
        <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
        <span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Prepare the partial function with all arguments except the date</span>
    <span class="n">calc_func</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span>
        <span class="n">_calc_mandelbrot_for_date</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span>
        <span class="n">rv_adjustment</span><span class="o">=</span><span class="n">rv_adjustment</span><span class="p">,</span>
        <span class="n">rv_method</span><span class="o">=</span><span class="n">rv_method</span><span class="p">,</span>
        <span class="n">rs_method</span><span class="o">=</span><span class="n">rs_method</span><span class="p">,</span>
        <span class="n">rv_grouped_mean</span><span class="o">=</span><span class="n">rv_grouped_mean</span><span class="p">,</span>
        <span class="n">live_price</span><span class="o">=</span><span class="n">live_price</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Choose the appropriate executor</span>
    <span class="n">executor_class</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ProcessPoolExecutor</span>
        <span class="k">if</span> <span class="n">use_processes</span>
        <span class="k">else</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ThreadPoolExecutor</span>
    <span class="p">)</span>

    <span class="c1"># Use concurrent.futures to calculate in parallel</span>
    <span class="k">with</span> <span class="n">executor_class</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="n">max_workers</span><span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
        <span class="n">futures</span> <span class="o">=</span> <span class="p">[</span><span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">calc_func</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span> <span class="k">for</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">dates</span><span class="p">]</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">future</span> <span class="ow">in</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">futures</span><span class="p">)</span>
        <span class="p">]</span>

    <span class="c1"># Combine results</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">([</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">out</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.toolbox.technical.mandelbrot_channel.view" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.technical.mandelbrot_channel.view</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.view" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">




















<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.view.create_historical_plot" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.view.create_historical_plot</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.view.create_historical_plot" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_historical_plot</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span><span class="p">,</span> <span class="n">symbol</span><span class="p">:</span> <span class="n">str</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="plotly.graph_objs.Figure">Figure</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Generate a historical plot for a given symbol from the provided data.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dataframe containing historical data including dates, bottom prices, close prices, and top prices.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>symbol</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The symbol for which the historical plot is to be generated.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>template</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The template to be used for styling the plot.</p>
            </div>
          </td>
          <td>
                <code><span title="humbldata.core.standard_models.abstract.chart.ChartTemplate.plotly">plotly</span></code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="plotly.graph_objs.Figure">Figure</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A plotly figure object representing the historical data of the given symbol.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/view.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_historical_plot</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="n">ChartTemplate</span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a historical plot for a given symbol from the provided data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame</span>
<span class="sd">        The dataframe containing historical data including dates, bottom prices, close prices, and top prices.</span>
<span class="sd">    symbol : str</span>
<span class="sd">        The symbol for which the historical plot is to be generated.</span>
<span class="sd">    template : ChartTemplate</span>
<span class="sd">        The template to be used for styling the plot.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    go.Figure</span>
<span class="sd">        A plotly figure object representing the historical data of the given symbol.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filtered_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">symbol</span><span class="p">)</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
        <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">filtered_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_series</span><span class="p">(),</span>
            <span class="n">y</span><span class="o">=</span><span class="n">filtered_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;bottom_price&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_series</span><span class="p">(),</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bottom Price&quot;</span><span class="p">,</span>
            <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
        <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">filtered_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_series</span><span class="p">(),</span>
            <span class="n">y</span><span class="o">=</span><span class="n">filtered_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;recent_price&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_series</span><span class="p">(),</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Recent Price&quot;</span><span class="p">,</span>
            <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
        <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">filtered_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_series</span><span class="p">(),</span>
            <span class="n">y</span><span class="o">=</span><span class="n">filtered_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;top_price&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_series</span><span class="p">(),</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Top Price&quot;</span><span class="p">,</span>
            <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Historical Mandelbrot Channel for </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">xaxis_title</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
        <span class="n">yaxis_title</span><span class="o">=</span><span class="s2">&quot;Price&quot;</span><span class="p">,</span>
        <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.view.create_current_plot" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.view.create_current_plot</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.view.create_current_plot" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_current_plot</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span><span class="p">,</span> <span class="n">symbol</span><span class="p">:</span> <span class="n">str</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="plotly.graph_objs.Figure">Figure</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Generate a current plot for a given symbol from the provided data and equity data.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dataframe containing historical data including top and bottom prices.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>equity_data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dataframe containing current equity data including dates and close prices.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>symbol</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The symbol for which the current plot is to be generated.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>template</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The template to be used for styling the plot.</p>
            </div>
          </td>
          <td>
                <code><span title="humbldata.core.standard_models.abstract.chart.ChartTemplate.plotly">plotly</span></code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="plotly.graph_objs.Figure">Figure</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A plotly figure object representing the current data of the given symbol.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/view.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_current_plot</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">equity_data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="n">ChartTemplate</span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a current plot for a given symbol from the provided data and equity data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame</span>
<span class="sd">        The dataframe containing historical data including top and bottom prices.</span>
<span class="sd">    equity_data : pl.DataFrame</span>
<span class="sd">        The dataframe containing current equity data including dates and close prices.</span>
<span class="sd">    symbol : str</span>
<span class="sd">        The symbol for which the current plot is to be generated.</span>
<span class="sd">    template : ChartTemplate</span>
<span class="sd">        The template to be used for styling the plot.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    go.Figure</span>
<span class="sd">        A plotly figure object representing the current data of the given symbol.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filtered_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">symbol</span><span class="p">)</span>
    <span class="n">equity_data</span> <span class="o">=</span> <span class="n">equity_data</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">symbol</span><span class="p">)</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
        <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">equity_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_series</span><span class="p">(),</span>
            <span class="n">y</span><span class="o">=</span><span class="n">equity_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;close&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_series</span><span class="p">(),</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Recent Price&quot;</span><span class="p">,</span>
            <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">add_hline</span><span class="p">(</span>
        <span class="n">y</span><span class="o">=</span><span class="n">filtered_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;top_price&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Top Price&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">add_hline</span><span class="p">(</span>
        <span class="n">y</span><span class="o">=</span><span class="n">filtered_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;bottom_price&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bottom Price&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Current Mandelbrot Channel for </span><span class="si">{</span><span class="n">symbol</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">xaxis_title</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
        <span class="n">yaxis_title</span><span class="o">=</span><span class="s2">&quot;Price&quot;</span><span class="p">,</span>
        <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.view.is_historical_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.view.is_historical_data</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.view.is_historical_data" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_historical_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">bool</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Check if the provided dataframe contains historical data based on the uniqueness of dates.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dataframe to check for historical data presence.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Returns True if the dataframe contains historical data (more than one unique date), otherwise False.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/view.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">is_historical_data</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if the provided dataframe contains historical data based on the uniqueness of dates.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame</span>
<span class="sd">        The dataframe to check for historical data presence.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    bool</span>
<span class="sd">        Returns True if the dataframe contains historical data (more than one unique date), otherwise False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.view.generate_plot_for_symbol" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.view.generate_plot_for_symbol</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.view.generate_plot_for_symbol" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate_plot_for_symbol</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span><span class="p">,</span> <span class="n">symbol</span><span class="p">:</span> <span class="n">str</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.Chart" href="../core/#humbldata.core.standard_models.abstract.chart.Chart">Chart</a></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Generate a plot for a specific symbol that is filtered from the original DF.</p>
<p>This function will check if the data provided is a Historical or Current
Mandelbrot Channel data. If it is historical, it will generate a historical
plot. If it is current, it will generate a current plot.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dataframe containing Mandelbrot channel data for all symbols.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>equity_data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The dataframe containing equity data for all symbols.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>symbol</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The symbol for which to generate the plot.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>template</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The template/theme to use for the plotly figure. Options are:
"humbl_light", "humbl_dark", "plotly_light", "plotly_dark", "ggplot2", "seaborn", "simple_white", "none"</p>
            </div>
          </td>
          <td>
                <code><span title="humbldata.core.standard_models.abstract.chart.ChartTemplate.plotly">plotly</span></code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.Chart" href="../core/#humbldata.core.standard_models.abstract.chart.Chart">Chart</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A Chart object containing the generated plot for the specified symbol.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/view.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_plot_for_symbol</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">equity_data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="n">ChartTemplate</span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Chart</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a plot for a specific symbol that is filtered from the original DF.</span>

<span class="sd">    This function will check if the data provided is a Historical or Current</span>
<span class="sd">    Mandelbrot Channel data. If it is historical, it will generate a historical</span>
<span class="sd">    plot. If it is current, it will generate a current plot.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame</span>
<span class="sd">        The dataframe containing Mandelbrot channel data for all symbols.</span>
<span class="sd">    equity_data : pl.DataFrame</span>
<span class="sd">        The dataframe containing equity data for all symbols.</span>
<span class="sd">    symbol : str</span>
<span class="sd">        The symbol for which to generate the plot.</span>
<span class="sd">    template : ChartTemplate</span>
<span class="sd">        The template/theme to use for the plotly figure. Options are:</span>
<span class="sd">        &quot;humbl_light&quot;, &quot;humbl_dark&quot;, &quot;plotly_light&quot;, &quot;plotly_dark&quot;, &quot;ggplot2&quot;, &quot;seaborn&quot;, &quot;simple_white&quot;, &quot;none&quot;</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Chart</span>
<span class="sd">        A Chart object containing the generated plot for the specified symbol.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">is_historical_data</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">create_historical_plot</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">create_current_plot</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Chart</span><span class="p">(</span>
        <span class="n">content</span><span class="o">=</span><span class="n">out</span><span class="o">.</span><span class="n">to_json</span><span class="p">(),</span> <span class="n">fig</span><span class="o">=</span><span class="n">out</span>
    <span class="p">)</span>  <span class="c1"># TODO: use to_json() instead of to_plotly_json()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.view.generate_plots" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.mandelbrot_channel.view.generate_plots</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.view.generate_plots" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate_plots</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">list</span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.Chart" href="../core/#humbldata.core.standard_models.abstract.chart.Chart">Chart</a></span><span class="p">]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Subcategory: Mandelbrot Channel || <strong>Command: generate_plots()</strong>.</p>
<p>Generate plots for each unique symbol in the given dataframes.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The LazyFrame containing the symbols and MandelbrotChannelData</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>equity_data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The LazyFrame containing equity data for the symbols.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>template</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.ChartTemplate" href="../core/#humbldata.core.standard_models.abstract.chart.ChartTemplate">ChartTemplate</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The template/theme to use for the plotly figure.</p>
            </div>
          </td>
          <td>
                <code><span title="humbldata.core.standard_models.abstract.chart.ChartTemplate.plotly">plotly</span></code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.chart.Chart" href="../core/#humbldata.core.standard_models.abstract.chart.Chart">Chart</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of Chart objects, each representing a plot for a unique symbol.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/mandelbrot_channel/view.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_plots</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">equity_data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="n">ChartTemplate</span> <span class="o">=</span> <span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Chart</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Subcategory: Mandelbrot Channel || **Command: generate_plots()**.</span>

<span class="sd">    Generate plots for each unique symbol in the given dataframes.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.LazyFrame</span>
<span class="sd">        The LazyFrame containing the symbols and MandelbrotChannelData</span>
<span class="sd">    equity_data : pl.LazyFrame</span>
<span class="sd">        The LazyFrame containing equity data for the symbols.</span>
<span class="sd">    template : ChartTemplate</span>
<span class="sd">        The template/theme to use for the plotly figure.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list[Chart]</span>
<span class="sd">        A list of Chart objects, each representing a plot for a unique symbol.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">symbols</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">to_series</span><span class="p">()</span>

    <span class="n">plots</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">generate_plot_for_symbol</span><span class="p">(</span>
            <span class="n">data</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> <span class="n">equity_data</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">template</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">symbols</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">plots</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="humbldata.toolbox.technical.volatility" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.technical.volatility</span>


<a href="#humbldata.toolbox.technical.volatility" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h5 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.technical.volatility.realized_volatility_helpers</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || <strong>Sub-Category: Volatility Helpers</strong>.</p>
<p>All of the volatility estimators used in <code>calc_realized_volatility()</code>.
These are various methods to calculate the realized volatility of financial data.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers.std" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.volatility.realized_volatility_helpers.std</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.std" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">std</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">trading_periods</span><span class="o">=</span><span class="mi">252</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_column_name_returns</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;log_returns&#39;</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || <strong>Command: _std</strong>.</p>
<p>This function computes the standard deviation of returns, which is a common
measure of volatility.It calculates the rolling standard deviation for a
given window size, optionally adjusting for the average number of trading
days and scaling the result to an annualized volatility percentage.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code>Union[<span title="polars.DataFrame">DataFrame</span>, <span title="polars.LazyFrame">LazyFrame</span>, <span title="polars.Series">Series</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data containing the returns. It can be a DataFrame, LazyFrame,
or Series.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The rolling window size for calculating the standard deviation.
The default is "1m" (one month).</p>
            </div>
          </td>
          <td>
                <code>&#39;1m&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>trading_periods</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The number of trading periods in a year, used for annualizing the
volatility. The default is 252.</p>
            </div>
          </td>
          <td>
                <code>252</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_drop_nulls</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, null values will be dropped from the result.
The default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_avg_trading_days</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, the average number of trading days will be used when
calculating the window size. The default is True.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_returns</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the returns. This parameter is used
when <code>data</code> is a DataFrame or LazyFrame. The default is "log_returns".</p>
            </div>
          </td>
          <td>
                <code>&#39;log_returns&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>Union[<span title="polars.DataFrame">DataFrame</span>, <span title="polars.LazyFrame">LazyFrame</span>, <span title="polars.Series">Series</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data structure with an additional column for the rolling
standard deviation of returns, or the modified Series with the rolling
standard deviation values.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/volatility/realized_volatility_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">std</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">trading_periods</span><span class="o">=</span><span class="mi">252</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_column_name_returns</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log_returns&quot;</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || **Command: _std**.</span>

<span class="sd">    This function computes the standard deviation of returns, which is a common</span>
<span class="sd">    measure of volatility.It calculates the rolling standard deviation for a</span>
<span class="sd">    given window size, optionally adjusting for the average number of trading</span>
<span class="sd">    days and scaling the result to an annualized volatility percentage.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : Union[pl.DataFrame, pl.LazyFrame, pl.Series]</span>
<span class="sd">        The input data containing the returns. It can be a DataFrame, LazyFrame,</span>
<span class="sd">        or Series.</span>
<span class="sd">    window : str, optional</span>
<span class="sd">        The rolling window size for calculating the standard deviation.</span>
<span class="sd">        The default is &quot;1m&quot; (one month).</span>
<span class="sd">    trading_periods : int, optional</span>
<span class="sd">        The number of trading periods in a year, used for annualizing the</span>
<span class="sd">        volatility. The default is 252.</span>
<span class="sd">    _drop_nulls : bool, optional</span>
<span class="sd">        If True, null values will be dropped from the result.</span>
<span class="sd">        The default is True.</span>
<span class="sd">    _avg_trading_days : bool, optional</span>
<span class="sd">        If True, the average number of trading days will be used when</span>
<span class="sd">        calculating the window size. The default is True.</span>
<span class="sd">    _column_name_returns : str, optional</span>
<span class="sd">        The name of the column containing the returns. This parameter is used</span>
<span class="sd">        when `data` is a DataFrame or LazyFrame. The default is &quot;log_returns&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Union[pl.DataFrame, pl.LazyFrame, pl.Series]</span>
<span class="sd">        The input data structure with an additional column for the rolling</span>
<span class="sd">        standard deviation of returns, or the modified Series with the rolling</span>
<span class="sd">        standard deviation values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">window_timedelta</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
        <span class="n">window</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="o">=</span><span class="n">_avg_trading_days</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">rolling_std</span><span class="p">(</span>
            <span class="n">window_size</span><span class="o">=</span><span class="n">window_timedelta</span><span class="o">.</span><span class="n">days</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span>
        <span class="p">)</span>
    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>

    <span class="c1"># convert window_timedelta to days to use fixed window</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_returns</span><span class="p">)</span><span class="o">.</span><span class="n">rolling_std_by</span><span class="p">(</span>
                <span class="n">window_size</span><span class="o">=</span><span class="n">window_timedelta</span><span class="p">,</span>
                <span class="n">min_periods</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>  <span class="c1"># using min_periods=2, bc if min_periods=1, the first value will be 0.</span>
                <span class="n">by</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">trading_periods</span><span class="p">)</span>
            <span class="o">*</span> <span class="mi">100</span>
        <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;std_volatility_pct_</span><span class="si">{</span><span class="n">window_timedelta</span><span class="o">.</span><span class="n">days</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span>
            <span class="n">subset</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;std_volatility_pct_</span><span class="si">{</span><span class="n">window_timedelta</span><span class="o">.</span><span class="n">days</span><span class="si">}</span><span class="s2">D&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers.parkinson" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.volatility.realized_volatility_helpers.parkinson</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.parkinson" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">parkinson</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">_column_name_high</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="n">_column_name_low</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Calculate Parkinson's volatility over a specified window.</p>
<p>Parkinson's volatility is a measure that uses the stock's high and low prices
of the day rather than just close to close prices. It is particularly useful
for capturing large price movements during the day.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data containing the stock prices.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>window</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The rolling window size for calculating volatility, by default 30.</p>
            </div>
          </td>
          <td>
                <code>&#39;1m&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>trading_periods</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The number of trading periods in a year, by default 252.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_high</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the high prices, by default "high".</p>
            </div>
          </td>
          <td>
                <code>&#39;high&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_low</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the low prices, by default "low".</p>
            </div>
          </td>
          <td>
                <code>&#39;low&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_drop_nulls</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to drop null values from the result, by default True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_avg_trading_days</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to use the average number of trading days when calculating the
window size, by default True.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The calculated Parkinson's volatility, with an additional column
"parkinson_volatility_pct_{window_int}D"
indicating the percentage volatility.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>This function requires the input data to have 'high' and 'low' columns to
calculate
the logarithm of their ratio, which is squared and scaled by a constant to
estimate
volatility. The result is then annualized and expressed as a percentage.</p>
</details>
<details class="usage" open>
  <summary>Usage</summary>
  <p>If you pass <code>"1m</code> as a <code>window</code> argument and  <code>_avg_trading_days=False</code>.
The result will be <code>30</code>. If <code>_avg_trading_days=True</code>, the result will be
<code>21</code>.</p>
</details>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;high&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">120</span><span class="p">,</span> <span class="mi">125</span><span class="p">],</span> <span class="s1">&#39;low&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">115</span><span class="p">,</span> <span class="mi">120</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_parkinson</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">A DataFrame with the calculated Parkinson&#39;s volatility.</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/volatility/realized_volatility_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">parkinson</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">_column_name_high</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="n">_column_name_low</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate Parkinson&#39;s volatility over a specified window.</span>

<span class="sd">    Parkinson&#39;s volatility is a measure that uses the stock&#39;s high and low prices</span>
<span class="sd">    of the day rather than just close to close prices. It is particularly useful</span>
<span class="sd">    for capturing large price movements during the day.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The input data containing the stock prices.</span>
<span class="sd">    window : int, optional</span>
<span class="sd">        The rolling window size for calculating volatility, by default 30.</span>
<span class="sd">    trading_periods : int, optional</span>
<span class="sd">        The number of trading periods in a year, by default 252.</span>
<span class="sd">    _column_name_high : str, optional</span>
<span class="sd">        The name of the column containing the high prices, by default &quot;high&quot;.</span>
<span class="sd">    _column_name_low : str, optional</span>
<span class="sd">        The name of the column containing the low prices, by default &quot;low&quot;.</span>
<span class="sd">    _drop_nulls : bool, optional</span>
<span class="sd">        Whether to drop null values from the result, by default True.</span>
<span class="sd">    _avg_trading_days : bool, optional</span>
<span class="sd">        Whether to use the average number of trading days when calculating the</span>
<span class="sd">        window size, by default True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The calculated Parkinson&#39;s volatility, with an additional column</span>
<span class="sd">        &quot;parkinson_volatility_pct_{window_int}D&quot;</span>
<span class="sd">        indicating the percentage volatility.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function requires the input data to have &#39;high&#39; and &#39;low&#39; columns to</span>
<span class="sd">    calculate</span>
<span class="sd">    the logarithm of their ratio, which is squared and scaled by a constant to</span>
<span class="sd">    estimate</span>
<span class="sd">    volatility. The result is then annualized and expressed as a percentage.</span>

<span class="sd">    Usage</span>
<span class="sd">    -----</span>
<span class="sd">    If you pass `&quot;1m` as a `window` argument and  `_avg_trading_days=False`.</span>
<span class="sd">    The result will be `30`. If `_avg_trading_days=True`, the result will be</span>
<span class="sd">    `21`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; data = pl.DataFrame({&#39;high&#39;: [120, 125], &#39;low&#39;: [115, 120]})</span>
<span class="sd">    &gt;&gt;&gt; _parkinson(data)</span>
<span class="sd">    A DataFrame with the calculated Parkinson&#39;s volatility.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>

    <span class="n">var1</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="mf">4.0</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mf">2.0</span><span class="p">))</span>
    <span class="n">var2</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">select</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_high</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_low</span><span class="p">))</span><span class="o">.</span><span class="n">log</span><span class="p">())</span>
        <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
        <span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">rs</span> <span class="o">=</span> <span class="n">var1</span> <span class="o">*</span> <span class="n">var2</span><span class="o">**</span><span class="mi">2</span>

    <span class="n">window_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
        <span class="n">window</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="o">=</span><span class="n">_avg_trading_days</span>
    <span class="p">)</span><span class="o">.</span><span class="n">days</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span>
            <span class="n">rs</span><span class="o">.</span><span class="n">rolling_map</span><span class="p">(</span><span class="n">_annual_vol</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="n">window_int</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="o">*</span> <span class="mi">100</span>
        <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;parkinson_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span>
            <span class="n">subset</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;parkinson_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers.garman_klass" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.volatility.realized_volatility_helpers.garman_klass</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.garman_klass" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">garman_klass</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">_column_name_high</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="n">_column_name_low</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="n">_column_name_open</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="n">_column_name_close</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || <strong>Command: _garman_klass</strong>.</p>
<p>Calculates the Garman-Klass volatility for a given dataset.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data containing the price information.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The rolling window size for volatility calculation, by default "1m".</p>
            </div>
          </td>
          <td>
                <code>&#39;1m&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_high</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the high prices, by default "high".</p>
            </div>
          </td>
          <td>
                <code>&#39;high&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_low</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the low prices, by default "low".</p>
            </div>
          </td>
          <td>
                <code>&#39;low&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_open</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the opening prices, by default "open".</p>
            </div>
          </td>
          <td>
                <code>&#39;open&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_close</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the adjusted closing prices, by
default "close".</p>
            </div>
          </td>
          <td>
                <code>&#39;close&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_drop_nulls</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to drop null values from the result, by default True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_avg_trading_days</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to use the average number of trading days when calculating the
window size, by default True.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.Series">Series</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The calculated Garman-Klass volatility, with an additional column
"volatility_pct" indicating the percentage volatility.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>Garman-Klass volatility extends Parkinson’s volatility by considering the
opening and closing prices in addition to the high and low prices. This
approach provides a more accurate estimation of volatility, especially in
markets with significant activity at the opening and closing of trading
sessions.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/volatility/realized_volatility_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">garman_klass</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">_column_name_high</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="n">_column_name_low</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
    <span class="n">_column_name_open</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span>
    <span class="n">_column_name_close</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;close&quot;</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || **Command: _garman_klass**.</span>

<span class="sd">    Calculates the Garman-Klass volatility for a given dataset.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The input data containing the price information.</span>
<span class="sd">    window : str, optional</span>
<span class="sd">        The rolling window size for volatility calculation, by default &quot;1m&quot;.</span>
<span class="sd">    _column_name_high : str, optional</span>
<span class="sd">        The name of the column containing the high prices, by default &quot;high&quot;.</span>
<span class="sd">    _column_name_low : str, optional</span>
<span class="sd">        The name of the column containing the low prices, by default &quot;low&quot;.</span>
<span class="sd">    _column_name_open : str, optional</span>
<span class="sd">        The name of the column containing the opening prices, by default &quot;open&quot;.</span>
<span class="sd">    _column_name_close : str, optional</span>
<span class="sd">        The name of the column containing the adjusted closing prices, by</span>
<span class="sd">        default &quot;close&quot;.</span>
<span class="sd">    _drop_nulls : bool, optional</span>
<span class="sd">        Whether to drop null values from the result, by default True.</span>
<span class="sd">    _avg_trading_days : bool, optional</span>
<span class="sd">        Whether to use the average number of trading days when calculating the</span>
<span class="sd">        window size, by default True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame | pl.LazyFrame | pl.Series</span>
<span class="sd">        The calculated Garman-Klass volatility, with an additional column</span>
<span class="sd">        &quot;volatility_pct&quot; indicating the percentage volatility.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Garman-Klass volatility extends Parkinson’s volatility by considering the</span>
<span class="sd">    opening and closing prices in addition to the high and low prices. This</span>
<span class="sd">    approach provides a more accurate estimation of volatility, especially in</span>
<span class="sd">    markets with significant activity at the opening and closing of trading</span>
<span class="sd">    sessions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
    <span class="n">log_hi_lo</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">select</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_high</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_low</span><span class="p">))</span><span class="o">.</span><span class="n">log</span><span class="p">())</span>
        <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
        <span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">log_close_open</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">select</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_close</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">))</span><span class="o">.</span><span class="n">log</span><span class="p">())</span>
        <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
        <span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">rs</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">log_hi_lo</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">log_close_open</span><span class="o">**</span><span class="mi">2</span>

    <span class="n">window_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
        <span class="n">window</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="o">=</span><span class="n">_avg_trading_days</span>
    <span class="p">)</span><span class="o">.</span><span class="n">days</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span>
            <span class="n">rs</span><span class="o">.</span><span class="n">rolling_map</span><span class="p">(</span><span class="n">_annual_vol</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="n">window_int</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="o">*</span> <span class="mi">100</span>
        <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;gk_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;gk_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers.hodges_tompkins" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.volatility.realized_volatility_helpers.hodges_tompkins</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.hodges_tompkins" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">hodges_tompkins</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">trading_periods</span><span class="o">=</span><span class="mi">252</span><span class="p">,</span> <span class="n">_column_name_returns</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;log_returns&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || <strong>Command: _hodges_tompkins</strong>.</p>
<p>Hodges-Tompkins volatility is a bias correction for estimation using an
overlapping data sample that produces unbiased estimates and a
substantial gain in efficiency.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/volatility/realized_volatility_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">hodges_tompkins</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">trading_periods</span><span class="o">=</span><span class="mi">252</span><span class="p">,</span>
    <span class="n">_column_name_returns</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log_returns&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || **Command: _hodges_tompkins**.</span>

<span class="sd">    Hodges-Tompkins volatility is a bias correction for estimation using an</span>
<span class="sd">    overlapping data sample that produces unbiased estimates and a</span>
<span class="sd">    substantial gain in efficiency.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># When calculating rv_mean, need a different adjustment factor,</span>
    <span class="c1"># so window doesn&#39;t influence the Volatility_mean</span>
    <span class="c1"># RV_MEAN</span>

    <span class="c1"># Define Window Size</span>
    <span class="n">window_timedelta</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
        <span class="n">window</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="o">=</span><span class="n">_avg_trading_days</span>
    <span class="p">)</span>
    <span class="c1"># Calculate STD, assigned to `vol`</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">rolling_std</span><span class="p">(</span><span class="n">window_size</span><span class="o">=</span><span class="n">window_timedelta</span><span class="o">.</span><span class="n">days</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sort_cols</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_returns</span><span class="p">)</span><span class="o">.</span><span class="n">rolling_std_by</span><span class="p">(</span>
                <span class="n">window_size</span><span class="o">=</span><span class="n">window_timedelta</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s2">&quot;date&quot;</span>
            <span class="p">)</span>
            <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">trading_periods</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="c1"># Assign window size to h for adjustment</span>
    <span class="n">h</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">window_timedelta</span><span class="o">.</span><span class="n">days</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">len</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="n">h</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">adj_factor</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="p">(</span><span class="n">h</span> <span class="o">/</span> <span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="p">((</span><span class="n">h</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">n</span><span class="o">**</span><span class="mi">2</span><span class="p">)))</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">vol</span> <span class="o">*</span> <span class="n">adj_factor</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">((</span><span class="n">vol</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span> <span class="o">*</span> <span class="n">adj_factor</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
            <span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
            <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ht_volatility_pct_</span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ht_volatility_pct_</span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers.rogers_satchell" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.volatility.realized_volatility_helpers.rogers_satchell</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.rogers_satchell" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">rogers_satchell</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">_column_name_high</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="n">_column_name_low</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="n">_column_name_open</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="n">_column_name_close</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || <strong>Command: _rogers_satchell</strong>.</p>
<p>Rogers-Satchell is an estimator for measuring the volatility of
securities with an average return not equal to zero. Unlike Parkinson
and Garman-Klass estimators, Rogers-Satchell incorporates a drift term
(mean return not equal to zero). This function calculates the
Rogers-Satchell volatility estimator over a specified window and optionally
drops null values from the result.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data for which to calculate the Rogers-Satchell volatility
estimator. This can be either a DataFrame or a LazyFrame. There need to
be OHLC columns present in the data.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The window over which to calculate the volatility estimator. The
window is specified as a string, such as "1m" for one month.</p>
            </div>
          </td>
          <td>
                <code>&#34;1m&#34;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_high</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column representing the high prices in the data.</p>
            </div>
          </td>
          <td>
                <code>&#34;high&#34;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_low</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column representing the low prices in the data.</p>
            </div>
          </td>
          <td>
                <code>&#34;low&#34;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_open</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column representing the opening prices in the data.</p>
            </div>
          </td>
          <td>
                <code>&#34;open&#34;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_close</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column representing the adjusted closing prices in the
data.</p>
            </div>
          </td>
          <td>
                <code>&#34;close&#34;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_drop_nulls</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to drop null values from the result. If True, rows with null
values in the calculated volatility column will be removed from the
output.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_avg_trading_days</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Indicates whether to use the average number of trading days per window.
This affects how the window size is interpreted. i.e instead of "1mo"
returning <code>timedelta(days=31)</code>, it will return <code>timedelta(days=21)</code>.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data with an additional column containing the calculated
Rogers-Satchell volatility estimator. The return type matches the input
type (DataFrame or LazyFrame).</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/volatility/realized_volatility_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">rogers_satchell</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">_column_name_high</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="n">_column_name_low</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
    <span class="n">_column_name_open</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span>
    <span class="n">_column_name_close</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;close&quot;</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || **Command: _rogers_satchell**.</span>

<span class="sd">    Rogers-Satchell is an estimator for measuring the volatility of</span>
<span class="sd">    securities with an average return not equal to zero. Unlike Parkinson</span>
<span class="sd">    and Garman-Klass estimators, Rogers-Satchell incorporates a drift term</span>
<span class="sd">    (mean return not equal to zero). This function calculates the</span>
<span class="sd">    Rogers-Satchell volatility estimator over a specified window and optionally</span>
<span class="sd">    drops null values from the result.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The input data for which to calculate the Rogers-Satchell volatility</span>
<span class="sd">        estimator. This can be either a DataFrame or a LazyFrame. There need to</span>
<span class="sd">        be OHLC columns present in the data.</span>
<span class="sd">    window : str, default &quot;1m&quot;</span>
<span class="sd">        The window over which to calculate the volatility estimator. The</span>
<span class="sd">        window is specified as a string, such as &quot;1m&quot; for one month.</span>
<span class="sd">    _column_name_high : str, default &quot;high&quot;</span>
<span class="sd">        The name of the column representing the high prices in the data.</span>
<span class="sd">    _column_name_low : str, default &quot;low&quot;</span>
<span class="sd">        The name of the column representing the low prices in the data.</span>
<span class="sd">    _column_name_open : str, default &quot;open&quot;</span>
<span class="sd">        The name of the column representing the opening prices in the data.</span>
<span class="sd">    _column_name_close : str, default &quot;close&quot;</span>
<span class="sd">        The name of the column representing the adjusted closing prices in the</span>
<span class="sd">        data.</span>
<span class="sd">    _drop_nulls : bool, default True</span>
<span class="sd">        Whether to drop null values from the result. If True, rows with null</span>
<span class="sd">        values in the calculated volatility column will be removed from the</span>
<span class="sd">        output.</span>
<span class="sd">    _avg_trading_days : bool, default True</span>
<span class="sd">        Indicates whether to use the average number of trading days per window.</span>
<span class="sd">        This affects how the window size is interpreted. i.e instead of &quot;1mo&quot;</span>
<span class="sd">        returning `timedelta(days=31)`, it will return `timedelta(days=21)`.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The input data with an additional column containing the calculated</span>
<span class="sd">        Rogers-Satchell volatility estimator. The return type matches the input</span>
<span class="sd">        type (DataFrame or LazyFrame).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if all required columns are present in the DataFrame</span>
    <span class="n">_check_required_columns</span><span class="p">(</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">_column_name_high</span><span class="p">,</span>
        <span class="n">_column_name_low</span><span class="p">,</span>
        <span class="n">_column_name_open</span><span class="p">,</span>
        <span class="n">_column_name_close</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
    <span class="c1"># assign window</span>
    <span class="n">window_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
        <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span>
        <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">_avg_trading_days</span><span class="o">=</span><span class="n">_avg_trading_days</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">days</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_high</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">))</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_ho&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_low</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">))</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_lo&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_close</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">))</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_co&quot;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_ho&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_ho&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_co&quot;</span><span class="p">))</span>
                <span class="o">+</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_lo&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_lo&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_co&quot;</span><span class="p">))</span>
            <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;rs&quot;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;rs&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rolling_map</span><span class="p">(</span>
                <span class="n">_annual_vol</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="n">window_int</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span>
            <span class="p">)</span>
            <span class="o">*</span> <span class="mi">100</span>
        <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;rs_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;rs_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers.yang_zhang" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.volatility.realized_volatility_helpers.yang_zhang</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.yang_zhang" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">yang_zhang</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">trading_periods</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">252</span><span class="p">,</span> <span class="n">_column_name_high</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="n">_column_name_low</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="n">_column_name_open</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="n">_column_name_close</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || <strong>Command: _yang_zhang</strong>.</p>
<p>Yang-Zhang volatility is the combination of the overnight
(close-to-open volatility), a weighted average of the Rogers-Satchell
volatility and the day’s open-to-close volatility.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/volatility/realized_volatility_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">yang_zhang</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">trading_periods</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">252</span><span class="p">,</span>
    <span class="n">_column_name_high</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="n">_column_name_low</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
    <span class="n">_column_name_open</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span>
    <span class="n">_column_name_close</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;close&quot;</span><span class="p">,</span>
    <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || **Command: _yang_zhang**.</span>

<span class="sd">    Yang-Zhang volatility is the combination of the overnight</span>
<span class="sd">    (close-to-open volatility), a weighted average of the Rogers-Satchell</span>
<span class="sd">    volatility and the day’s open-to-close volatility.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># check required columns</span>
    <span class="n">_check_required_columns</span><span class="p">(</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">_column_name_high</span><span class="p">,</span>
        <span class="n">_column_name_low</span><span class="p">,</span>
        <span class="n">_column_name_open</span><span class="p">,</span>
        <span class="n">_column_name_close</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>

    <span class="c1"># assign window</span>
    <span class="n">window_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
        <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span>
        <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">_avg_trading_days</span><span class="o">=</span><span class="n">_avg_trading_days</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">days</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_high</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">))</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_ho&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_low</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">))</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_lo&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_close</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">))</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_co&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_close</span><span class="p">)</span><span class="o">.</span><span class="n">shift</span><span class="p">())</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_oc&quot;</span><span class="p">),</span>
                <span class="p">(</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_close</span><span class="p">)</span>
                    <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_close</span><span class="p">)</span><span class="o">.</span><span class="n">shift</span><span class="p">()</span>
                <span class="p">)</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_cc&quot;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_oc&quot;</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_oc_sq&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_cc&quot;</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_cc_sq&quot;</span><span class="p">),</span>
                <span class="p">(</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_ho&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_ho&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_co&quot;</span><span class="p">))</span>
                    <span class="o">+</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_lo&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_lo&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_co&quot;</span><span class="p">))</span>
                <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;rs&quot;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="n">k</span> <span class="o">=</span> <span class="mf">0.34</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.34</span> <span class="o">+</span> <span class="p">(</span><span class="n">window_int</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">window_int</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">_yang_zhang_engine</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="n">window_int</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;open_vol&quot;</span><span class="p">)</span>
                    <span class="o">+</span> <span class="n">k</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;close_vol&quot;</span><span class="p">)</span>
                    <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">k</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;window_rs&quot;</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">sqrt</span><span class="p">()</span>
                <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">trading_periods</span><span class="p">)</span>
                <span class="o">*</span> <span class="mi">100</span>
            <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;yz_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">select</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="s2">&quot;log_ho&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;log_lo&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;log_co&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;log_oc&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;log_cc&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;log_oc_sq&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;log_cc_sq&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;rs&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;close_vol&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;open_vol&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;window_rs&quot;</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;yz_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers.squared_returns" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.volatility.realized_volatility_helpers.squared_returns</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.squared_returns" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">squared_returns</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">trading_periods</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">252</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_column_name_returns</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;log_returns&#39;</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Calculate squared returns over a rolling window.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data containing the price information.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The rolling window size for calculating squared returns, by default "1m".</p>
            </div>
          </td>
          <td>
                <code>&#39;1m&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>trading_periods</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The number of trading periods in a year, used for scaling the result.
The default is 252.</p>
            </div>
          </td>
          <td>
                <code>252</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_drop_nulls</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to drop null values from the result, by default True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_returns</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the price data, by default "close".</p>
            </div>
          </td>
          <td>
                <code>&#39;log_returns&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data structure with an additional column for the rolling
squared returns.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/volatility/realized_volatility_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">squared_returns</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">trading_periods</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">252</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_column_name_returns</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log_returns&quot;</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate squared returns over a rolling window.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The input data containing the price information.</span>
<span class="sd">    window : str, optional</span>
<span class="sd">        The rolling window size for calculating squared returns, by default &quot;1m&quot;.</span>
<span class="sd">    trading_periods : int, optional</span>
<span class="sd">        The number of trading periods in a year, used for scaling the result.</span>
<span class="sd">        The default is 252.</span>
<span class="sd">    _drop_nulls : bool, optional</span>
<span class="sd">        Whether to drop null values from the result, by default True.</span>
<span class="sd">    _column_name_returns : str, optional</span>
<span class="sd">        The name of the column containing the price data, by default &quot;close&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The input data structure with an additional column for the rolling</span>
<span class="sd">        squared returns.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_check_required_columns</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">_column_name_returns</span><span class="p">)</span>

    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>

    <span class="c1"># assign window</span>
    <span class="n">window_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
        <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span>
        <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">_avg_trading_days</span><span class="o">=</span><span class="n">_avg_trading_days</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">days</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_returns</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;sq_log_returns_pct&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="c1"># Calculate rolling squared returns</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;sq_log_returns_pct&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">rolling_mean</span><span class="p">(</span><span class="n">window_size</span><span class="o">=</span><span class="n">window_int</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;sq_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;sq_log_returns_pct&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;sq_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.toolbox.technical.volatility.realized_volatility_model" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.technical.volatility.realized_volatility_model</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_model" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || <strong>Command: calc_realized_volatility</strong>.</p>
<p>A command to generate Realized Volatility for any time series.
A complete set of volatility estimators based on Euan Sinclair's Volatility Trading</p>

  

  <div class="doc doc-children">




















































<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_model.calc_realized_volatility" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.toolbox.technical.volatility.realized_volatility_model.calc_realized_volatility</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_model.calc_realized_volatility" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">calc_realized_volatility</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;std&#39;</span><span class="p">,</span> <span class="s1">&#39;parkinson&#39;</span><span class="p">,</span> <span class="s1">&#39;garman_klass&#39;</span><span class="p">,</span> <span class="s1">&#39;gk&#39;</span><span class="p">,</span> <span class="s1">&#39;hodges_tompkins&#39;</span><span class="p">,</span> <span class="s1">&#39;ht&#39;</span><span class="p">,</span> <span class="s1">&#39;rogers_satchell&#39;</span><span class="p">,</span> <span class="s1">&#39;rs&#39;</span><span class="p">,</span> <span class="s1">&#39;yang_zhang&#39;</span><span class="p">,</span> <span class="s1">&#39;yz&#39;</span><span class="p">,</span> <span class="s1">&#39;squared_returns&#39;</span><span class="p">,</span> <span class="s1">&#39;sq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;std&#39;</span><span class="p">,</span> <span class="n">grouped_mean</span><span class="p">:</span> <span class="n">list</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_trading_periods</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">252</span><span class="p">,</span> <span class="n">_column_name_returns</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;log_returns&#39;</span><span class="p">,</span> <span class="n">_column_name_close</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="n">_column_name_high</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="n">_column_name_low</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="n">_column_name_open</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || <strong>Command: calc_realized_volatility</strong>.</p>
<p>Calculates the Realized Volatility for a given time series based on the
provided standard and extra parameters. This function adds ONE rolling
volatility column to the input DataFrame.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The time series data for which to calculate the Realized Volatility.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The window size for a rolling volatility calculation, default is <code>"1m"</code>
(1 month).</p>
            </div>
          </td>
          <td>
                <code>&#39;1m&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>method</code></td>
          <td>
                <code><span title="typing.Literal">Literal</span>[&#39;std&#39;, &#39;parkinson&#39;, &#39;garman_klass&#39;, &#39;hodges_tompkins&#39;, &#39;rogers_satchell&#39;, &#39;yang_zhang&#39;, &#39;squared_returns&#39;]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The volatility estimator to use. You can also use abbreviations to
access the same methods. The abbreviations are: <code>gk</code> for <code>garman_klass</code>,
<code>ht</code> for <code>hodges_tompkins</code>, <code>rs</code> for <code>rogers_satchell</code>, <code>yz</code> for
<code>yang_zhang</code>, <code>sq</code> for <code>squared_returns</code>.</p>
            </div>
          </td>
          <td>
                <code>&#39;std&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>grouped_mean</code></td>
          <td>
                <code>list[int] | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of window sizes to use for calculating volatility. If provided,
the volatility method will be calculated across these various windows,
and then an averaged value of all the windows will be returned. If <code>None</code>,
a single window size specified by <code>window</code> parameter will be used.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_sort</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, the data will be sorted before calculation. Default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_trading_periods</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The number of trading periods in a year, default is 252 (the typical
number of trading days in a year).</p>
            </div>
          </td>
          <td>
                <code>252</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_returns</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the returns. Default is "log_returns".</p>
            </div>
          </td>
          <td>
                <code>&#39;log_returns&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_close</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the close prices. Default is "close".</p>
            </div>
          </td>
          <td>
                <code>&#39;close&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_high</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the high prices. Default is "high".</p>
            </div>
          </td>
          <td>
                <code>&#39;high&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_low</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the low prices. Default is "low".</p>
            </div>
          </td>
          <td>
                <code>&#39;low&#39;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>_column_name_open</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the open prices. Default is "open".</p>
            </div>
          </td>
          <td>
                <code>&#39;open&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>VolatilityData</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The calculated Realized Volatility data for the given time series.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <ul>
<li>
<p>Rolling calculations are used to show a time series of recent volatility
that captures only a certain number of data points. The window size is
used to determine the number of data points to use in the calculation. We do
this because when looking at the volatility of a stock, you get a better
insight (more granular) into the characteristics of the volatility seeing how 1-month or
3-month rolling volatility looked over time.</p>
</li>
<li>
<p>This function does not accept <code>pl.Series</code> because the methods used to
calculate volatility require, high, low, close, open columns for the data.
It would be too cumbersome to pass each series needed for the calculation
as a separate argument. Therefore, the function only accepts <code>pl.DataFrame</code>
or <code>pl.LazyFrame</code> as input.</p>
</li>
</ul>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/toolbox/technical/volatility/realized_volatility_model.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calc_realized_volatility</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">method</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span>  <span class="c1"># used to be rvol_method</span>
        <span class="s2">&quot;std&quot;</span><span class="p">,</span>
        <span class="s2">&quot;parkinson&quot;</span><span class="p">,</span>
        <span class="s2">&quot;garman_klass&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;hodges_tompkins&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ht&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rogers_satchell&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;yang_zhang&quot;</span><span class="p">,</span>
        <span class="s2">&quot;yz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;squared_returns&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sq&quot;</span><span class="p">,</span>
    <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="n">grouped_mean</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># used to be rv_mean</span>
    <span class="n">_trading_periods</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">252</span><span class="p">,</span>
    <span class="n">_column_name_returns</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log_returns&quot;</span><span class="p">,</span>
    <span class="n">_column_name_close</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;close&quot;</span><span class="p">,</span>
    <span class="n">_column_name_high</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="n">_column_name_low</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
    <span class="n">_column_name_open</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || **Command: calc_realized_volatility**.</span>

<span class="sd">    Calculates the Realized Volatility for a given time series based on the</span>
<span class="sd">    provided standard and extra parameters. This function adds ONE rolling</span>
<span class="sd">    volatility column to the input DataFrame.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The time series data for which to calculate the Realized Volatility.</span>
<span class="sd">    window : str</span>
<span class="sd">        The window size for a rolling volatility calculation, default is `&quot;1m&quot;`</span>
<span class="sd">        (1 month).</span>
<span class="sd">    method : Literal[&quot;std&quot;, &quot;parkinson&quot;, &quot;garman_klass&quot;, &quot;hodges_tompkins&quot;,&quot;rogers_satchell&quot;, &quot;yang_zhang&quot;, &quot;squared_returns&quot;]</span>
<span class="sd">        The volatility estimator to use. You can also use abbreviations to</span>
<span class="sd">        access the same methods. The abbreviations are: `gk` for `garman_klass`,</span>
<span class="sd">        `ht` for `hodges_tompkins`, `rs` for `rogers_satchell`, `yz` for</span>
<span class="sd">        `yang_zhang`, `sq` for `squared_returns`.</span>
<span class="sd">    grouped_mean : list[int] | None</span>
<span class="sd">        A list of window sizes to use for calculating volatility. If provided,</span>
<span class="sd">        the volatility method will be calculated across these various windows,</span>
<span class="sd">        and then an averaged value of all the windows will be returned. If `None`,</span>
<span class="sd">        a single window size specified by `window` parameter will be used.</span>
<span class="sd">    _sort : bool</span>
<span class="sd">        If True, the data will be sorted before calculation. Default is True.</span>
<span class="sd">    _trading_periods : int</span>
<span class="sd">        The number of trading periods in a year, default is 252 (the typical</span>
<span class="sd">        number of trading days in a year).</span>
<span class="sd">    _column_name_returns : str</span>
<span class="sd">        The name of the column containing the returns. Default is &quot;log_returns&quot;.</span>
<span class="sd">    _column_name_close : str</span>
<span class="sd">        The name of the column containing the close prices. Default is &quot;close&quot;.</span>
<span class="sd">    _column_name_high : str</span>
<span class="sd">        The name of the column containing the high prices. Default is &quot;high&quot;.</span>
<span class="sd">    _column_name_low : str</span>
<span class="sd">        The name of the column containing the low prices. Default is &quot;low&quot;.</span>
<span class="sd">    _column_name_open : str</span>
<span class="sd">        The name of the column containing the open prices. Default is &quot;open&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    VolatilityData</span>
<span class="sd">        The calculated Realized Volatility data for the given time series.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    - Rolling calculations are used to show a time series of recent volatility</span>
<span class="sd">    that captures only a certain number of data points. The window size is</span>
<span class="sd">    used to determine the number of data points to use in the calculation. We do</span>
<span class="sd">    this because when looking at the volatility of a stock, you get a better</span>
<span class="sd">    insight (more granular) into the characteristics of the volatility seeing how 1-month or</span>
<span class="sd">    3-month rolling volatility looked over time.</span>

<span class="sd">    - This function does not accept `pl.Series` because the methods used to</span>
<span class="sd">    calculate volatility require, high, low, close, open columns for the data.</span>
<span class="sd">    It would be too cumbersome to pass each series needed for the calculation</span>
<span class="sd">    as a separate argument. Therefore, the function only accepts `pl.DataFrame`</span>
<span class="sd">    or `pl.LazyFrame` as input.</span>
<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa: W505</span>
    <span class="c1"># Step 1: Get the correct realized volatility function =====================</span>
    <span class="n">func</span> <span class="o">=</span> <span class="n">VOLATILITY_METHODS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">func</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Volatility method: &#39;</span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">&#39; is not supported.&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="c1"># Step 2: Get the names of the parameters that the function accepts ========</span>
    <span class="n">func_params</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">func</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span>

    <span class="c1"># Step 3: Filter out the parameters not accepted by the function ===========</span>
    <span class="n">args_to_pass</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">func_params</span>
    <span class="p">}</span>

    <span class="c1"># Step 4: Calculate Realized Volatility ====================================</span>
    <span class="k">if</span> <span class="n">grouped_mean</span><span class="p">:</span>
        <span class="c1"># calculate volatility over multiple windows and average the result, add to a new column</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;🚧 WIP!&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">**</span><span class="n">args_to_pass</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h3 id="humbldata.toolbox.quantitative" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox.quantitative</span>


<a href="#humbldata.toolbox.quantitative" class="headerlink" title="Permanent link">¤</a></h3>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Quantitative.</p>
<p>Quantitative indicators rely on statistical transformations of time series data.</p>

  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h2 id="humbldata.core" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core</span>


<a href="#humbldata.core" class="headerlink" title="Permanent link">¤</a></h2>

  <div class="doc doc-contents ">
  
      <p>The <code>core</code> module to contain logic &amp; functions used in controllers.</p>
<p>This module is intended to contain sub-modules and functions that are not
directly utilized from the package, but rather used in building the package
itself. This means that the core module should not contain any code that is
specific to the package's use case, but rather should be generic and reusable
in other contexts.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h3 id="humbldata.core.standard_models" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models</span>


<a href="#humbldata.core.standard_models" class="headerlink" title="Permanent link">¤</a></h3>

  <div class="doc doc-contents ">
  
      <p>Models to represent core data structures of the Standardization Framework.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h4 id="humbldata.core.standard_models.abstract" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.abstract</span>


<a href="#humbldata.core.standard_models.abstract" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">
  
      <p>Abstract core DATA MODELS to be inherited by other models.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h5 id="humbldata.core.standard_models.abstract.errors" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.abstract.errors</span>


<a href="#humbldata.core.standard_models.abstract.errors" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p>An ABSTRACT DATA MODEL to be inherited by custom errors.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-class">



<h6 id="humbldata.core.standard_models.abstract.errors.HumblDataError" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.abstract.errors.HumblDataError</span>


<a href="#humbldata.core.standard_models.abstract.errors.HumblDataError" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code>BaseException</code></p>

  
      <p>Base Error for HumblData logic.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/abstract/errors.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">HumblDataError</span><span class="p">(</span><span class="ne">BaseException</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base Error for HumblData logic.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="ne">Exception</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">original</span> <span class="o">=</span> <span class="n">original</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">original</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





  </div>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.core.standard_models.abstract.query_params" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.abstract.query_params</span>


<a href="#humbldata.core.standard_models.abstract.query_params" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p>A wrapper around OpenBB QueryParams Standardized Model to use with humbldata.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-class">



<h6 id="humbldata.core.standard_models.abstract.query_params.QueryParams" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.abstract.query_params.QueryParams</span>


<a href="#humbldata.core.standard_models.abstract.query_params.QueryParams" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="openbb_core.provider.abstract.query_params.QueryParams">QueryParams</span></code></p>

  
      <p>An abstract standard_model to represent a base QueryParams Data.</p>
<p>QueryParams model should be used to define the query parameters for a
<code>context.category.command</code> call.</p>
<p>This QueryParams model is meant to be inherited and built upon by other
standard_models for a specific context.</p>



<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">EquityHistoricalQueryParams</span><span class="p">(</span><span class="n">QueryParams</span><span class="p">):</span>

    <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
    <span class="n">interval</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;interval&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">start_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">dateType</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;start_date&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">end_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">dateType</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;end_date&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">,</span> <span class="n">check_fields</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">upper_symbol</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">v</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">return</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">symbol</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">v</span><span class="p">)])</span>
</code></pre></div>
<p>This would create a class that would be used to query historical price data
for equities from any given command.</p>
<p>This could then be used to create a
<code>MandelbrotChannelEquityHistoricalQueryParams</code> that would define what query
parameters are needed for the Mandelbrot Channel command.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/abstract/query_params.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">QueryParams</span><span class="p">(</span><span class="n">OpenBBQueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An abstract standard_model to represent a base QueryParams Data.</span>

<span class="sd">    QueryParams model should be used to define the query parameters for a</span>
<span class="sd">    `context.category.command` call.</span>

<span class="sd">    This QueryParams model is meant to be inherited and built upon by other</span>
<span class="sd">    standard_models for a specific context.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    ```py</span>
<span class="sd">    class EquityHistoricalQueryParams(QueryParams):</span>

<span class="sd">        symbol: str = Field(description=QUERY_DESCRIPTIONS.get(&quot;symbol&quot;, &quot;&quot;))</span>
<span class="sd">        interval: Optional[str] = Field(</span>
<span class="sd">            default=&quot;1d&quot;,</span>
<span class="sd">            description=QUERY_DESCRIPTIONS.get(&quot;interval&quot;, &quot;&quot;),</span>
<span class="sd">        )</span>
<span class="sd">        start_date: Optional[dateType] = Field(</span>
<span class="sd">            default=None,</span>
<span class="sd">            description=QUERY_DESCRIPTIONS.get(&quot;start_date&quot;, &quot;&quot;),</span>
<span class="sd">        )</span>
<span class="sd">        end_date: Optional[dateType] = Field(</span>
<span class="sd">            default=None,</span>
<span class="sd">            description=QUERY_DESCRIPTIONS.get(&quot;end_date&quot;, &quot;&quot;),</span>
<span class="sd">        )</span>

<span class="sd">        @field_validator(&quot;symbol&quot;, mode=&quot;before&quot;, check_fields=False)</span>
<span class="sd">        @classmethod</span>
<span class="sd">        def upper_symbol(cls, v: Union[str, List[str], Set[str]]):</span>
<span class="sd">            if isinstance(v, str):</span>
<span class="sd">                return v.upper()</span>
<span class="sd">            return &quot;,&quot;.join([symbol.upper() for symbol in list(v)])</span>
<span class="sd">    ```</span>

<span class="sd">    This would create a class that would be used to query historical price data</span>
<span class="sd">    for equities from any given command.</span>

<span class="sd">    This could then be used to create a</span>
<span class="sd">    `MandelbrotChannelEquityHistoricalQueryParams` that would define what query</span>
<span class="sd">    parameters are needed for the Mandelbrot Channel command.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.core.standard_models.abstract.singleton" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.abstract.singleton</span>


<a href="#humbldata.core.standard_models.abstract.singleton" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p>An ABSTRACT DATA MODEL, Singleton, to represent a class that should only have one instance.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-class">



<h6 id="humbldata.core.standard_models.abstract.singleton.SingletonMeta" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.abstract.singleton.SingletonMeta</span>


<a href="#humbldata.core.standard_models.abstract.singleton.SingletonMeta" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code>type</code>, <code><span title="typing.Generic">Generic</span>[<span title="humbldata.core.standard_models.abstract.singleton.T">T</span>]</code></p>

  
      <p>SingletonMeta is a metaclass that creates a Singleton instance of a class.</p>
<p>Singleton design pattern restricts the instantiation of a class to a single
instance. This is useful when exactly one object is needed to coordinate
actions across the system.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/abstract/singleton.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SingletonMeta</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    SingletonMeta is a metaclass that creates a Singleton instance of a class.</span>

<span class="sd">    Singleton design pattern restricts the instantiation of a class to a single</span>
<span class="sd">    instance. This is useful when exactly one object is needed to coordinate</span>
<span class="sd">    actions across the system.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_instances</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="n">T</span><span class="p">,</span> <span class="n">T</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># type: ignore  # noqa: PGH003</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Override the __call__ method.</span>

<span class="sd">        If the class exists, otherwise creates a new instance and stores it in</span>
<span class="sd">        the _instances dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">cls</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">:</span>
            <span class="n">instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance</span>  <span class="c1"># type: ignore  # noqa: PGH003</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span>  <span class="c1"># type: ignore  # noqa: PGH003</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h7 id="humbldata.core.standard_models.abstract.singleton.SingletonMeta.__call__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.abstract.singleton.SingletonMeta.__call__</span>


<a href="#humbldata.core.standard_models.abstract.singleton.SingletonMeta.__call__" class="headerlink" title="Permanent link">¤</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__call__</span><span class="p">(</span><span class="o">*</span><span class="nf">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="humbldata.core.standard_models.abstract.singleton.T">T</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Override the <strong>call</strong> method.</p>
<p>If the class exists, otherwise creates a new instance and stores it in
the _instances dictionary.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/abstract/singleton.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Override the __call__ method.</span>

<span class="sd">    If the class exists, otherwise creates a new instance and stores it in</span>
<span class="sd">    the _instances dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">cls</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">:</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance</span>  <span class="c1"># type: ignore  # noqa: PGH003</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span>  <span class="c1"># type: ignore  # noqa: PGH003</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.core.standard_models.abstract.chart" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.abstract.chart</span>


<a href="#humbldata.core.standard_models.abstract.chart" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">







<div class="doc doc-object doc-class">



<h6 id="humbldata.core.standard_models.abstract.chart.ChartTemplate" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.abstract.chart.ChartTemplate</span>


<a href="#humbldata.core.standard_models.abstract.chart.ChartTemplate" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code>str</code>, <code><span title="enum.Enum">Enum</span></code></p>

  
      <p>Chart format.</p>
<p>Available options:
- plotly
- humbl_light
- humbl_dark
- plotly_light
- plotly_dark
- ggplot2
- seaborn
- simple_white
- presentation
- xgridoff
- ygridoff
- gridon
- none</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/abstract/chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ChartTemplate</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Chart format.</span>

<span class="sd">    Available options:</span>
<span class="sd">    - plotly</span>
<span class="sd">    - humbl_light</span>
<span class="sd">    - humbl_dark</span>
<span class="sd">    - plotly_light</span>
<span class="sd">    - plotly_dark</span>
<span class="sd">    - ggplot2</span>
<span class="sd">    - seaborn</span>
<span class="sd">    - simple_white</span>
<span class="sd">    - presentation</span>
<span class="sd">    - xgridoff</span>
<span class="sd">    - ygridoff</span>
<span class="sd">    - gridon</span>
<span class="sd">    - none</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">plotly</span> <span class="o">=</span> <span class="s2">&quot;plotly&quot;</span>
    <span class="n">humbl_light</span> <span class="o">=</span> <span class="s2">&quot;humbl_light&quot;</span>
    <span class="n">humbl_dark</span> <span class="o">=</span> <span class="s2">&quot;humbl_dark&quot;</span>
    <span class="n">plotly_light</span> <span class="o">=</span> <span class="s2">&quot;plotly_light&quot;</span>
    <span class="n">plotly_dark</span> <span class="o">=</span> <span class="s2">&quot;plotly_dark&quot;</span>
    <span class="n">ggplot2</span> <span class="o">=</span> <span class="s2">&quot;ggplot2&quot;</span>
    <span class="n">seaborn</span> <span class="o">=</span> <span class="s2">&quot;seaborn&quot;</span>
    <span class="n">simple_white</span> <span class="o">=</span> <span class="s2">&quot;simple_white&quot;</span>
    <span class="n">presentation</span> <span class="o">=</span> <span class="s2">&quot;presentation&quot;</span>
    <span class="n">xgridoff</span> <span class="o">=</span> <span class="s2">&quot;xgridoff&quot;</span>
    <span class="n">ygridoff</span> <span class="o">=</span> <span class="s2">&quot;ygridoff&quot;</span>
    <span class="n">gridon</span> <span class="o">=</span> <span class="s2">&quot;gridon&quot;</span>
    <span class="n">none</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





  </div>

  </div>


</div>






<div class="doc doc-object doc-class">



<h6 id="humbldata.core.standard_models.abstract.chart.Chart" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.abstract.chart.Chart</span>


<a href="#humbldata.core.standard_models.abstract.chart.Chart" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>

  
      <p>a Chart Object that is returned from a View.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/abstract/chart.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Chart</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;a Chart Object that is returned from a View.&quot;&quot;&quot;</span>

    <span class="n">content</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Raw textual representation of the chart.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">theme</span><span class="p">:</span> <span class="n">ChartTemplate</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="n">ChartTemplate</span><span class="o">.</span><span class="n">plotly</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Complementary attribute to the `content` attribute. It specifies the format of the chart.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">fig</span><span class="p">:</span> <span class="n">Any</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The figure object.&quot;</span><span class="p">,</span>
        <span class="c1"># json_schema_extra={&quot;exclude_from_api&quot;: True},</span>
    <span class="p">)</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">validate_assignment</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Human readable representation of the object.&quot;&quot;&quot;</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">[:</span><span class="mi">83</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;...&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">83</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h7 id="humbldata.core.standard_models.abstract.chart.Chart.__repr__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.abstract.chart.Chart.__repr__</span>


<a href="#humbldata.core.standard_models.abstract.chart.Chart.__repr__" class="headerlink" title="Permanent link">¤</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__repr__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nf">str</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Human readable representation of the object.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/abstract/chart.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Human readable representation of the object.&quot;&quot;&quot;</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">[:</span><span class="mi">83</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;...&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">83</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.core.standard_models.abstract.data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.abstract.data</span>


<a href="#humbldata.core.standard_models.abstract.data" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p>A wrapper around OpenBB Data Standardized Model to use with humbldata.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-class">



<h6 id="humbldata.core.standard_models.abstract.data.Data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.abstract.data.Data</span>


<a href="#humbldata.core.standard_models.abstract.data.Data" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="pandera.polars.DataFrameModel">DataFrameModel</span></code></p>

  
      <p>An abstract standard_model to represent a base Data Model.</p>
<p>The Data Model should be used to define the data that is being
collected and analyzed in a <code>context.category.command</code> call.</p>
<p>This Data model is meant to be inherited and built upon by other
standard_models for a specific context.</p>

<details class="example" open>
  <summary>Example</summary>
  <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">EquityHistoricalData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>

<span class="n">date</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">dateType</span><span class="p">,</span> <span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
    <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="nb">open</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
<span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
<span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
<span class="n">close</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;close&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
<span class="n">volume</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
    <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;volume&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">,</span> <span class="n">check_fields</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">date_validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>  <span class="c1"># pylint: disable=E0213</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">isoparse</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">hour</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">minute</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">v</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">v</span>
</code></pre></div>
</details>
            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/abstract/data.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Data</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">DataFrameModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An abstract standard_model to represent a base Data Model.</span>

<span class="sd">    The Data Model should be used to define the data that is being</span>
<span class="sd">    collected and analyzed in a `context.category.command` call.</span>

<span class="sd">    This Data model is meant to be inherited and built upon by other</span>
<span class="sd">    standard_models for a specific context.</span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    ```py</span>
<span class="sd">    class EquityHistoricalData(Data):</span>

<span class="sd">    date: Union[dateType, datetime] = Field(</span>
<span class="sd">        description=DATA_DESCRIPTIONS.get(&quot;date&quot;, &quot;&quot;)</span>
<span class="sd">    )</span>
<span class="sd">    open: float = Field(description=DATA_DESCRIPTIONS.get(&quot;open&quot;, &quot;&quot;))</span>
<span class="sd">    high: float = Field(description=DATA_DESCRIPTIONS.get(&quot;high&quot;, &quot;&quot;))</span>
<span class="sd">    low: float = Field(description=DATA_DESCRIPTIONS.get(&quot;low&quot;, &quot;&quot;))</span>
<span class="sd">    close: float = Field(description=DATA_DESCRIPTIONS.get(&quot;close&quot;, &quot;&quot;))</span>
<span class="sd">    volume: Optional[Union[float, int]] = Field(</span>
<span class="sd">        default=None, description=DATA_DESCRIPTIONS.get(&quot;volume&quot;, &quot;&quot;)</span>
<span class="sd">    )</span>

<span class="sd">    @field_validator(&quot;date&quot;, mode=&quot;before&quot;, check_fields=False)</span>
<span class="sd">    def date_validate(cls, v):  # pylint: disable=E0213</span>
<span class="sd">        v = parser.isoparse(str(v))</span>
<span class="sd">        if v.hour == 0 and v.minute == 0:</span>
<span class="sd">            return v.date()</span>
<span class="sd">        return v</span>

<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.core.standard_models.abstract.humblobject" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.abstract.humblobject</span>


<a href="#humbldata.core.standard_models.abstract.humblobject" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">
































<div class="doc doc-object doc-function">



<h6 id="humbldata.core.standard_models.abstract.humblobject.extract_subclass_dict" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.abstract.humblobject.extract_subclass_dict</span>


<a href="#humbldata.core.standard_models.abstract.humblobject.extract_subclass_dict" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_subclass_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute_name</span><span class="p">:</span> <span class="n">str</span><span class="p">,</span> <span class="n">items</span><span class="p">:</span> <span class="n">list</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Extract the dictionary representation of the specified attribute.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>attribute_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the attribute to update in the items list.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/abstract/humblobject.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">extract_subclass_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">items</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extract the dictionary representation of the specified attribute.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    attribute_name : str</span>
<span class="sd">        The name of the attribute to update in the items list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if the attribute exists and has a value</span>
    <span class="n">attribute_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">attribute_value</span><span class="p">:</span>
        <span class="c1"># Assuming the attribute has a method called &#39;model_dump&#39; to get its dictionary representation</span>
        <span class="n">add_item</span> <span class="o">=</span> <span class="n">attribute_value</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
        <span class="n">add_item_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">add_item</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">add_item_str</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">80</span><span class="p">:</span>
            <span class="n">add_item_str</span> <span class="o">=</span> <span class="n">add_item_str</span><span class="p">[:</span><span class="mi">80</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;...&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">attribute_name</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">):</span>
                <span class="n">items</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">attribute_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">add_item_str</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">break</span>

    <span class="k">return</span> <span class="n">items</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>






<div class="doc doc-object doc-class">



<h6 id="humbldata.core.standard_models.abstract.humblobject.HumblObject" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.abstract.humblobject.HumblObject</span>


<a href="#humbldata.core.standard_models.abstract.humblobject.HumblObject" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.tagged.Tagged" href="../core/#humbldata.core.standard_models.abstract.tagged.Tagged">Tagged</a></code>, <code><span title="typing.Generic">Generic</span>[<span title="humbldata.core.standard_models.abstract.humblobject.T">T</span>]</code></p>

  
      <p>HumblObject is the base class for all dta returned from the Toolbox.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/abstract/humblobject.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">HumblObject</span><span class="p">(</span><span class="n">Tagged</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;HumblObject is the base class for all dta returned from the Toolbox.&quot;&quot;&quot;</span>

    <span class="n">_user_settings</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">BaseModel</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_system_settings</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">BaseModel</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">arbitrary_types_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">results</span><span class="p">:</span> <span class="n">T</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Serializable Logical Plan of the pl.LazyFrame results.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">equity_data</span><span class="p">:</span> <span class="n">T</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Serialized raw data used in the command calculations.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">provider</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Provider name.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">warnings</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Warning_</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;List of warnings.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">chart</span><span class="p">:</span> <span class="n">Chart</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="n">Chart</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Chart object.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">extra</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Extra info.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">context_params</span><span class="p">:</span> <span class="n">ToolboxQueryParams</span> <span class="o">|</span> <span class="n">PortfolioQueryParams</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="n">ToolboxQueryParams</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Context Parameters&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Context parameters.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">command_params</span><span class="p">:</span> <span class="n">SerializeAsAny</span><span class="p">[</span><span class="n">QueryParams</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="n">QueryParams</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Command Parameters&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Command-specific parameters.&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># @field_validator(&quot;command_params&quot;)</span>
    <span class="c1"># def validate_command_params(cls, v):</span>
    <span class="c1">#     class_name = v.__class__.__name__</span>
    <span class="c1">#     if &quot;QueryParams&quot; in class_name:</span>
    <span class="c1">#         return v</span>
    <span class="c1">#     msg = &quot;Wrong type for &#39;command_params&#39;, must be subclass of QueryParams&quot;</span>
    <span class="c1">#     raise TypeError(msg)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Human readable representation of the object.&quot;&quot;&quot;</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">[:</span><span class="mi">83</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;...&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">83</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">]</span>

        <span class="c1"># Needed to extract subclass dict correctly</span>
        <span class="c1"># items = extract_subclass_dict(self, &quot;command_params&quot;, items)</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_polars</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">collect</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserialize the stored results or return the LazyFrame, and optionally collect them into a Polars DataFrame.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        collect : bool, optional</span>
<span class="sd">            If True, collects the deserialized LazyFrame into a DataFrame.</span>
<span class="sd">            Default is True.</span>
<span class="sd">        equity_data : bool, optional</span>
<span class="sd">            If True, processes equity_data instead of results.</span>
<span class="sd">            Default is False.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pl.LazyFrame | pl.DataFrame</span>
<span class="sd">            The results as a Polars LazyFrame or DataFrame,</span>
<span class="sd">            depending on the collect parameter.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        HumblDataError</span>
<span class="sd">            If no results or equity data are found to process</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">equity_data</span> <span class="k">if</span> <span class="n">equity_data</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span>

        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="s2">&quot;No data found.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="k">as</span> <span class="n">data_io</span><span class="p">:</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data_io</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="k">as</span> <span class="n">data_io</span><span class="p">:</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data_io</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;binary&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span>
                <span class="s2">&quot;Invalid data type. Expected LazyFrame or serialized string.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">collect</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">to_df</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">collect</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Alias for the `to_polars` method.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        collect : bool, optional</span>
<span class="sd">            If True, collects the deserialized LazyFrame into a DataFrame.</span>
<span class="sd">            Default is True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pl.LazyFrame | pl.DataFrame</span>
<span class="sd">            The deserialized results as a Polars LazyFrame or DataFrame,</span>
<span class="sd">            depending on the collect parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="o">=</span><span class="n">collect</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_pandas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the results to a Pandas DataFrame.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pd.DataFrame</span>
<span class="sd">            The results as a Pandas DataFrame.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span><span class="p">)</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">to_numpy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the results to a NumPy array.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        np.ndarray</span>
<span class="sd">            The results as a NumPy array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span><span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">row_wise</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">as_series</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transform the stored data into a dictionary or a list of dictionaries.</span>

<span class="sd">        This method allows for the conversion of the internal data</span>
<span class="sd">        representation into a more universally accessible format, either</span>
<span class="sd">        aggregating the entire dataset into a single dictionary (column-wise)</span>
<span class="sd">        or breaking it down into a list of dictionaries, each representing a</span>
<span class="sd">        row in the dataset.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        row_wise : bool, optional</span>
<span class="sd">            Determines the format of the output. If set to True, the method</span>
<span class="sd">            returns a list of dictionaries, with each dictionary representing a</span>
<span class="sd">            row and its corresponding data as key-value pairs. If set to False,</span>
<span class="sd">            the method returns a single dictionary, with column names as keys</span>
<span class="sd">            and lists of column data as values. Default is False.</span>

<span class="sd">        equity_data : bool, optional</span>
<span class="sd">            A flag to specify whether to use equity-specific data for the</span>
<span class="sd">            conversion. This parameter allows for flexibility in handling</span>
<span class="sd">            different types of data stored within the object. Default is</span>
<span class="sd">            False.</span>
<span class="sd">        as_series : bool, optional</span>
<span class="sd">            If True, the method returns a pl.Series with values as Series. If</span>
<span class="sd">            False, the method returns a dict with values as List[Any].</span>
<span class="sd">            Default is True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dict | list[dict]</span>
<span class="sd">            Depending on the `row_wise` parameter, either a dictionary mapping column names to lists of values (if `row_wise` is False) or a list of dictionaries, each representing a row in the dataset (if `row_wise` is True).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">row_wise</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span>
                <span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span>
            <span class="p">)</span><span class="o">.</span><span class="n">to_dicts</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span>
            <span class="n">as_series</span><span class="o">=</span><span class="n">as_series</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_arrow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the results to an Arrow Table.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pa.Table</span>
<span class="sd">            The results as an Arrow Table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span><span class="p">)</span><span class="o">.</span><span class="n">to_arrow</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">to_struct</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the results to a struct.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : str, optional</span>
<span class="sd">            The name of the struct. Default is &quot;results&quot;.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pl.Struct</span>
<span class="sd">            The results as a struct.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span><span class="p">)</span><span class="o">.</span><span class="n">to_struct</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">chart</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the results to a JSON string.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        equity_data : bool, optional</span>
<span class="sd">            A flag to specify whether to use equity-specific data for the</span>
<span class="sd">            conversion. Default is False.</span>
<span class="sd">        chart : bool, optional</span>
<span class="sd">            If True, return all generated charts as a JSON string instead of</span>
<span class="sd">            returning the results. Default is False.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The results or charts as a JSON string.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        HumblDataError</span>
<span class="sd">            If chart is True but no charts are available.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">json</span>
        <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">datetime</span>

        <span class="kn">from</span> <span class="nn">humbldata.core.standard_models.abstract.errors</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">HumblDataError</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">json_serial</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;JSON serializer for objects not serializable by default json code.&quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="n">datetime</span><span class="p">,</span> <span class="n">date</span><span class="p">)):</span>
                <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="si">}</span><span class="s2"> not serializable&quot;</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">chart</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;You set `.to_json(chart=True)` but there were no charts. Make sure `chart=True` in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">[</span>
                    <span class="n">chart</span><span class="o">.</span><span class="n">content</span>
                    <span class="k">for</span> <span class="n">chart</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart</span>
                    <span class="k">if</span> <span class="n">chart</span> <span class="ow">and</span> <span class="n">chart</span><span class="o">.</span><span class="n">content</span>
                <span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart</span><span class="o">.</span><span class="n">content</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span>
                <span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span>
            <span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">as_series</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">json_serial</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the results are empty.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            True if the results are empty, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span><span class="p">)</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Show the chart.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">chart</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">chart</span> <span class="ow">and</span> <span class="n">chart</span><span class="o">.</span><span class="n">fig</span><span class="p">:</span>
                    <span class="n">chart</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Chart object is missing or incomplete.&quot;</span>
                    <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart</span><span class="o">.</span><span class="n">fig</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Chart not found.&quot;</span>
            <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h7 id="humbldata.core.standard_models.abstract.humblobject.HumblObject.__repr__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.abstract.humblobject.HumblObject.__repr__</span>


<a href="#humbldata.core.standard_models.abstract.humblobject.HumblObject.__repr__" class="headerlink" title="Permanent link">¤</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__repr__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nf">str</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Human readable representation of the object.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/abstract/humblobject.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Human readable representation of the object.&quot;&quot;&quot;</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">[:</span><span class="mi">83</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;...&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">83</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">]</span>

    <span class="c1"># Needed to extract subclass dict correctly</span>
    <span class="c1"># items = extract_subclass_dict(self, &quot;command_params&quot;, items)</span>

    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h7 id="humbldata.core.standard_models.abstract.humblobject.HumblObject.to_polars" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.abstract.humblobject.HumblObject.to_polars</span>


<a href="#humbldata.core.standard_models.abstract.humblobject.HumblObject.to_polars" class="headerlink" title="Permanent link">¤</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Deserialize the stored results or return the LazyFrame, and optionally collect them into a Polars DataFrame.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>collect</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, collects the deserialized LazyFrame into a DataFrame.
Default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>equity_data</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, processes equity_data instead of results.
Default is False.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The results as a Polars LazyFrame or DataFrame,
depending on the collect parameter.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Raises:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.errors.HumblDataError" href="../core/#humbldata.core.standard_models.abstract.errors.HumblDataError">HumblDataError</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If no results or equity data are found to process</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/abstract/humblobject.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_polars</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">collect</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deserialize the stored results or return the LazyFrame, and optionally collect them into a Polars DataFrame.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    collect : bool, optional</span>
<span class="sd">        If True, collects the deserialized LazyFrame into a DataFrame.</span>
<span class="sd">        Default is True.</span>
<span class="sd">    equity_data : bool, optional</span>
<span class="sd">        If True, processes equity_data instead of results.</span>
<span class="sd">        Default is False.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame | pl.DataFrame</span>
<span class="sd">        The results as a Polars LazyFrame or DataFrame,</span>
<span class="sd">        depending on the collect parameter.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    HumblDataError</span>
<span class="sd">        If no results or equity data are found to process</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">equity_data</span> <span class="k">if</span> <span class="n">equity_data</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">results</span>

    <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="s2">&quot;No data found.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="k">as</span> <span class="n">data_io</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data_io</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="k">as</span> <span class="n">data_io</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data_io</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;binary&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span>
            <span class="s2">&quot;Invalid data type. Expected LazyFrame or serialized string.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">collect</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h7 id="humbldata.core.standard_models.abstract.humblobject.HumblObject.to_df" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.abstract.humblobject.HumblObject.to_df</span>


<a href="#humbldata.core.standard_models.abstract.humblobject.HumblObject.to_df" class="headerlink" title="Permanent link">¤</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_df</span><span class="p">(</span><span class="n">collect</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Alias for the <code>to_polars</code> method.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>collect</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, collects the deserialized LazyFrame into a DataFrame.
Default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The deserialized results as a Polars LazyFrame or DataFrame,
depending on the collect parameter.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/abstract/humblobject.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_df</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">collect</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Alias for the `to_polars` method.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    collect : bool, optional</span>
<span class="sd">        If True, collects the deserialized LazyFrame into a DataFrame.</span>
<span class="sd">        Default is True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame | pl.DataFrame</span>
<span class="sd">        The deserialized results as a Polars LazyFrame or DataFrame,</span>
<span class="sd">        depending on the collect parameter.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="o">=</span><span class="n">collect</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h7 id="humbldata.core.standard_models.abstract.humblobject.HumblObject.to_pandas" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.abstract.humblobject.HumblObject.to_pandas</span>


<a href="#humbldata.core.standard_models.abstract.humblobject.HumblObject.to_pandas" class="headerlink" title="Permanent link">¤</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_pandas</span><span class="p">(</span><span class="n">equity_data</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="pandas.DataFrame">DataFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Convert the results to a Pandas DataFrame.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="pandas.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The results as a Pandas DataFrame.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/abstract/humblobject.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_pandas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the results to a Pandas DataFrame.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        The results as a Pandas DataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span><span class="p">)</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h7 id="humbldata.core.standard_models.abstract.humblobject.HumblObject.to_numpy" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.abstract.humblobject.HumblObject.to_numpy</span>


<a href="#humbldata.core.standard_models.abstract.humblobject.HumblObject.to_numpy" class="headerlink" title="Permanent link">¤</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_numpy</span><span class="p">(</span><span class="n">equity_data</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="numpy.ndarray">ndarray</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Convert the results to a NumPy array.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="numpy.ndarray">ndarray</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The results as a NumPy array.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/abstract/humblobject.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_numpy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the results to a NumPy array.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The results as a NumPy array.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span><span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h7 id="humbldata.core.standard_models.abstract.humblobject.HumblObject.to_dict" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.abstract.humblobject.HumblObject.to_dict</span>


<a href="#humbldata.core.standard_models.abstract.humblobject.HumblObject.to_dict" class="headerlink" title="Permanent link">¤</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_dict</span><span class="p">(</span><span class="n">row_wise</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">as_series</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">dict</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">dict</span><span class="p">]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Transform the stored data into a dictionary or a list of dictionaries.</p>
<p>This method allows for the conversion of the internal data
representation into a more universally accessible format, either
aggregating the entire dataset into a single dictionary (column-wise)
or breaking it down into a list of dictionaries, each representing a
row in the dataset.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>row_wise</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Determines the format of the output. If set to True, the method
returns a list of dictionaries, with each dictionary representing a
row and its corresponding data as key-value pairs. If set to False,
the method returns a single dictionary, with column names as keys
and lists of column data as values. Default is False.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>equity_data</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A flag to specify whether to use equity-specific data for the
conversion. This parameter allows for flexibility in handling
different types of data stored within the object. Default is
False.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>as_series</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, the method returns a pl.Series with values as Series. If
False, the method returns a dict with values as List[Any].
Default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>dict | list[dict]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Depending on the <code>row_wise</code> parameter, either a dictionary mapping column names to lists of values (if <code>row_wise</code> is False) or a list of dictionaries, each representing a row in the dataset (if <code>row_wise</code> is True).</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/abstract/humblobject.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">row_wise</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">as_series</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transform the stored data into a dictionary or a list of dictionaries.</span>

<span class="sd">    This method allows for the conversion of the internal data</span>
<span class="sd">    representation into a more universally accessible format, either</span>
<span class="sd">    aggregating the entire dataset into a single dictionary (column-wise)</span>
<span class="sd">    or breaking it down into a list of dictionaries, each representing a</span>
<span class="sd">    row in the dataset.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    row_wise : bool, optional</span>
<span class="sd">        Determines the format of the output. If set to True, the method</span>
<span class="sd">        returns a list of dictionaries, with each dictionary representing a</span>
<span class="sd">        row and its corresponding data as key-value pairs. If set to False,</span>
<span class="sd">        the method returns a single dictionary, with column names as keys</span>
<span class="sd">        and lists of column data as values. Default is False.</span>

<span class="sd">    equity_data : bool, optional</span>
<span class="sd">        A flag to specify whether to use equity-specific data for the</span>
<span class="sd">        conversion. This parameter allows for flexibility in handling</span>
<span class="sd">        different types of data stored within the object. Default is</span>
<span class="sd">        False.</span>
<span class="sd">    as_series : bool, optional</span>
<span class="sd">        If True, the method returns a pl.Series with values as Series. If</span>
<span class="sd">        False, the method returns a dict with values as List[Any].</span>
<span class="sd">        Default is True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict | list[dict]</span>
<span class="sd">        Depending on the `row_wise` parameter, either a dictionary mapping column names to lists of values (if `row_wise` is False) or a list of dictionaries, each representing a row in the dataset (if `row_wise` is True).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">row_wise</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span>
            <span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span>
        <span class="p">)</span><span class="o">.</span><span class="n">to_dicts</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span>
        <span class="n">as_series</span><span class="o">=</span><span class="n">as_series</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h7 id="humbldata.core.standard_models.abstract.humblobject.HumblObject.to_arrow" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.abstract.humblobject.HumblObject.to_arrow</span>


<a href="#humbldata.core.standard_models.abstract.humblobject.HumblObject.to_arrow" class="headerlink" title="Permanent link">¤</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_arrow</span><span class="p">(</span><span class="n">equity_data</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="pyarrow.Table">Table</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Convert the results to an Arrow Table.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="pyarrow.Table">Table</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The results as an Arrow Table.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/abstract/humblobject.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_arrow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pa</span><span class="o">.</span><span class="n">Table</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the results to an Arrow Table.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pa.Table</span>
<span class="sd">        The results as an Arrow Table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span><span class="p">)</span><span class="o">.</span><span class="n">to_arrow</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h7 id="humbldata.core.standard_models.abstract.humblobject.HumblObject.to_struct" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.abstract.humblobject.HumblObject.to_struct</span>


<a href="#humbldata.core.standard_models.abstract.humblobject.HumblObject.to_struct" class="headerlink" title="Permanent link">¤</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_struct</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;results&#39;</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.Series">Series</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Convert the results to a struct.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the struct. Default is "results".</p>
            </div>
          </td>
          <td>
                <code>&#39;results&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.Struct">Struct</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The results as a struct.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/abstract/humblobject.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_struct</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;results&quot;</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the results to a struct.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name : str, optional</span>
<span class="sd">        The name of the struct. Default is &quot;results&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.Struct</span>
<span class="sd">        The results as a struct.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span><span class="p">)</span><span class="o">.</span><span class="n">to_struct</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h7 id="humbldata.core.standard_models.abstract.humblobject.HumblObject.to_json" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.abstract.humblobject.HumblObject.to_json</span>


<a href="#humbldata.core.standard_models.abstract.humblobject.HumblObject.to_json" class="headerlink" title="Permanent link">¤</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_json</span><span class="p">(</span><span class="n">equity_data</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">chart</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">str</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Convert the results to a JSON string.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>equity_data</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A flag to specify whether to use equity-specific data for the
conversion. Default is False.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>chart</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, return all generated charts as a JSON string instead of
returning the results. Default is False.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The results or charts as a JSON string.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Raises:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.errors.HumblDataError" href="../core/#humbldata.core.standard_models.abstract.errors.HumblDataError">HumblDataError</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If chart is True but no charts are available.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/abstract/humblobject.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">chart</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the results to a JSON string.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    equity_data : bool, optional</span>
<span class="sd">        A flag to specify whether to use equity-specific data for the</span>
<span class="sd">        conversion. Default is False.</span>
<span class="sd">    chart : bool, optional</span>
<span class="sd">        If True, return all generated charts as a JSON string instead of</span>
<span class="sd">        returning the results. Default is False.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        The results or charts as a JSON string.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    HumblDataError</span>
<span class="sd">        If chart is True but no charts are available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">json</span>
    <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">datetime</span>

    <span class="kn">from</span> <span class="nn">humbldata.core.standard_models.abstract.errors</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">HumblDataError</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">json_serial</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;JSON serializer for objects not serializable by default json code.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="n">datetime</span><span class="p">,</span> <span class="n">date</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="si">}</span><span class="s2"> not serializable&quot;</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">chart</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;You set `.to_json(chart=True)` but there were no charts. Make sure `chart=True` in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="n">chart</span><span class="o">.</span><span class="n">content</span>
                <span class="k">for</span> <span class="n">chart</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart</span>
                <span class="k">if</span> <span class="n">chart</span> <span class="ow">and</span> <span class="n">chart</span><span class="o">.</span><span class="n">content</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart</span><span class="o">.</span><span class="n">content</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span>
            <span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span>
        <span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">as_series</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">json_serial</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h7 id="humbldata.core.standard_models.abstract.humblobject.HumblObject.is_empty" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.abstract.humblobject.HumblObject.is_empty</span>


<a href="#humbldata.core.standard_models.abstract.humblobject.HumblObject.is_empty" class="headerlink" title="Permanent link">¤</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_empty</span><span class="p">(</span><span class="n">equity_data</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">bool</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Check if the results are empty.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>True if the results are empty, False otherwise.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/abstract/humblobject.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">equity_data</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if the results are empty.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    bool</span>
<span class="sd">        True if the results are empty, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span><span class="n">collect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">equity_data</span><span class="o">=</span><span class="n">equity_data</span><span class="p">)</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h7 id="humbldata.core.standard_models.abstract.humblobject.HumblObject.show" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.abstract.humblobject.HumblObject.show</span>


<a href="#humbldata.core.standard_models.abstract.humblobject.HumblObject.show" class="headerlink" title="Permanent link">¤</a></h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">show</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Show the chart.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/abstract/humblobject.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Show the chart.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chart</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">chart</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">chart</span> <span class="ow">and</span> <span class="n">chart</span><span class="o">.</span><span class="n">fig</span><span class="p">:</span>
                <span class="n">chart</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Chart object is missing or incomplete.&quot;</span>
                <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">chart</span><span class="o">.</span><span class="n">fig</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Chart not found.&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.core.standard_models.abstract.tagged" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.abstract.tagged</span>


<a href="#humbldata.core.standard_models.abstract.tagged" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p>An ABSTRACT DATA MODEL, Tagged, to be inherited by other models as identifier.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-class">



<h6 id="humbldata.core.standard_models.abstract.tagged.Tagged" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.abstract.tagged.Tagged</span>


<a href="#humbldata.core.standard_models.abstract.tagged.Tagged" class="headerlink" title="Permanent link">¤</a></h6>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>

  
      <p>A class to represent an object tagged with a uuid7.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/abstract/tagged.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Tagged</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A class to represent an object tagged with a uuid7.&quot;&quot;&quot;</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">uuid7str</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;_id&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





  </div>

  </div>


</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="humbldata.core.standard_models.portfolio" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.portfolio</span>


<a href="#humbldata.core.standard_models.portfolio" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">
  
      <p>Context: Portfolio || <strong>Category: Analytics</strong>.</p>
<p>This module defines the QueryParams and Data classes for the Portfolio context.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h5 id="humbldata.core.standard_models.portfolio.analytics" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.portfolio.analytics</span>


<a href="#humbldata.core.standard_models.portfolio.analytics" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h6 id="humbldata.core.standard_models.portfolio.analytics.etf_category" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.portfolio.analytics.etf_category</span>


<a href="#humbldata.core.standard_models.portfolio.analytics.etf_category" class="headerlink" title="Permanent link">¤</a></h6>

  <div class="doc doc-contents ">
  
      <p>UserTable Standard Model.</p>
<p>Context: Portfolio || Category: Analytics || Command: user_table.</p>
<p>This module is used to define the QueryParams and Data model for the
UserTable command.</p>

  

  <div class="doc doc-children">











<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.portfolio.analytics.etf_category.ETFCategoryData" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.portfolio.analytics.etf_category.ETFCategoryData</span>


<a href="#humbldata.core.standard_models.portfolio.analytics.etf_category.ETFCategoryData" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.data.Data" href="../core/#humbldata.core.standard_models.abstract.data.Data">Data</a></code></p>

  
      <p>Data model for the etf_category command, a Pandera.Polars Model.</p>
<p>Used for simple validation of ETF category data for the UserTableFetcher
internal logic <code>aggregate_user_table_data()</code></p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/portfolio/analytics/etf_category.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ETFCategoryData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Data model for the etf_category command, a Pandera.Polars Model.</span>

<span class="sd">    Used for simple validation of ETF category data for the UserTableFetcher</span>
<span class="sd">    internal logic `aggregate_user_table_data()`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Symbol&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">category</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Category/Sector&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





  </div>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h6 id="humbldata.core.standard_models.portfolio.analytics.user_table" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.portfolio.analytics.user_table</span>


<a href="#humbldata.core.standard_models.portfolio.analytics.user_table" class="headerlink" title="Permanent link">¤</a></h6>

  <div class="doc doc-contents ">
  
      <p>UserTable Standard Model.</p>
<p>Context: Portfolio || Category: Analytics || Command: user_table.</p>
<p>This module is used to define the QueryParams and Data model for the
UserTable command.</p>

  

  <div class="doc doc-children">















































<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams</span>


<a href="#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.query_params.QueryParams" href="../core/#humbldata.core.standard_models.abstract.query_params.QueryParams">QueryParams</a></code></p>

  
      <p>QueryParams model for the UserTable command, a Pydantic v2 model.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>symbols</code></td>
          <td>
                <code>str | list[str] | set[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The symbol or ticker of the stock(s). Can be a single symbol, a comma-separated string,
or a list/set of symbols. Default is "AAPL".
Examples: "AAPL", "AAPL,MSFT", ["AAPL", "MSFT"]
All inputs will be converted to uppercase.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>The <code>symbols</code> input will be processed to ensure all symbols are uppercase
and properly formatted, regardless of the input format.</p>
</details>
            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/portfolio/analytics/user_table.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UserTableQueryParams</span><span class="p">(</span><span class="n">QueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    QueryParams model for the UserTable command, a Pydantic v2 model.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbols : str | list[str] | set[str]</span>
<span class="sd">        The symbol or ticker of the stock(s). Can be a single symbol, a comma-separated string,</span>
<span class="sd">        or a list/set of symbols. Default is &quot;AAPL&quot;.</span>
<span class="sd">        Examples: &quot;AAPL&quot;, &quot;AAPL,MSFT&quot;, [&quot;AAPL&quot;, &quot;MSFT&quot;]</span>
<span class="sd">        All inputs will be converted to uppercase.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The `symbols` input will be processed to ensure all symbols are uppercase</span>
<span class="sd">    and properly formatted, regardless of the input format.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">symbols</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Symbol&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;symbols&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">,</span> <span class="n">check_fields</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">upper_symbol</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the stock symbol to uppercase.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        v : Union[str, List[str], Set[str]]</span>
<span class="sd">            The stock symbol or collection of symbols to be converted.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[str, List[str]]</span>
<span class="sd">            The uppercase stock symbol or a comma-separated string of uppercase</span>
<span class="sd">            symbols.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Handle empty inputs</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="c1"># If v is a string, split it by commas into a list. Otherwise, ensure it&#39;s a list.</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">v</span>

        <span class="c1"># Trim whitespace and check if all elements in the list are strings</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="nb">str</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">v</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Every element in `symbol` list must be a `str`&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="c1"># Convert all elements to uppercase, trim whitespace, and join them with a comma</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">symbol</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">v</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams.upper_symbol" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams.upper_symbol</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams.upper_symbol" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">upper_symbol</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">set</span><span class="p">[</span><span class="n">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">str</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Convert the stock symbol to uppercase.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>v</code></td>
          <td>
                <code>Union[str, List[str], Set[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The stock symbol or collection of symbols to be converted.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>Union[str, List[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The uppercase stock symbol or a comma-separated string of uppercase
symbols.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/portfolio/analytics/user_table.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;symbols&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">,</span> <span class="n">check_fields</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">upper_symbol</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the stock symbol to uppercase.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    v : Union[str, List[str], Set[str]]</span>
<span class="sd">        The stock symbol or collection of symbols to be converted.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Union[str, List[str]]</span>
<span class="sd">        The uppercase stock symbol or a comma-separated string of uppercase</span>
<span class="sd">        symbols.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Handle empty inputs</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="c1"># If v is a string, split it by commas into a list. Otherwise, ensure it&#39;s a list.</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">v</span>

    <span class="c1"># Trim whitespace and check if all elements in the list are strings</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="nb">str</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">v</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Every element in `symbol` list must be a `str`&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="c1"># Convert all elements to uppercase, trim whitespace, and join them with a comma</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">symbol</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">v</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>






<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableData" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.portfolio.analytics.user_table.UserTableData</span>


<a href="#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableData" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.data.Data" href="../core/#humbldata.core.standard_models.abstract.data.Data">Data</a></code></p>

  
      <p>Data model for the user_table command, a Pandera.Polars Model.</p>
<p>This Data model is used to validate data in the <code>.transform_data()</code> method of the <code>UserTableFetcher</code> class.</p>



  <p><span class="doc-section-title">Attributes:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableData.symbol">symbol</span></code></td>
          <td>
                <code><span title="polars.Utf8">Utf8</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The stock symbol.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableData.last_price">last_price</span></code></td>
          <td>
                <code><span title="polars.Float64">Float64</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The last known price of the stock.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableData.buy_price">buy_price</span></code></td>
          <td>
                <code><span title="polars.Float64">Float64</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The recommended buy price for the stock.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableData.sell_price">sell_price</span></code></td>
          <td>
                <code><span title="polars.Float64">Float64</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The recommended sell price for the stock.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableData.ud_pct">ud_pct</span></code></td>
          <td>
                <code><span title="polars.Utf8">Utf8</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The upside/downside percentage.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableData.ud_ratio">ud_ratio</span></code></td>
          <td>
                <code><span title="polars.Float64">Float64</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The upside/downside ratio.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableData.asset_class">asset_class</span></code></td>
          <td>
                <code><span title="polars.Utf8">Utf8</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The asset class of the stock.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableData.sector">sector</span></code></td>
          <td>
                <code><span title="polars.Utf8">Utf8</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The sector of the stock.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableData.humbl_suggestion">humbl_suggestion</span></code></td>
          <td>
                <code><span title="polars.Utf8">Utf8</span> | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The suggestion provided by HUMBL.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Methods:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
          <tr class="doc-section-item">
            <td><code><span title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableData.None">None</span></code></td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/portfolio/analytics/user_table.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UserTableData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Data model for the user_table command, a Pandera.Polars Model.</span>

<span class="sd">    This Data model is used to validate data in the `.transform_data()` method of the `UserTableFetcher` class.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    symbol : pl.Utf8</span>
<span class="sd">        The stock symbol.</span>
<span class="sd">    last_price : pl.Float64</span>
<span class="sd">        The last known price of the stock.</span>
<span class="sd">    buy_price : pl.Float64</span>
<span class="sd">        The recommended buy price for the stock.</span>
<span class="sd">    sell_price : pl.Float64</span>
<span class="sd">        The recommended sell price for the stock.</span>
<span class="sd">    ud_pct : pl.Utf8</span>
<span class="sd">        The upside/downside percentage.</span>
<span class="sd">    ud_ratio : pl.Float64</span>
<span class="sd">        The upside/downside ratio.</span>
<span class="sd">    asset_class : pl.Utf8</span>
<span class="sd">        The asset class of the stock.</span>
<span class="sd">    sector : pl.Utf8</span>
<span class="sd">        The sector of the stock.</span>
<span class="sd">    humbl_suggestion : pl.Utf8 | None</span>
<span class="sd">        The suggestion provided by HUMBL.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    None</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">symbol</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Symbol&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;(symbols|symbol)&quot;</span><span class="p">,</span>
        <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">last_price</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Float64</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Last Price&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;last_price&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">buy_price</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Float64</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Buy Price&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;buy_price&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">sell_price</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Float64</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Sell Price&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sell_price&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">ud_pct</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Upside/Downside Percentage&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ud_pct&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">ud_ratio</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Float64</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Upside/Downside Ratio&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ud_ratio&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">asset_class</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Asset Class&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;asset_class&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">sector</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Sector&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sector&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="n">nullable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">humbl_suggestion</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;humblSuggestion&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;humbl_suggestion&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





  </div>

  </div>


</div>






<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher</span>


<a href="#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">

  
      <p>Fetcher for the UserTable command.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>context_params</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.PortfolioQueryParams" href="../core/#humbldata.core.standard_models.portfolio.PortfolioQueryParams">PortfolioQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The context parameters for the Portfolio query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>command_params</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams" href="../core/#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams">UserTableQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The command-specific parameters for the UserTable query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Attributes:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.context_params">context_params</span></code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.PortfolioQueryParams" href="../core/#humbldata.core.standard_models.portfolio.PortfolioQueryParams">PortfolioQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Stores the context parameters passed during initialization.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.command_params">command_params</span></code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams" href="../core/#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams">UserTableQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Stores the command-specific parameters passed during initialization.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.data">data</span></code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The raw data extracted from the data provider, before transformation.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Methods:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.transform_query" href="../core/#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.transform_query">transform_query</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Transform the command-specific parameters into a query.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.extract_data" href="../core/#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.extract_data">extract_data</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Extracts the data from the provider and returns it as a Polars DataFrame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.transform_data" href="../core/#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.transform_data">transform_data</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Transforms the command-specific data according to the UserTable logic.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.fetch_data" href="../core/#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.fetch_data">fetch_data</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Execute TET Pattern.</p>
              </div>
            </td>
          </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.humblobject.HumblObject" href="../core/#humbldata.core.standard_models.abstract.humblobject.HumblObject">HumblObject</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>results : UserTableData
    Serializable results.
provider : Literal['fmp', 'intrinio', 'polygon', 'tiingo', 'yfinance']
    Provider name.
warnings : Optional[List[Warning_]]
    List of warnings.
chart : Optional[Chart]
    Chart object.
context_params : PortfolioQueryParams
    Context-specific parameters.
command_params : UserTableQueryParams
    Command-specific parameters.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/portfolio/analytics/user_table.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UserTableFetcher</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetcher for the UserTable command.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    context_params : PortfolioQueryParams</span>
<span class="sd">        The context parameters for the Portfolio query.</span>
<span class="sd">    command_params : UserTableQueryParams</span>
<span class="sd">        The command-specific parameters for the UserTable query.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    context_params : PortfolioQueryParams</span>
<span class="sd">        Stores the context parameters passed during initialization.</span>
<span class="sd">    command_params : UserTableQueryParams</span>
<span class="sd">        Stores the command-specific parameters passed during initialization.</span>
<span class="sd">    data : pl.DataFrame</span>
<span class="sd">        The raw data extracted from the data provider, before transformation.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    transform_query()</span>
<span class="sd">        Transform the command-specific parameters into a query.</span>
<span class="sd">    extract_data()</span>
<span class="sd">        Extracts the data from the provider and returns it as a Polars DataFrame.</span>
<span class="sd">    transform_data()</span>
<span class="sd">        Transforms the command-specific data according to the UserTable logic.</span>
<span class="sd">    fetch_data()</span>
<span class="sd">        Execute TET Pattern.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    HumblObject</span>
<span class="sd">        results : UserTableData</span>
<span class="sd">            Serializable results.</span>
<span class="sd">        provider : Literal[&#39;fmp&#39;, &#39;intrinio&#39;, &#39;polygon&#39;, &#39;tiingo&#39;, &#39;yfinance&#39;]</span>
<span class="sd">            Provider name.</span>
<span class="sd">        warnings : Optional[List[Warning_]]</span>
<span class="sd">            List of warnings.</span>
<span class="sd">        chart : Optional[Chart]</span>
<span class="sd">            Chart object.</span>
<span class="sd">        context_params : PortfolioQueryParams</span>
<span class="sd">            Context-specific parameters.</span>
<span class="sd">        command_params : UserTableQueryParams</span>
<span class="sd">            Command-specific parameters.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context_params</span><span class="p">:</span> <span class="n">PortfolioQueryParams</span><span class="p">,</span>
        <span class="n">command_params</span><span class="p">:</span> <span class="n">UserTableQueryParams</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the UserTableFetcher with context and command parameters.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        context_params : PortfolioQueryParams</span>
<span class="sd">            The context parameters for the Portfolio query.</span>
<span class="sd">        command_params : UserTableQueryParams</span>
<span class="sd">            The command-specific parameters for the UserTable query.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span> <span class="o">=</span> <span class="n">context_params</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="n">command_params</span>

    <span class="k">def</span> <span class="nf">transform_query</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transform the command-specific parameters into a query.</span>

<span class="sd">        If command_params is not provided, it initializes a default UserTableQueryParams object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="c1"># Set Default Arguments</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">:</span> <span class="n">UserTableQueryParams</span> <span class="o">=</span> <span class="n">UserTableQueryParams</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">:</span> <span class="n">UserTableQueryParams</span> <span class="o">=</span> <span class="n">UserTableQueryParams</span><span class="p">(</span>
                <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span>
            <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">extract_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract the data from the provider and returns it as a Polars DataFrame.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pl.DataFrame</span>
<span class="sd">            The extracted data as a Polars DataFrame.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">etf_data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">aget_etf_category</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">symbols</span><span class="p">)</span>

        <span class="c1"># Dates are automatically selected based on membership</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbox</span> <span class="o">=</span> <span class="n">Toolbox</span><span class="p">(</span>
            <span class="n">symbols</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">symbols</span><span class="p">,</span>
            <span class="n">membership</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">membership</span><span class="p">,</span>
            <span class="n">interval</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mandelbrot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolbox</span><span class="o">.</span><span class="n">technical</span><span class="o">.</span><span class="n">mandelbrot_channel</span><span class="p">()</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span>
            <span class="n">collect</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">transform_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transform the command-specific data according to the user_table logic.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pl.DataFrame</span>
<span class="sd">            The transformed data as a Polars DataFrame</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Implement data transformation logic here</span>
        <span class="n">transformed_data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">=</span> <span class="k">await</span> <span class="n">user_table_engine</span><span class="p">(</span>
            <span class="n">symbols</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">symbols</span><span class="p">,</span>
            <span class="n">etf_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">etf_data</span><span class="p">,</span>
            <span class="n">mandelbrot_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mandelbrot</span><span class="p">,</span>
            <span class="n">toolbox</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">toolbox</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span> <span class="o">=</span> <span class="n">UserTableData</span><span class="p">(</span><span class="n">transformed_data</span><span class="o">.</span><span class="n">collect</span><span class="p">())</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Float64</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="nd">@log_start_end</span><span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute TET Pattern.</span>

<span class="sd">        This method executes the query transformation, data fetching and</span>
<span class="sd">        transformation process by first calling `transform_query` to prepare the query parameters, then</span>
<span class="sd">        extracting the raw data using `extract_data` method, and finally</span>
<span class="sd">        transforming the raw data using `transform_data` method.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        HumblObject</span>
<span class="sd">            The HumblObject containing the transformed data and metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Running .transform_query()&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transform_query</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Running .extract_data()&quot;</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_data</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Running .transform_data()&quot;</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform_data</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">HumblObject</span><span class="p">(</span>
            <span class="n">results</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="p">,</span>
            <span class="n">provider</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">provider</span><span class="p">,</span>
            <span class="n">warnings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">chart</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span>
            <span class="n">command_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.__init__</span>


<a href="#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.__init__" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span><span class="nf">context_params</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.PortfolioQueryParams" href="../core/#humbldata.core.standard_models.portfolio.PortfolioQueryParams">PortfolioQueryParams</a></span><span class="p">,</span> <span class="n">command_params</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams" href="../core/#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams">UserTableQueryParams</a></span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Initialize the UserTableFetcher with context and command parameters.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>context_params</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.PortfolioQueryParams" href="../core/#humbldata.core.standard_models.portfolio.PortfolioQueryParams">PortfolioQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The context parameters for the Portfolio query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>command_params</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams" href="../core/#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableQueryParams">UserTableQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The command-specific parameters for the UserTable query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/portfolio/analytics/user_table.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">context_params</span><span class="p">:</span> <span class="n">PortfolioQueryParams</span><span class="p">,</span>
    <span class="n">command_params</span><span class="p">:</span> <span class="n">UserTableQueryParams</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the UserTableFetcher with context and command parameters.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    context_params : PortfolioQueryParams</span>
<span class="sd">        The context parameters for the Portfolio query.</span>
<span class="sd">    command_params : UserTableQueryParams</span>
<span class="sd">        The command-specific parameters for the UserTable query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span> <span class="o">=</span> <span class="n">context_params</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="n">command_params</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.transform_query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.transform_query</span>


<a href="#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.transform_query" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">transform_query</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Transform the command-specific parameters into a query.</p>
<p>If command_params is not provided, it initializes a default UserTableQueryParams object.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/portfolio/analytics/user_table.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transform_query</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transform the command-specific parameters into a query.</span>

<span class="sd">    If command_params is not provided, it initializes a default UserTableQueryParams object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Set Default Arguments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">:</span> <span class="n">UserTableQueryParams</span> <span class="o">=</span> <span class="n">UserTableQueryParams</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">:</span> <span class="n">UserTableQueryParams</span> <span class="o">=</span> <span class="n">UserTableQueryParams</span><span class="p">(</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.extract_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.extract_data</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.extract_data" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_data</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Extract the data from the provider and returns it as a Polars DataFrame.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The extracted data as a Polars DataFrame.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/portfolio/analytics/user_table.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">extract_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extract the data from the provider and returns it as a Polars DataFrame.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame</span>
<span class="sd">        The extracted data as a Polars DataFrame.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">etf_data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">aget_etf_category</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">symbols</span><span class="p">)</span>

    <span class="c1"># Dates are automatically selected based on membership</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">toolbox</span> <span class="o">=</span> <span class="n">Toolbox</span><span class="p">(</span>
        <span class="n">symbols</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">symbols</span><span class="p">,</span>
        <span class="n">membership</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">membership</span><span class="p">,</span>
        <span class="n">interval</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mandelbrot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toolbox</span><span class="o">.</span><span class="n">technical</span><span class="o">.</span><span class="n">mandelbrot_channel</span><span class="p">()</span><span class="o">.</span><span class="n">to_polars</span><span class="p">(</span>
        <span class="n">collect</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.transform_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.transform_data</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.transform_data" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">transform_data</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Transform the command-specific data according to the user_table logic.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The transformed data as a Polars DataFrame</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/portfolio/analytics/user_table.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">transform_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transform the command-specific data according to the user_table logic.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame</span>
<span class="sd">        The transformed data as a Polars DataFrame</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Implement data transformation logic here</span>
    <span class="n">transformed_data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">=</span> <span class="k">await</span> <span class="n">user_table_engine</span><span class="p">(</span>
        <span class="n">symbols</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">symbols</span><span class="p">,</span>
        <span class="n">etf_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">etf_data</span><span class="p">,</span>
        <span class="n">mandelbrot_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mandelbrot</span><span class="p">,</span>
        <span class="n">toolbox</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">toolbox</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span> <span class="o">=</span> <span class="n">UserTableData</span><span class="p">(</span><span class="n">transformed_data</span><span class="o">.</span><span class="n">collect</span><span class="p">())</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Float64</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.fetch_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.fetch_data</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#humbldata.core.standard_models.portfolio.analytics.user_table.UserTableFetcher.fetch_data" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">fetch_data</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Execute TET Pattern.</p>
<p>This method executes the query transformation, data fetching and
transformation process by first calling <code>transform_query</code> to prepare the query parameters, then
extracting the raw data using <code>extract_data</code> method, and finally
transforming the raw data using <code>transform_data</code> method.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.humblobject.HumblObject" href="../core/#humbldata.core.standard_models.abstract.humblobject.HumblObject">HumblObject</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The HumblObject containing the transformed data and metadata.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/portfolio/analytics/user_table.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end</span><span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Execute TET Pattern.</span>

<span class="sd">    This method executes the query transformation, data fetching and</span>
<span class="sd">    transformation process by first calling `transform_query` to prepare the query parameters, then</span>
<span class="sd">    extracting the raw data using `extract_data` method, and finally</span>
<span class="sd">    transforming the raw data using `transform_data` method.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    HumblObject</span>
<span class="sd">        The HumblObject containing the transformed data and metadata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Running .transform_query()&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transform_query</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Running .extract_data()&quot;</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_data</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Running .transform_data()&quot;</span><span class="p">)</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform_data</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">HumblObject</span><span class="p">(</span>
        <span class="n">results</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="p">,</span>
        <span class="n">provider</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">provider</span><span class="p">,</span>
        <span class="n">warnings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">chart</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span>
        <span class="n">command_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>














<div class="doc doc-object doc-class">



<h5 id="humbldata.core.standard_models.portfolio.PortfolioQueryParams" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.portfolio.PortfolioQueryParams</span>


<a href="#humbldata.core.standard_models.portfolio.PortfolioQueryParams" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.query_params.QueryParams" href="../core/#humbldata.core.standard_models.abstract.query_params.QueryParams">QueryParams</a></code></p>

  
      <p>Query parameters for the PortfolioController.</p>
<p>This class defines the query parameters used by the PortfolioController.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>symbol</code></td>
          <td>
                <code>str or list of str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The stock symbol(s) to query. Default is "AAPL".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>provider</code></td>
          <td>
                <code><span title="humbldata.core.utils.constants.OBB_EQUITY_PRICE_HISTORICAL_PROVIDERS">OBB_EQUITY_PRICE_HISTORICAL_PROVIDERS</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The data provider for historical price data. Default is "yahoo".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>membership</code></td>
          <td>
                <code><span title="typing.Literal">Literal</span>[&#39;anonymous&#39;, &#39;humblPEON&#39;, &#39;humblPREMIUM&#39;, &#39;humblPOWER&#39;, &#39;humblPERMANENT&#39;, &#39;admin&#39;]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The membership level of the user accessing the data. Default is "anonymous".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Attributes:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.PortfolioQueryParams.symbol">symbol</span></code></td>
          <td>
                <code>str or list of str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The stock symbol(s) to query.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.PortfolioQueryParams.provider">provider</span></code></td>
          <td>
                <code><span title="humbldata.core.utils.constants.OBB_EQUITY_PRICE_HISTORICAL_PROVIDERS">OBB_EQUITY_PRICE_HISTORICAL_PROVIDERS</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The data provider for historical price data.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.portfolio.PortfolioQueryParams.membership">membership</span></code></td>
          <td>
                <code><span title="typing.Literal">Literal</span>[&#39;anonymous&#39;, &#39;humblPEON&#39;, &#39;humblPREMIUM&#39;, &#39;humblPOWER&#39;, &#39;humblPERMANENT&#39;, &#39;admin&#39;]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The membership level of the user.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/portfolio/__init__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PortfolioQueryParams</span><span class="p">(</span><span class="n">QueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Query parameters for the PortfolioController.</span>

<span class="sd">    This class defines the query parameters used by the PortfolioController.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbol : str or list of str</span>
<span class="sd">        The stock symbol(s) to query. Default is &quot;AAPL&quot;.</span>
<span class="sd">    provider : OBB_EQUITY_PRICE_HISTORICAL_PROVIDERS</span>
<span class="sd">        The data provider for historical price data. Default is &quot;yahoo&quot;.</span>
<span class="sd">    membership : Literal[&quot;anonymous&quot;, &quot;humblPEON&quot;, &quot;humblPREMIUM&quot;, &quot;humblPOWER&quot;, &quot;humblPERMANENT&quot;, &quot;admin&quot;]</span>
<span class="sd">        The membership level of the user accessing the data. Default is &quot;anonymous&quot;.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    symbol : str or list of str</span>
<span class="sd">        The stock symbol(s) to query.</span>
<span class="sd">    provider : OBB_EQUITY_PRICE_HISTORICAL_PROVIDERS</span>
<span class="sd">        The data provider for historical price data.</span>
<span class="sd">    membership : Literal[&quot;anonymous&quot;, &quot;humblPEON&quot;, &quot;humblPREMIUM&quot;, &quot;humblPOWER&quot;, &quot;humblPERMANENT&quot;, &quot;admin&quot;]</span>
<span class="sd">        The membership level of the user.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">symbols</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;AAPL&quot;</span><span class="p">],</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Symbols&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;symbols&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">provider</span><span class="p">:</span> <span class="n">OBB_EQUITY_PRICE_HISTORICAL_PROVIDERS</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;yfinance&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Provider&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;provider&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">membership</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span>
        <span class="s2">&quot;anonymous&quot;</span><span class="p">,</span>
        <span class="s2">&quot;humblPEON&quot;</span><span class="p">,</span>
        <span class="s2">&quot;humblPREMIUM&quot;</span><span class="p">,</span>
        <span class="s2">&quot;humblPOWER&quot;</span><span class="p">,</span>
        <span class="s2">&quot;humblPERMANENT&quot;</span><span class="p">,</span>
        <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;anonymous&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Membership&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;membership&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;symbols&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">,</span> <span class="n">check_fields</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">upper_symbol</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the stock symbols to uppercase and remove empty strings.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        v : Union[str, List[str], Set[str]]</span>
<span class="sd">            The stock symbol or collection of symbols to be converted.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[str]</span>
<span class="sd">            A list of uppercase stock symbols with empty strings removed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Handle empty inputs</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="c1"># If v is a string, split it by commas into a list. Otherwise, ensure it&#39;s a list.</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="nb">list</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

        <span class="c1"># Convert all elements to uppercase, trim whitespace, and remove empty strings</span>
        <span class="n">valid_symbols</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">symbol</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">v</span> <span class="k">if</span> <span class="n">symbol</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">valid_symbols</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;At least one valid symbol (str) must be provided&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">valid_symbols</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h6 id="humbldata.core.standard_models.portfolio.PortfolioQueryParams.upper_symbol" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.portfolio.PortfolioQueryParams.upper_symbol</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#humbldata.core.standard_models.portfolio.PortfolioQueryParams.upper_symbol" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">upper_symbol</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">set</span><span class="p">[</span><span class="n">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Convert the stock symbols to uppercase and remove empty strings.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>v</code></td>
          <td>
                <code>Union[str, List[str], Set[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The stock symbol or collection of symbols to be converted.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>List[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of uppercase stock symbols with empty strings removed.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/portfolio/__init__.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;symbols&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">,</span> <span class="n">check_fields</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">upper_symbol</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the stock symbols to uppercase and remove empty strings.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    v : Union[str, List[str], Set[str]]</span>
<span class="sd">        The stock symbol or collection of symbols to be converted.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    List[str]</span>
<span class="sd">        A list of uppercase stock symbols with empty strings removed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Handle empty inputs</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="c1"># If v is a string, split it by commas into a list. Otherwise, ensure it&#39;s a list.</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="nb">list</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

    <span class="c1"># Convert all elements to uppercase, trim whitespace, and remove empty strings</span>
    <span class="n">valid_symbols</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">symbol</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">v</span> <span class="k">if</span> <span class="n">symbol</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">valid_symbols</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;At least one valid symbol (str) must be provided&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">valid_symbols</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>






<div class="doc doc-object doc-class">



<h5 id="humbldata.core.standard_models.portfolio.PortfolioData" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.portfolio.PortfolioData</span>


<a href="#humbldata.core.standard_models.portfolio.PortfolioData" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.data.Data" href="../core/#humbldata.core.standard_models.abstract.data.Data">Data</a></code></p>

  
      <p>The Data for the PortfolioController.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/portfolio/__init__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PortfolioData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Data for the PortfolioController.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Add your data model fields here</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="humbldata.core.standard_models.toolbox" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.toolbox</span>


<a href="#humbldata.core.standard_models.toolbox" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || <strong>Category: Standardized Framework Model</strong>.</p>
<p>This module defines the QueryParams and Data classes for the Toolbox context.
THis is where all of the context(s) of your project go. The STANDARD MODELS for
categories and subsequent commands are nested here.</p>



  <p><span class="doc-section-title">Classes:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams">ToolboxQueryParams</a></code></td>
          <td>
            <div class="doc-md-description">
              <p>Query parameters for the ToolboxController.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxData" href="../core/#humbldata.core.standard_models.toolbox.ToolboxData">ToolboxData</a></code></td>
          <td>
            <div class="doc-md-description">
              <p>A Pydantic model that defines the data returned by the ToolboxController.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Attributes:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.toolbox.symbol">symbol</span></code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The symbol/ticker of the stock.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.toolbox.interval">interval</span></code></td>
          <td>
                <code>Optional[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The interval of the data. Defaults to '1d'.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.toolbox.start_date">start_date</span></code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The start date of the data.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.toolbox.end_date">end_date</span></code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The end date of the data.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h5 id="humbldata.core.standard_models.toolbox.fundamental" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.toolbox.fundamental</span>


<a href="#humbldata.core.standard_models.toolbox.fundamental" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h6 id="humbldata.core.standard_models.toolbox.fundamental.humbl_compass" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.toolbox.fundamental.humbl_compass</span>


<a href="#humbldata.core.standard_models.toolbox.fundamental.humbl_compass" class="headerlink" title="Permanent link">¤</a></h6>

  <div class="doc doc-contents ">
  
      <p>HumblCompass Standard Model.</p>
<p>Context: Toolbox || Category: Fundamental || Command: humbl_compass.</p>
<p>This module is used to define the QueryParams and Data model for the
HumblCompass command.</p>

  

  <div class="doc doc-children">











































<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.AssetRecommendation" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.toolbox.fundamental.humbl_compass.AssetRecommendation</span>


<a href="#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.AssetRecommendation" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code>str</code>, <code><span title="enum.Enum">Enum</span></code></p>

  
      <p>Asset recommendation categories.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/fundamental/humbl_compass.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">AssetRecommendation</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Asset recommendation categories.&quot;&quot;&quot;</span>

    <span class="n">EQUITIES</span> <span class="o">=</span> <span class="s2">&quot;Equities&quot;</span>
    <span class="n">CREDIT</span> <span class="o">=</span> <span class="s2">&quot;Credit&quot;</span>
    <span class="n">COMMODITIES</span> <span class="o">=</span> <span class="s2">&quot;Commodities&quot;</span>
    <span class="n">FX</span> <span class="o">=</span> <span class="s2">&quot;FX&quot;</span>
    <span class="n">FIXED_INCOME</span> <span class="o">=</span> <span class="s2">&quot;Fixed Income&quot;</span>
    <span class="n">USD</span> <span class="o">=</span> <span class="s2">&quot;USD&quot;</span>
    <span class="n">GOLD</span> <span class="o">=</span> <span class="s2">&quot;Gold&quot;</span>
    <span class="n">TECHNOLOGY</span> <span class="o">=</span> <span class="s2">&quot;Technology&quot;</span>
    <span class="n">CONSUMER_DISCRETIONARY</span> <span class="o">=</span> <span class="s2">&quot;Consumer Discretionary&quot;</span>
    <span class="n">MATERIALS</span> <span class="o">=</span> <span class="s2">&quot;Materials&quot;</span>
    <span class="n">INDUSTRIALS</span> <span class="o">=</span> <span class="s2">&quot;Industrials&quot;</span>
    <span class="n">UTILITIES</span> <span class="o">=</span> <span class="s2">&quot;Utilities&quot;</span>
    <span class="n">REITS</span> <span class="o">=</span> <span class="s2">&quot;REITs&quot;</span>
    <span class="n">CONSUMER_STAPLES</span> <span class="o">=</span> <span class="s2">&quot;Consumer Staples&quot;</span>
    <span class="n">FINANCIALS</span> <span class="o">=</span> <span class="s2">&quot;Financials&quot;</span>
    <span class="n">ENERGY</span> <span class="o">=</span> <span class="s2">&quot;Energy&quot;</span>
    <span class="n">HEALTH_CARE</span> <span class="o">=</span> <span class="s2">&quot;Health Care&quot;</span>
    <span class="n">TELECOM</span> <span class="o">=</span> <span class="s2">&quot;Telecom&quot;</span>
    <span class="n">HIGH_BETA</span> <span class="o">=</span> <span class="s2">&quot;High Beta&quot;</span>
    <span class="n">MOMENTUM</span> <span class="o">=</span> <span class="s2">&quot;Momentum&quot;</span>
    <span class="n">CYCLICALS</span> <span class="o">=</span> <span class="s2">&quot;Cyclicals&quot;</span>
    <span class="n">SECULAR_GROWTH</span> <span class="o">=</span> <span class="s2">&quot;Secular Growth&quot;</span>
    <span class="n">LOW_BETA</span> <span class="o">=</span> <span class="s2">&quot;Low Beta&quot;</span>
    <span class="n">DEFENSIVES</span> <span class="o">=</span> <span class="s2">&quot;Defensives&quot;</span>
    <span class="n">VALUE</span> <span class="o">=</span> <span class="s2">&quot;Value&quot;</span>
    <span class="n">DIVIDEND_YIELD</span> <span class="o">=</span> <span class="s2">&quot;Dividend Yield&quot;</span>
    <span class="n">QUALITY</span> <span class="o">=</span> <span class="s2">&quot;Quality&quot;</span>
    <span class="n">CYCLICAL_GROWTH</span> <span class="o">=</span> <span class="s2">&quot;Cyclical Growth&quot;</span>
    <span class="n">SMALL_CAPS</span> <span class="o">=</span> <span class="s2">&quot;Small Caps&quot;</span>
    <span class="n">MID_CAPS</span> <span class="o">=</span> <span class="s2">&quot;Mid Caps&quot;</span>
    <span class="n">BDCS</span> <span class="o">=</span> <span class="s2">&quot;BDCs&quot;</span>
    <span class="n">CONVERTIBLES</span> <span class="o">=</span> <span class="s2">&quot;Convertibles&quot;</span>
    <span class="n">HY_CREDIT</span> <span class="o">=</span> <span class="s2">&quot;HY Credit&quot;</span>
    <span class="n">EM_DEBT</span> <span class="o">=</span> <span class="s2">&quot;EM Debt&quot;</span>
    <span class="n">TIPS</span> <span class="o">=</span> <span class="s2">&quot;TIPS&quot;</span>
    <span class="n">SHORT_DURATION_TREASURIES</span> <span class="o">=</span> <span class="s2">&quot;Short Duration Treasuries&quot;</span>
    <span class="n">MORTGAGE_BACKED_SECURITIES</span> <span class="o">=</span> <span class="s2">&quot;Mortgage Backed Securities&quot;</span>
    <span class="n">MEDIUM_DURATION_TREASURIES</span> <span class="o">=</span> <span class="s2">&quot;Medium Duration Treasuries&quot;</span>
    <span class="n">LONG_DURATION_TREASURIES</span> <span class="o">=</span> <span class="s2">&quot;Long Duration Treasuries&quot;</span>
    <span class="n">IG_CREDIT</span> <span class="o">=</span> <span class="s2">&quot;Investment Grade Credit&quot;</span>
    <span class="n">MUNIS</span> <span class="o">=</span> <span class="s2">&quot;Municipal Bonds&quot;</span>
    <span class="n">PREFERREDS</span> <span class="o">=</span> <span class="s2">&quot;Preferreds&quot;</span>
    <span class="n">EM_LOCAL_CURRENCY</span> <span class="o">=</span> <span class="s2">&quot;Emerging Market Local Currency&quot;</span>
    <span class="n">LEVERAGED_LOANS</span> <span class="o">=</span> <span class="s2">&quot;Leveraged Loans&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





  </div>

  </div>


</div>






<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.RecommendationCategory" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.toolbox.fundamental.humbl_compass.RecommendationCategory</span>


<a href="#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.RecommendationCategory" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>

  
      <p>Category-specific recommendations with rationale.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/fundamental/humbl_compass.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RecommendationCategory</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Category-specific recommendations with rationale.&quot;&quot;&quot;</span>

    <span class="n">best</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AssetRecommendation</span><span class="p">]</span>
    <span class="n">worst</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AssetRecommendation</span><span class="p">]</span>
    <span class="n">rationale</span><span class="p">:</span> <span class="nb">str</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





  </div>

  </div>


</div>






<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.RegimeRecommendations" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.toolbox.fundamental.humbl_compass.RegimeRecommendations</span>


<a href="#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.RegimeRecommendations" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>

  
      <p>Complete set of recommendations for a specific regime.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/fundamental/humbl_compass.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RegimeRecommendations</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Complete set of recommendations for a specific regime.&quot;&quot;&quot;</span>

    <span class="n">asset_classes</span><span class="p">:</span> <span class="n">RecommendationCategory</span>
    <span class="n">equity_sectors</span><span class="p">:</span> <span class="n">RecommendationCategory</span>
    <span class="n">equity_factors</span><span class="p">:</span> <span class="n">RecommendationCategory</span>
    <span class="n">fixed_income</span><span class="p">:</span> <span class="n">RecommendationCategory</span>
    <span class="n">regime_description</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">key_risks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">last_updated</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





  </div>

  </div>


</div>






<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassQueryParams" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassQueryParams</span>


<a href="#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassQueryParams" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.query_params.QueryParams" href="../core/#humbldata.core.standard_models.abstract.query_params.QueryParams">QueryParams</a></code></p>

  
      <p>QueryParams model for the HumblCompass command, a Pydantic v2 model.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>country</code></td>
          <td>
                <code><span title="typing.Literal">Literal</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The country or group of countries to collect humblCOMPASS data for.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>cli_start_date</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The adjusted start date for CLI data collection.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>cpi_start_date</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The adjusted start date for CPI data collection.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>z_score</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The time window for z-score calculation (e.g., "1 year", "18 months").</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>chart</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to return a chart object.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>template</code></td>
          <td>
                <code><span title="typing.Literal">Literal</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The template/theme to use for the plotly figure.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/fundamental/humbl_compass.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">HumblCompassQueryParams</span><span class="p">(</span><span class="n">QueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    QueryParams model for the HumblCompass command, a Pydantic v2 model.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    country : Literal</span>
<span class="sd">        The country or group of countries to collect humblCOMPASS data for.</span>
<span class="sd">    cli_start_date : str</span>
<span class="sd">        The adjusted start date for CLI data collection.</span>
<span class="sd">    cpi_start_date : str</span>
<span class="sd">        The adjusted start date for CPI data collection.</span>
<span class="sd">    z_score : Optional[str]</span>
<span class="sd">        The time window for z-score calculation (e.g., &quot;1 year&quot;, &quot;18 months&quot;).</span>
<span class="sd">    chart : bool</span>
<span class="sd">        Whether to return a chart object.</span>
<span class="sd">    template : Literal</span>
<span class="sd">        The template/theme to use for the plotly figure.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">country</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span>
        <span class="s2">&quot;g20&quot;</span><span class="p">,</span>
        <span class="s2">&quot;g7&quot;</span><span class="p">,</span>
        <span class="s2">&quot;asia5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;north_america&quot;</span><span class="p">,</span>
        <span class="s2">&quot;europe4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;australia&quot;</span><span class="p">,</span>
        <span class="s2">&quot;brazil&quot;</span><span class="p">,</span>
        <span class="s2">&quot;canada&quot;</span><span class="p">,</span>
        <span class="s2">&quot;china&quot;</span><span class="p">,</span>
        <span class="s2">&quot;france&quot;</span><span class="p">,</span>
        <span class="s2">&quot;germany&quot;</span><span class="p">,</span>
        <span class="s2">&quot;india&quot;</span><span class="p">,</span>
        <span class="s2">&quot;indonesia&quot;</span><span class="p">,</span>
        <span class="s2">&quot;italy&quot;</span><span class="p">,</span>
        <span class="s2">&quot;japan&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mexico&quot;</span><span class="p">,</span>
        <span class="s2">&quot;south_africa&quot;</span><span class="p">,</span>
        <span class="s2">&quot;south_korea&quot;</span><span class="p">,</span>
        <span class="s2">&quot;spain&quot;</span><span class="p">,</span>
        <span class="s2">&quot;turkey&quot;</span><span class="p">,</span>
        <span class="s2">&quot;united_kingdom&quot;</span><span class="p">,</span>
        <span class="s2">&quot;united_states&quot;</span><span class="p">,</span>
        <span class="s2">&quot;all&quot;</span><span class="p">,</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;united_states&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Country for humblCOMPASS data&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">HUMBLCOMPASS_QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;country&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">cli_start_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Adjusted start date for CLI data&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The adjusted start date for CLI data collection.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">cpi_start_date</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Adjusted start date for CPI data&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The adjusted start date for CPI data collection.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">z_score</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Z-score calculation window&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The time window for z-score calculation (e.g., &#39;1 year&#39;, &#39;18 months&#39;).&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">chart</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Results Chart&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">HUMBLCOMPASS_QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;chart&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">template</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span>
        <span class="s2">&quot;humbl_dark&quot;</span><span class="p">,</span>
        <span class="s2">&quot;humbl_light&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ggplot2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;seaborn&quot;</span><span class="p">,</span>
        <span class="s2">&quot;simple_white&quot;</span><span class="p">,</span>
        <span class="s2">&quot;plotly&quot;</span><span class="p">,</span>
        <span class="s2">&quot;plotly_white&quot;</span><span class="p">,</span>
        <span class="s2">&quot;plotly_dark&quot;</span><span class="p">,</span>
        <span class="s2">&quot;presentation&quot;</span><span class="p">,</span>
        <span class="s2">&quot;xgridoff&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ygridoff&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gridon&quot;</span><span class="p">,</span>
        <span class="s2">&quot;none&quot;</span><span class="p">,</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;humbl_dark&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Plotly Template&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">HUMBLCOMPASS_QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;template&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">recommendations</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Investment Recommendations&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether to include investment recommendations based on the HUMBL regime.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





  </div>

  </div>


</div>






<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassData" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassData</span>


<a href="#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassData" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.data.Data" href="../core/#humbldata.core.standard_models.abstract.data.Data">Data</a></code></p>

  
      <p>Data model for the humbl_compass command, a Pandera.Polars Model.</p>
<p>This Data model is used to validate data in the <code>.transform_data()</code> method of the <code>HumblCompassFetcher</code> class.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/fundamental/humbl_compass.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">HumblCompassData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Data model for the humbl_compass command, a Pandera.Polars Model.</span>

<span class="sd">    This Data model is used to validate data in the `.transform_data()` method of the `HumblCompassFetcher` class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">date_month_start</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Date</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">HUMBLCOMPASS_DATA_DESCRIPTIONS</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">country</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Country&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">HUMBLCOMPASS_DATA_DESCRIPTIONS</span><span class="p">[</span><span class="s2">&quot;country&quot;</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">cpi</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Float64</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Consumer Price Index (CPI)&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">HUMBLCOMPASS_DATA_DESCRIPTIONS</span><span class="p">[</span><span class="s2">&quot;cpi&quot;</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">cpi_3m_delta</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Float64</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Consumer Price Index (CPI) 3-Month Delta&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">HUMBLCOMPASS_DATA_DESCRIPTIONS</span><span class="p">[</span><span class="s2">&quot;cpi_3m_delta&quot;</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">cpi_zscore</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Float64</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Consumer Price Index (CPI) 1-Year Z-Score&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">HUMBLCOMPASS_DATA_DESCRIPTIONS</span><span class="p">[</span><span class="s2">&quot;cpi_1yr_zscore&quot;</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">cli</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Float64</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Composite Leading Indicator (CLI)&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">HUMBLCOMPASS_DATA_DESCRIPTIONS</span><span class="p">[</span><span class="s2">&quot;cli&quot;</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">cli_3m_delta</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Float64</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Composite Leading Indicator (CLI) 3-Month Delta&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">HUMBLCOMPASS_DATA_DESCRIPTIONS</span><span class="p">[</span><span class="s2">&quot;cli_3m_delta&quot;</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">cli_zscore</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Float64</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Composite Leading Indicator (CLI) 1-Year Z-Score&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">HUMBLCOMPASS_DATA_DESCRIPTIONS</span><span class="p">[</span><span class="s2">&quot;cli_1yr_zscore&quot;</span><span class="p">],</span>
    <span class="p">)</span>
    <span class="n">humbl_regime</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;HUMBL Regime&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">HUMBLCOMPASS_DATA_DESCRIPTIONS</span><span class="p">[</span><span class="s2">&quot;humbl_regime&quot;</span><span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





  </div>

  </div>


</div>






<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher</span>


<a href="#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">

  
      <p>Fetcher for the HumblCompass command.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>context_params</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams">ToolboxQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The context parameters for the Toolbox query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>command_params</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassQueryParams" href="../core/#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassQueryParams">HumblCompassQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The command-specific parameters for the HumblCompass query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Attributes:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.context_params">context_params</span></code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams">ToolboxQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Stores the context parameters passed during initialization.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.command_params">command_params</span></code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassQueryParams" href="../core/#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassQueryParams">HumblCompassQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Stores the command-specific parameters passed during initialization.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.data">data</span></code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The raw data extracted from the data provider, before transformation.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Methods:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.transform_query" href="../core/#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.transform_query">transform_query</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Transform the command-specific parameters into a query.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.extract_data" href="../core/#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.extract_data">extract_data</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Extracts the data from the provider and returns it as a Polars DataFrame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.transform_data" href="../core/#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.transform_data">transform_data</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Transforms the command-specific data according to the HumblCompass logic.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.fetch_data" href="../core/#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.fetch_data">fetch_data</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Execute TET Pattern.</p>
              </div>
            </td>
          </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.humblobject.HumblObject" href="../core/#humbldata.core.standard_models.abstract.humblobject.HumblObject">HumblObject</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>results : HumblCompassData
    Serializable results.
provider : Literal['fmp', 'intrinio', 'polygon', 'tiingo', 'yfinance']
    Provider name.
warnings : Optional[List[Warning_]]
    List of warnings.
chart : Optional[Chart]
    Chart object.
context_params : ToolboxQueryParams
    Context-specific parameters.
command_params : HumblCompassQueryParams
    Command-specific parameters.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/fundamental/humbl_compass.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">HumblCompassFetcher</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetcher for the HumblCompass command.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    context_params : ToolboxQueryParams</span>
<span class="sd">        The context parameters for the Toolbox query.</span>
<span class="sd">    command_params : HumblCompassQueryParams</span>
<span class="sd">        The command-specific parameters for the HumblCompass query.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    context_params : ToolboxQueryParams</span>
<span class="sd">        Stores the context parameters passed during initialization.</span>
<span class="sd">    command_params : HumblCompassQueryParams</span>
<span class="sd">        Stores the command-specific parameters passed during initialization.</span>
<span class="sd">    data : pl.DataFrame</span>
<span class="sd">        The raw data extracted from the data provider, before transformation.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    transform_query()</span>
<span class="sd">        Transform the command-specific parameters into a query.</span>
<span class="sd">    extract_data()</span>
<span class="sd">        Extracts the data from the provider and returns it as a Polars DataFrame.</span>
<span class="sd">    transform_data()</span>
<span class="sd">        Transforms the command-specific data according to the HumblCompass logic.</span>
<span class="sd">    fetch_data()</span>
<span class="sd">        Execute TET Pattern.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    HumblObject</span>
<span class="sd">        results : HumblCompassData</span>
<span class="sd">            Serializable results.</span>
<span class="sd">        provider : Literal[&#39;fmp&#39;, &#39;intrinio&#39;, &#39;polygon&#39;, &#39;tiingo&#39;, &#39;yfinance&#39;]</span>
<span class="sd">            Provider name.</span>
<span class="sd">        warnings : Optional[List[Warning_]]</span>
<span class="sd">            List of warnings.</span>
<span class="sd">        chart : Optional[Chart]</span>
<span class="sd">            Chart object.</span>
<span class="sd">        context_params : ToolboxQueryParams</span>
<span class="sd">            Context-specific parameters.</span>
<span class="sd">        command_params : HumblCompassQueryParams</span>
<span class="sd">            Command-specific parameters.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context_params</span><span class="p">:</span> <span class="n">ToolboxQueryParams</span><span class="p">,</span>
        <span class="n">command_params</span><span class="p">:</span> <span class="n">HumblCompassQueryParams</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the HumblCompassFetcher with context and command parameters.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        context_params : ToolboxQueryParams</span>
<span class="sd">            The context parameters for the Toolbox query.</span>
<span class="sd">        command_params : HumblCompassQueryParams</span>
<span class="sd">            The command-specific parameters for the HumblCompass query.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span> <span class="o">=</span> <span class="n">context_params</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="n">command_params</span>

    <span class="k">def</span> <span class="nf">transform_query</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transform the command-specific parameters into a query.</span>

<span class="sd">        If command_params is not provided, it initializes a default HumblCompassQueryParams object.</span>
<span class="sd">        Calculates adjusted start dates for CLI and CPI data collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="n">HumblCompassQueryParams</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="n">HumblCompassQueryParams</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">)</span>

        <span class="c1"># Calculate adjusted start dates</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">start_date</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">start_date</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span>
                <span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">start_date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)]</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">start_date</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">start_date</span><span class="p">])</span>

        <span class="c1"># Calculate z-score window in months</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">z_score</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">membership</span> <span class="o">!=</span> <span class="s2">&quot;humblPEON&quot;</span>
        <span class="p">):</span>
            <span class="n">z_score_months_str</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">z_score</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span> <span class="o">=</span> <span class="n">_window_format_monthly</span><span class="p">(</span><span class="n">z_score_months_str</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">membership</span> <span class="o">==</span> <span class="s2">&quot;humblPEON&quot;</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;Z-score is not calculated for humblPEON membership level.&quot;</span>
            <span class="p">)</span>

        <span class="n">cli_start_date</span> <span class="o">=</span> <span class="n">start_date</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">offset_by</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span><span class="si">}</span><span class="s2">mo&quot;</span>
        <span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">cpi_start_date</span> <span class="o">=</span> <span class="n">start_date</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">offset_by</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span><span class="si">}</span><span class="s2">mo&quot;</span>
        <span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># Update the command_params with the new start dates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">model_copy</span><span class="p">(</span>
            <span class="n">update</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;cli_start_date&quot;</span><span class="p">:</span> <span class="n">cli_start_date</span><span class="p">,</span>
                <span class="s2">&quot;cpi_start_date&quot;</span><span class="p">:</span> <span class="n">cpi_start_date</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;CLI start date: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">cli_start_date</span><span class="si">}</span><span class="s2"> and CPI start date: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">cpi_start_date</span><span class="si">}</span><span class="s2">. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Dates are adjusted to account for CLI data release lag and z-score calculation window.&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">extract_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract the data from the provider and returns it as a Polars DataFrame.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        self</span>
<span class="sd">            The HumblCompassFetcher instance with extracted data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Collect CLI Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oecd_cli_data</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">obb</span><span class="o">.</span><span class="n">economy</span><span class="o">.</span><span class="n">composite_leading_indicator</span><span class="p">(</span>
                <span class="n">start_date</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">cli_start_date</span><span class="p">,</span>
                <span class="n">end_date</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">end_date</span><span class="p">,</span>
                <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;oecd&quot;</span><span class="p">,</span>
                <span class="n">country</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">country</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">to_polars</span><span class="p">()</span>
            <span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
            <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;cli&quot;</span><span class="p">})</span>
            <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">[</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month_start</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;date_month_start&quot;</span><span class="p">)]</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Collect YoY CPI Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oecd_cpi_data</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">obb</span><span class="o">.</span><span class="n">economy</span><span class="o">.</span><span class="n">cpi</span><span class="p">(</span>
                <span class="n">start_date</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">cpi_start_date</span><span class="p">,</span>
                <span class="n">end_date</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">end_date</span><span class="p">,</span>
                <span class="n">frequency</span><span class="o">=</span><span class="s2">&quot;monthly&quot;</span><span class="p">,</span>
                <span class="n">country</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">country</span><span class="p">,</span>
                <span class="n">transform</span><span class="o">=</span><span class="s2">&quot;yoy&quot;</span><span class="p">,</span>
                <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;oecd&quot;</span><span class="p">,</span>
                <span class="n">harmonized</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">expenditure</span><span class="o">=</span><span class="s2">&quot;total&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">to_polars</span><span class="p">()</span>
            <span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
            <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;cpi&quot;</span><span class="p">})</span>
            <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">[</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month_start</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;date_month_start&quot;</span><span class="p">)]</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">transform_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transform the command-specific data according to the humbl_compass logic.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        self</span>
<span class="sd">            The HumblCompassFetcher instance with transformed data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Combine CLI and CPI data</span>
        <span class="c1"># CLI data is released before CPI data, so we use a left join</span>
        <span class="n">combined_data</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">oecd_cli_data</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">oecd_cpi_data</span><span class="p">,</span>
                <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;date_month_start&quot;</span><span class="p">,</span> <span class="s2">&quot;country&quot;</span><span class="p">],</span>
                <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
                <span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;_cpi&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;date_month_start&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;country&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span><span class="p">),</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Float64</span><span class="p">),</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Float64</span><span class="p">)</span>
                    <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>  <span class="c1"># Convert CPI to percentage</span>
                <span class="p">]</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">rename</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;date_cli&quot;</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">select</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="s2">&quot;date_month_start&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;date_cli&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;date_cpi&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;country&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;cli&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;cpi&quot;</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Calculate 3-month deltas</span>
        <span class="n">delta_window</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">transformed_data</span> <span class="o">=</span> <span class="n">combined_data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">delta_window</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span>
                    <span class="s2">&quot;cli_3m_delta&quot;</span>
                <span class="p">),</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">delta_window</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span>
                    <span class="s2">&quot;cpi_3m_delta&quot;</span>
                <span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># Add this after calculating 3-month deltas in transform_data()</span>
        <span class="n">transformed_data</span> <span class="o">=</span> <span class="n">transformed_data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi_3m_delta&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli_3m_delta&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;humblBLOAT&quot;</span><span class="p">))</span>
                <span class="o">.</span><span class="n">when</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi_3m_delta&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli_3m_delta&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;humblBOUNCE&quot;</span><span class="p">))</span>
                <span class="o">.</span><span class="n">when</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi_3m_delta&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli_3m_delta&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;humblBOOM&quot;</span><span class="p">))</span>
                <span class="o">.</span><span class="n">when</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi_3m_delta&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli_3m_delta&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;humblBUST&quot;</span><span class="p">))</span>
                <span class="o">.</span><span class="n">otherwise</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;humbl_regime&quot;</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># Calculate z-scores only if self.z_score_months is greater than 0 and membership is not humblPEON</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">membership</span> <span class="o">!=</span> <span class="s2">&quot;humblPEON&quot;</span>
        <span class="p">):</span>
            <span class="n">transformed_data</span> <span class="o">=</span> <span class="n">transformed_data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span>
                        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="s2">&quot;country&quot;</span><span class="p">)</span>
                        <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span>
                    <span class="p">)</span>
                    <span class="o">.</span><span class="n">then</span><span class="p">(</span>
                        <span class="p">(</span>
                            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span>
                            <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rolling_mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span><span class="p">)</span>
                        <span class="p">)</span>
                        <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rolling_std</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;cli_zscore&quot;</span><span class="p">),</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span>
                        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="s2">&quot;country&quot;</span><span class="p">)</span>
                        <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span>
                    <span class="p">)</span>
                    <span class="o">.</span><span class="n">then</span><span class="p">(</span>
                        <span class="p">(</span>
                            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span>
                            <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rolling_mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span><span class="p">)</span>
                        <span class="p">)</span>
                        <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rolling_std</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;cpi_zscore&quot;</span><span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="c1"># Select columns based on whether z-scores were calculated</span>
        <span class="n">columns_to_select</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;date_month_start&quot;</span><span class="p">),</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;country&quot;</span><span class="p">),</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi_3m_delta&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli_3m_delta&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;humbl_regime&quot;</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">membership</span> <span class="o">!=</span> <span class="s2">&quot;humblPEON&quot;</span>
        <span class="p">):</span>
            <span class="n">columns_to_select</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi_zscore&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli_zscore&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span> <span class="o">=</span> <span class="n">transformed_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">columns_to_select</span><span class="p">)</span>

        <span class="c1"># Validate the data using HumblCompassData</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span> <span class="o">=</span> <span class="n">HumblCompassData</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">()</span>  <span class="c1"># removes preceding 3 months used for delta calculations</span>
        <span class="p">)</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>

        <span class="c1"># Generate chart if requested</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chart</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">chart</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">chart</span> <span class="o">=</span> <span class="n">generate_plots</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="p">,</span>
                <span class="n">template</span><span class="o">=</span><span class="n">ChartTemplate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">template</span><span class="p">),</span>
            <span class="p">)</span>

        <span class="c1"># Add warning if z_score is None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">z_score</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;warnings&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">HumblDataWarning</span><span class="p">(</span>
                    <span class="n">category</span><span class="o">=</span><span class="s2">&quot;HumblCompassFetcher&quot;</span><span class="p">,</span>
                    <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Z-score defaulted to None. No z-score data will be calculated.&quot;</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="c1"># Add recommendations if requested</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">recommendations</span><span class="p">:</span>
            <span class="n">latest_regime</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;humbl_regime&quot;</span><span class="p">))</span>
                <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
                <span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">latest_regime</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGIME_RECOMMENDATIONS</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;warnings&quot;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">HumblDataWarning</span><span class="p">(</span>
                        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;HumblCompassFetcher&quot;</span><span class="p">,</span>
                        <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;No recommendations available for regime: </span><span class="si">{</span><span class="n">latest_regime</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">recommendations</span> <span class="o">=</span> <span class="n">REGIME_RECOMMENDATIONS</span><span class="p">[</span><span class="n">latest_regime</span><span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;extra&quot;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">[</span><span class="s2">&quot;humbl_regime_recommendations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">recommendations</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
                <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;binary&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="nd">@log_start_end</span><span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">fetch_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute TET Pattern.</span>

<span class="sd">        This method executes the query transformation, data fetching and</span>
<span class="sd">        transformation process by first calling `transform_query` to prepare the query parameters, then</span>
<span class="sd">        extracting the raw data using `extract_data` method, and finally</span>
<span class="sd">        transforming the raw data using `transform_data` method.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        HumblObject</span>
<span class="sd">            The HumblObject containing the transformed data and metadata.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transform_query</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extract_data</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transform_data</span><span class="p">()</span>

        <span class="c1"># Initialize warnings list if it doesn&#39;t exist</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span> <span class="s2">&quot;warnings&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Initialize fetcher warnings if they don&#39;t exist</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;warnings&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Initialize extra dict if it doesn&#39;t exist</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;extra&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Combine warnings from both sources</span>
        <span class="n">all_warnings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">warnings</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">warnings</span>

        <span class="k">return</span> <span class="n">HumblObject</span><span class="p">(</span>
            <span class="n">results</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="p">,</span>
            <span class="n">provider</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">provider</span><span class="p">,</span>
            <span class="n">warnings</span><span class="o">=</span><span class="n">all_warnings</span><span class="p">,</span>  <span class="c1"># Use combined warnings</span>
            <span class="n">chart</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart</span><span class="p">,</span>
            <span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span>
            <span class="n">command_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">,</span>
            <span class="n">extra</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span>  <span class="c1"># pipe in extra from transform_data()</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.__init__</span>


<a href="#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.__init__" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span><span class="nf">context_params</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams">ToolboxQueryParams</a></span><span class="p">,</span> <span class="n">command_params</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassQueryParams" href="../core/#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassQueryParams">HumblCompassQueryParams</a></span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Initialize the HumblCompassFetcher with context and command parameters.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>context_params</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams">ToolboxQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The context parameters for the Toolbox query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>command_params</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassQueryParams" href="../core/#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassQueryParams">HumblCompassQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The command-specific parameters for the HumblCompass query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/fundamental/humbl_compass.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">context_params</span><span class="p">:</span> <span class="n">ToolboxQueryParams</span><span class="p">,</span>
    <span class="n">command_params</span><span class="p">:</span> <span class="n">HumblCompassQueryParams</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the HumblCompassFetcher with context and command parameters.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    context_params : ToolboxQueryParams</span>
<span class="sd">        The context parameters for the Toolbox query.</span>
<span class="sd">    command_params : HumblCompassQueryParams</span>
<span class="sd">        The command-specific parameters for the HumblCompass query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span> <span class="o">=</span> <span class="n">context_params</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="n">command_params</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.transform_query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.transform_query</span>


<a href="#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.transform_query" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">transform_query</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Transform the command-specific parameters into a query.</p>
<p>If command_params is not provided, it initializes a default HumblCompassQueryParams object.
Calculates adjusted start dates for CLI and CPI data collection.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/fundamental/humbl_compass.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transform_query</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transform the command-specific parameters into a query.</span>

<span class="sd">    If command_params is not provided, it initializes a default HumblCompassQueryParams object.</span>
<span class="sd">    Calculates adjusted start dates for CLI and CPI data collection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="n">HumblCompassQueryParams</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="n">HumblCompassQueryParams</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">)</span>

    <span class="c1"># Calculate adjusted start dates</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">start_date</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">start_date</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span>
            <span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">start_date</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)]</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">start_date</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">start_date</span><span class="p">])</span>

    <span class="c1"># Calculate z-score window in months</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">z_score</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">membership</span> <span class="o">!=</span> <span class="s2">&quot;humblPEON&quot;</span>
    <span class="p">):</span>
        <span class="n">z_score_months_str</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">z_score</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span> <span class="o">=</span> <span class="n">_window_format_monthly</span><span class="p">(</span><span class="n">z_score_months_str</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">membership</span> <span class="o">==</span> <span class="s2">&quot;humblPEON&quot;</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;Z-score is not calculated for humblPEON membership level.&quot;</span>
        <span class="p">)</span>

    <span class="n">cli_start_date</span> <span class="o">=</span> <span class="n">start_date</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">offset_by</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span><span class="si">}</span><span class="s2">mo&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">cpi_start_date</span> <span class="o">=</span> <span class="n">start_date</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">offset_by</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span><span class="si">}</span><span class="s2">mo&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Update the command_params with the new start dates</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">model_copy</span><span class="p">(</span>
        <span class="n">update</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;cli_start_date&quot;</span><span class="p">:</span> <span class="n">cli_start_date</span><span class="p">,</span>
            <span class="s2">&quot;cpi_start_date&quot;</span><span class="p">:</span> <span class="n">cpi_start_date</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;CLI start date: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">cli_start_date</span><span class="si">}</span><span class="s2"> and CPI start date: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">cpi_start_date</span><span class="si">}</span><span class="s2">. &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;Dates are adjusted to account for CLI data release lag and z-score calculation window.&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.extract_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.extract_data</span>


<a href="#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.extract_data" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_data</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Extract the data from the provider and returns it as a Polars DataFrame.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>self</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The HumblCompassFetcher instance with extracted data.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/fundamental/humbl_compass.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">extract_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extract the data from the provider and returns it as a Polars DataFrame.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    self</span>
<span class="sd">        The HumblCompassFetcher instance with extracted data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Collect CLI Data</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">oecd_cli_data</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">obb</span><span class="o">.</span><span class="n">economy</span><span class="o">.</span><span class="n">composite_leading_indicator</span><span class="p">(</span>
            <span class="n">start_date</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">cli_start_date</span><span class="p">,</span>
            <span class="n">end_date</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">end_date</span><span class="p">,</span>
            <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;oecd&quot;</span><span class="p">,</span>
            <span class="n">country</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">country</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">to_polars</span><span class="p">()</span>
        <span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;cli&quot;</span><span class="p">})</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">[</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month_start</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;date_month_start&quot;</span><span class="p">)]</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Collect YoY CPI Data</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">oecd_cpi_data</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">obb</span><span class="o">.</span><span class="n">economy</span><span class="o">.</span><span class="n">cpi</span><span class="p">(</span>
            <span class="n">start_date</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">cpi_start_date</span><span class="p">,</span>
            <span class="n">end_date</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">end_date</span><span class="p">,</span>
            <span class="n">frequency</span><span class="o">=</span><span class="s2">&quot;monthly&quot;</span><span class="p">,</span>
            <span class="n">country</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">country</span><span class="p">,</span>
            <span class="n">transform</span><span class="o">=</span><span class="s2">&quot;yoy&quot;</span><span class="p">,</span>
            <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;oecd&quot;</span><span class="p">,</span>
            <span class="n">harmonized</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">expenditure</span><span class="o">=</span><span class="s2">&quot;total&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">to_polars</span><span class="p">()</span>
        <span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;cpi&quot;</span><span class="p">})</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">[</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month_start</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;date_month_start&quot;</span><span class="p">)]</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.transform_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.transform_data</span>


<a href="#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.transform_data" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">transform_data</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Transform the command-specific data according to the humbl_compass logic.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>self</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The HumblCompassFetcher instance with transformed data.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/fundamental/humbl_compass.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transform_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transform the command-specific data according to the humbl_compass logic.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    self</span>
<span class="sd">        The HumblCompassFetcher instance with transformed data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Combine CLI and CPI data</span>
    <span class="c1"># CLI data is released before CPI data, so we use a left join</span>
    <span class="n">combined_data</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oecd_cli_data</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">oecd_cpi_data</span><span class="p">,</span>
            <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;date_month_start&quot;</span><span class="p">,</span> <span class="s2">&quot;country&quot;</span><span class="p">],</span>
            <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
            <span class="n">suffix</span><span class="o">=</span><span class="s2">&quot;_cpi&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;date_month_start&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;country&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span><span class="p">),</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Float64</span><span class="p">),</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Float64</span><span class="p">)</span>
                <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>  <span class="c1"># Convert CPI to percentage</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">rename</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;date_cli&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">select</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="s2">&quot;date_month_start&quot;</span><span class="p">,</span>
                <span class="s2">&quot;date_cli&quot;</span><span class="p">,</span>
                <span class="s2">&quot;date_cpi&quot;</span><span class="p">,</span>
                <span class="s2">&quot;country&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cli&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cpi&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Calculate 3-month deltas</span>
    <span class="n">delta_window</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">transformed_data</span> <span class="o">=</span> <span class="n">combined_data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">delta_window</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span>
                <span class="s2">&quot;cli_3m_delta&quot;</span>
            <span class="p">),</span>
            <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="n">delta_window</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span>
                <span class="s2">&quot;cpi_3m_delta&quot;</span>
            <span class="p">),</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Add this after calculating 3-month deltas in transform_data()</span>
    <span class="n">transformed_data</span> <span class="o">=</span> <span class="n">transformed_data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi_3m_delta&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli_3m_delta&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;humblBLOAT&quot;</span><span class="p">))</span>
            <span class="o">.</span><span class="n">when</span><span class="p">(</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi_3m_delta&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli_3m_delta&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;humblBOUNCE&quot;</span><span class="p">))</span>
            <span class="o">.</span><span class="n">when</span><span class="p">(</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi_3m_delta&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli_3m_delta&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;humblBOOM&quot;</span><span class="p">))</span>
            <span class="o">.</span><span class="n">when</span><span class="p">(</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi_3m_delta&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli_3m_delta&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;humblBUST&quot;</span><span class="p">))</span>
            <span class="o">.</span><span class="n">otherwise</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;humbl_regime&quot;</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Calculate z-scores only if self.z_score_months is greater than 0 and membership is not humblPEON</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">membership</span> <span class="o">!=</span> <span class="s2">&quot;humblPEON&quot;</span>
    <span class="p">):</span>
        <span class="n">transformed_data</span> <span class="o">=</span> <span class="n">transformed_data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="s2">&quot;country&quot;</span><span class="p">)</span>
                    <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span>
                <span class="p">)</span>
                <span class="o">.</span><span class="n">then</span><span class="p">(</span>
                    <span class="p">(</span>
                        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span>
                        <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rolling_mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rolling_std</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;cli_zscore&quot;</span><span class="p">),</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="s2">&quot;country&quot;</span><span class="p">)</span>
                    <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span>
                <span class="p">)</span>
                <span class="o">.</span><span class="n">then</span><span class="p">(</span>
                    <span class="p">(</span>
                        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span>
                        <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rolling_mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rolling_std</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;cpi_zscore&quot;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="c1"># Select columns based on whether z-scores were calculated</span>
    <span class="n">columns_to_select</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;date_month_start&quot;</span><span class="p">),</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;country&quot;</span><span class="p">),</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi_3m_delta&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli_3m_delta&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;humbl_regime&quot;</span><span class="p">),</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z_score_months</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">membership</span> <span class="o">!=</span> <span class="s2">&quot;humblPEON&quot;</span>
    <span class="p">):</span>
        <span class="n">columns_to_select</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cpi_zscore&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cli_zscore&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span> <span class="o">=</span> <span class="n">transformed_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">columns_to_select</span><span class="p">)</span>

    <span class="c1"># Validate the data using HumblCompassData</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span> <span class="o">=</span> <span class="n">HumblCompassData</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">()</span>  <span class="c1"># removes preceding 3 months used for delta calculations</span>
    <span class="p">)</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>

    <span class="c1"># Generate chart if requested</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">chart</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">chart</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chart</span> <span class="o">=</span> <span class="n">generate_plots</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="p">,</span>
            <span class="n">template</span><span class="o">=</span><span class="n">ChartTemplate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">template</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="c1"># Add warning if z_score is None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">z_score</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;warnings&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">HumblDataWarning</span><span class="p">(</span>
                <span class="n">category</span><span class="o">=</span><span class="s2">&quot;HumblCompassFetcher&quot;</span><span class="p">,</span>
                <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Z-score defaulted to None. No z-score data will be calculated.&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="c1"># Add recommendations if requested</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">recommendations</span><span class="p">:</span>
        <span class="n">latest_regime</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;humbl_regime&quot;</span><span class="p">))</span>
            <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
            <span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">latest_regime</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">REGIME_RECOMMENDATIONS</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;warnings&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">HumblDataWarning</span><span class="p">(</span>
                    <span class="n">category</span><span class="o">=</span><span class="s2">&quot;HumblCompassFetcher&quot;</span><span class="p">,</span>
                    <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;No recommendations available for regime: </span><span class="si">{</span><span class="n">latest_regime</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">recommendations</span> <span class="o">=</span> <span class="n">REGIME_RECOMMENDATIONS</span><span class="p">[</span><span class="n">latest_regime</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;extra&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">[</span><span class="s2">&quot;humbl_regime_recommendations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">recommendations</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
            <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;binary&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.fetch_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.fetch_data</span>


<a href="#humbldata.core.standard_models.toolbox.fundamental.humbl_compass.HumblCompassFetcher.fetch_data" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">fetch_data</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Execute TET Pattern.</p>
<p>This method executes the query transformation, data fetching and
transformation process by first calling <code>transform_query</code> to prepare the query parameters, then
extracting the raw data using <code>extract_data</code> method, and finally
transforming the raw data using <code>transform_data</code> method.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.humblobject.HumblObject" href="../core/#humbldata.core.standard_models.abstract.humblobject.HumblObject">HumblObject</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The HumblObject containing the transformed data and metadata.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/fundamental/humbl_compass.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end</span><span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fetch_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Execute TET Pattern.</span>

<span class="sd">    This method executes the query transformation, data fetching and</span>
<span class="sd">    transformation process by first calling `transform_query` to prepare the query parameters, then</span>
<span class="sd">    extracting the raw data using `extract_data` method, and finally</span>
<span class="sd">    transforming the raw data using `transform_data` method.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    HumblObject</span>
<span class="sd">        The HumblObject containing the transformed data and metadata.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transform_query</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">extract_data</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transform_data</span><span class="p">()</span>

    <span class="c1"># Initialize warnings list if it doesn&#39;t exist</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span> <span class="s2">&quot;warnings&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Initialize fetcher warnings if they don&#39;t exist</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;warnings&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Initialize extra dict if it doesn&#39;t exist</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;extra&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extra</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Combine warnings from both sources</span>
    <span class="n">all_warnings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">warnings</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">warnings</span>

    <span class="k">return</span> <span class="n">HumblObject</span><span class="p">(</span>
        <span class="n">results</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="p">,</span>
        <span class="n">provider</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">provider</span><span class="p">,</span>
        <span class="n">warnings</span><span class="o">=</span><span class="n">all_warnings</span><span class="p">,</span>  <span class="c1"># Use combined warnings</span>
        <span class="n">chart</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart</span><span class="p">,</span>
        <span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span>
        <span class="n">command_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">,</span>
        <span class="n">extra</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">extra</span><span class="p">,</span>  <span class="c1"># pipe in extra from transform_data()</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.core.standard_models.toolbox.technical" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.toolbox.technical</span>


<a href="#humbldata.core.standard_models.toolbox.technical" class="headerlink" title="Permanent link">¤</a></h5>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h6 id="humbldata.core.standard_models.toolbox.technical.realized_volatility" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.toolbox.technical.realized_volatility</span>


<a href="#humbldata.core.standard_models.toolbox.technical.realized_volatility" class="headerlink" title="Permanent link">¤</a></h6>

  <div class="doc doc-contents ">
  
      <p>Volatility Standard Model.</p>
<p>Context: Toolbox || Category: Technical || Command: <strong>Volatility</strong>.</p>
<p>This module is used to define the QueryParams and Data model for the
Volatility command.</p>

  

  <div class="doc doc-children">



















<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityQueryParams" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityQueryParams</span>


<a href="#humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityQueryParams" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.query_params.QueryParams" href="../core/#humbldata.core.standard_models.abstract.query_params.QueryParams">QueryParams</a></code></p>

  
      <p>QueryParams for the Realized Volatility command.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/realized_volatility.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RealizedVolatilityQueryParams</span><span class="p">(</span><span class="n">QueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    QueryParams for the Realized Volatility command.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>


</div>






<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityData" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityData</span>


<a href="#humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityData" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.data.Data" href="../core/#humbldata.core.standard_models.abstract.data.Data">Data</a></code></p>

  
      <p>Data model for the Realized Volatility command.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/realized_volatility.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RealizedVolatilityData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Data model for the Realized Volatility command.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>


</div>






<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher</span>


<a href="#humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityQueryParams" href="../core/#humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityQueryParams">RealizedVolatilityQueryParams</a></code></p>

  
      <p>Fetcher for the Realized Volatility command.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/realized_volatility.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RealizedVolatilityFetcher</span><span class="p">(</span><span class="n">RealizedVolatilityQueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetcher for the Realized Volatility command.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">data_list</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">RealizedVolatilityData</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context_params</span><span class="p">:</span> <span class="n">ToolboxQueryParams</span><span class="p">,</span>
        <span class="n">command_params</span><span class="p">:</span> <span class="n">RealizedVolatilityQueryParams</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_context_params</span> <span class="o">=</span> <span class="n">context_params</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_command_params</span> <span class="o">=</span> <span class="n">command_params</span>

    <span class="k">def</span> <span class="nf">transform_query</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Transform the params to the command-specific query.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">extract_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Extract the data from the provider.&quot;&quot;&quot;</span>
        <span class="c1"># Assuming &#39;obb&#39; is a predefined object in your context</span>
        <span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">obb</span><span class="o">.</span><span class="n">equity</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="n">historical</span><span class="p">(</span>
                <span class="n">symbol</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">symbol</span><span class="p">,</span>
                <span class="n">start_date</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">start_date</span><span class="p">),</span>
                <span class="n">end_date</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">end_date</span><span class="p">),</span>
                <span class="n">provider</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">provider</span><span class="p">,</span>
                <span class="n">verbose</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;silent&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
                <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">to_df</span><span class="p">()</span>
            <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">df</span>

    <span class="k">def</span> <span class="nf">transform_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Transform the command-specific data.&quot;&quot;&quot;</span>
        <span class="c1"># Placeholder for data transformation logic</span>

    <span class="k">def</span> <span class="nf">fetch_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute the TET pattern.&quot;&quot;&quot;</span>
        <span class="c1"># Call the methods in the desired order</span>
        <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform_query</span><span class="p">()</span>
        <span class="n">raw_data</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">extract_data</span><span class="p">()</span>
        <span class="p">)</span>  <span class="c1"># This should use &#39;query&#39; to fetch the data</span>
        <span class="n">transformed_data</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transform_data</span><span class="p">()</span>
        <span class="p">)</span>  <span class="c1"># This should transform &#39;raw_data&#39;</span>

        <span class="c1"># Validate with VolatilityData, unpack dict into pydantic row by row</span>
        <span class="k">return</span> <span class="n">transformed_data</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher.transform_query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher.transform_query</span>


<a href="#humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher.transform_query" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">transform_query</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Transform the params to the command-specific query.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/realized_volatility.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transform_query</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transform the params to the command-specific query.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher.extract_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher.extract_data</span>


<a href="#humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher.extract_data" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_data</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Extract the data from the provider.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/realized_volatility.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">extract_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract the data from the provider.&quot;&quot;&quot;</span>
    <span class="c1"># Assuming &#39;obb&#39; is a predefined object in your context</span>
    <span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">obb</span><span class="o">.</span><span class="n">equity</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="n">historical</span><span class="p">(</span>
            <span class="n">symbol</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">symbol</span><span class="p">,</span>
            <span class="n">start_date</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">start_date</span><span class="p">),</span>
            <span class="n">end_date</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">end_date</span><span class="p">),</span>
            <span class="n">provider</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">provider</span><span class="p">,</span>
            <span class="n">verbose</span><span class="o">=</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;silent&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
            <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">to_df</span><span class="p">()</span>
        <span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">df</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher.transform_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher.transform_data</span>


<a href="#humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher.transform_data" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">transform_data</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Transform the command-specific data.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/realized_volatility.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transform_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transform the command-specific data.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher.fetch_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher.fetch_data</span>


<a href="#humbldata.core.standard_models.toolbox.technical.realized_volatility.RealizedVolatilityFetcher.fetch_data" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">fetch_data</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Execute the TET pattern.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/realized_volatility.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fetch_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Execute the TET pattern.&quot;&quot;&quot;</span>
    <span class="c1"># Call the methods in the desired order</span>
    <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform_query</span><span class="p">()</span>
    <span class="n">raw_data</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extract_data</span><span class="p">()</span>
    <span class="p">)</span>  <span class="c1"># This should use &#39;query&#39; to fetch the data</span>
    <span class="n">transformed_data</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transform_data</span><span class="p">()</span>
    <span class="p">)</span>  <span class="c1"># This should transform &#39;raw_data&#39;</span>

    <span class="c1"># Validate with VolatilityData, unpack dict into pydantic row by row</span>
    <span class="k">return</span> <span class="n">transformed_data</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h6 id="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.standard_models.toolbox.technical.mandelbrot_channel</span>


<a href="#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel" class="headerlink" title="Permanent link">¤</a></h6>

  <div class="doc doc-contents ">
  
      <p>Mandelbrot Channel Standard Model.</p>
<p>Context: Toolbox || Category: Technical || Command: Mandelbrot Channel.</p>
<p>This module is used to define the QueryParams and Data model for the
Mandelbrot Channel command.</p>

  

  <div class="doc doc-children">















































<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams</span>


<a href="#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.query_params.QueryParams" href="../core/#humbldata.core.standard_models.abstract.query_params.QueryParams">QueryParams</a></code></p>

  
      <p>QueryParams model for the Mandelbrot Channel command, a Pydantic v2 model.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The width of the window used for splitting the data into sections for
detrending. Defaults to "1m".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>rv_adjustment</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to adjust the calculation for realized volatility. If True, the
data is filtered
to only include observations in the same volatility bucket that the
stock is currently in. Defaults to True.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>rv_method</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The method to calculate the realized volatility. Only need to define
when rv_adjustment is True. Defaults to "std".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>rs_method</code></td>
          <td>
                <code><span title="typing.Literal">Literal</span>[&#39;RS&#39;, &#39;RS_min&#39;, &#39;RS_max&#39;, &#39;RS_mean&#39;]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The method to use for Range/STD calculation. This is either, min, max
or mean of all RS ranges
per window. If not defined, just used the most recent RS window.
Defaults to "RS".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>rv_grouped_mean</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to calculate the mean value of realized volatility over
multiple window lengths. Defaults to False.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>live_price</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to calculate the ranges using the current live price, or the
most recent 'close' observation. Defaults to False.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>historical</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to calculate the Historical Mandelbrot Channel (over-time), and
return a time-series of channels from the start to the end date. If
False, the Mandelbrot Channel calculation is done aggregating all of the
data into one observation. If True, then it will enable daily
observations over-time. Defaults to False.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>chart</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to return a chart object. Defaults to False.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/mandelbrot_channel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MandelbrotChannelQueryParams</span><span class="p">(</span><span class="n">QueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    QueryParams model for the Mandelbrot Channel command, a Pydantic v2 model.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    window : str</span>
<span class="sd">        The width of the window used for splitting the data into sections for</span>
<span class="sd">        detrending. Defaults to &quot;1m&quot;.</span>
<span class="sd">    rv_adjustment : bool</span>
<span class="sd">        Whether to adjust the calculation for realized volatility. If True, the</span>
<span class="sd">        data is filtered</span>
<span class="sd">        to only include observations in the same volatility bucket that the</span>
<span class="sd">        stock is currently in. Defaults to True.</span>
<span class="sd">    rv_method : str</span>
<span class="sd">        The method to calculate the realized volatility. Only need to define</span>
<span class="sd">        when rv_adjustment is True. Defaults to &quot;std&quot;.</span>
<span class="sd">    rs_method : Literal[&quot;RS&quot;, &quot;RS_min&quot;, &quot;RS_max&quot;, &quot;RS_mean&quot;]</span>
<span class="sd">        The method to use for Range/STD calculation. This is either, min, max</span>
<span class="sd">        or mean of all RS ranges</span>
<span class="sd">        per window. If not defined, just used the most recent RS window.</span>
<span class="sd">        Defaults to &quot;RS&quot;.</span>
<span class="sd">    rv_grouped_mean : bool</span>
<span class="sd">        Whether to calculate the mean value of realized volatility over</span>
<span class="sd">        multiple window lengths. Defaults to False.</span>
<span class="sd">    live_price : bool</span>
<span class="sd">        Whether to calculate the ranges using the current live price, or the</span>
<span class="sd">        most recent &#39;close&#39; observation. Defaults to False.</span>
<span class="sd">    historical : bool</span>
<span class="sd">        Whether to calculate the Historical Mandelbrot Channel (over-time), and</span>
<span class="sd">        return a time-series of channels from the start to the end date. If</span>
<span class="sd">        False, the Mandelbrot Channel calculation is done aggregating all of the</span>
<span class="sd">        data into one observation. If True, then it will enable daily</span>
<span class="sd">        observations over-time. Defaults to False.</span>
<span class="sd">    chart : bool</span>
<span class="sd">        Whether to return a chart object. Defaults to False.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;1mo&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Window&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">MANDELBROT_QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;window&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">rv_adjustment</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Realized Volatility Adjustment&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">MANDELBROT_QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rv_adjustment&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">rv_method</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span>
        <span class="s2">&quot;std&quot;</span><span class="p">,</span>
        <span class="s2">&quot;parkinson&quot;</span><span class="p">,</span>
        <span class="s2">&quot;garman_klass&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;hodges_tompkins&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ht&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rogers_satchell&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;yang_zhang&quot;</span><span class="p">,</span>
        <span class="s2">&quot;yz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;squared_returns&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sq&quot;</span><span class="p">,</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;std&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Realized Volatility Method&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">MANDELBROT_QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rv_method&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">rs_method</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;RS&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_min&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_max&quot;</span><span class="p">,</span> <span class="s2">&quot;RS_mean&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;RS&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;R/S Method&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">MANDELBROT_QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rs_method&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">rv_grouped_mean</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Realized Volatility Grouped Mean&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">MANDELBROT_QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rv_grouped_mean&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">live_price</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Live Price&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">MANDELBROT_QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;live_price&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">historical</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Historical Mandelbrot Channel&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">MANDELBROT_QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;historical&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">chart</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Results Chart&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">MANDELBROT_QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;chart&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">template</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span>
        <span class="s2">&quot;humbl_dark&quot;</span><span class="p">,</span>
        <span class="s2">&quot;humbl_light&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ggplot2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;seaborn&quot;</span><span class="p">,</span>
        <span class="s2">&quot;simple_white&quot;</span><span class="p">,</span>
        <span class="s2">&quot;plotly&quot;</span><span class="p">,</span>
        <span class="s2">&quot;plotly_white&quot;</span><span class="p">,</span>
        <span class="s2">&quot;plotly_dark&quot;</span><span class="p">,</span>
        <span class="s2">&quot;presentation&quot;</span><span class="p">,</span>
        <span class="s2">&quot;xgridoff&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ygridoff&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gridon&quot;</span><span class="p">,</span>
        <span class="s2">&quot;none&quot;</span><span class="p">,</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;humbl_dark&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Plotly Template&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">MANDELBROT_QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;template&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;window&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">,</span> <span class="n">check_fields</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">window_format</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format the window string into a standardized format.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        v : str</span>
<span class="sd">            The window size as a string.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The window string in a standardized format.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If the input is not a string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_window_format</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Window must be a string.&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams.window_format" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams.window_format</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams.window_format" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">window_format</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">str</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Format the window string into a standardized format.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>v</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The window size as a string.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The window string in a standardized format.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Raises:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the input is not a string.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/mandelbrot_channel.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;window&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">,</span> <span class="n">check_fields</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">window_format</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Format the window string into a standardized format.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    v : str</span>
<span class="sd">        The window size as a string.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        The window string in a standardized format.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If the input is not a string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_window_format</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Window must be a string.&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>






<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelData" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelData</span>


<a href="#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelData" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.data.Data" href="../core/#humbldata.core.standard_models.abstract.data.Data">Data</a></code></p>

  
      <p>Data model for the Mandelbrot Channel command, a Pandera.Polars Model.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>date</code></td>
          <td>
                <code>Union[<span title="datetime.date">date</span>, <span title="datetime.datetime">datetime</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The date of the data point. Defaults to None.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>symbol</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The stock symbol. Defaults to None.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>bottom_price</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The bottom price in the Mandelbrot Channel. Defaults to None.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>recent_price</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The most recent price within the Mandelbrot Channel. Defaults to None.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>top_price</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The top price in the Mandelbrot Channel. Defaults to None.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/mandelbrot_channel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MandelbrotChannelData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Data model for the Mandelbrot Channel command, a Pandera.Polars Model.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    date : Union[dt.date, dt.datetime], optional</span>
<span class="sd">        The date of the data point. Defaults to None.</span>
<span class="sd">    symbol : str, optional</span>
<span class="sd">        The stock symbol. Defaults to None.</span>
<span class="sd">    bottom_price : float, optional</span>
<span class="sd">        The bottom price in the Mandelbrot Channel. Defaults to None.</span>
<span class="sd">    recent_price : float, optional</span>
<span class="sd">        The most recent price within the Mandelbrot Channel. Defaults to None.</span>
<span class="sd">    top_price : float, optional</span>
<span class="sd">        The top price in the Mandelbrot Channel. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">date</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Date</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The date of the data point.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Symbol&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The stock symbol.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">bottom_price</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Bottom Price&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The bottom price in the Mandelbrot Channel.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">recent_price</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Recent Price&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The most recent price within the Mandelbrot Channel.&quot;</span><span class="p">,</span>
        <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;(close_price|recent_price|last_price)&quot;</span><span class="p">,</span>
        <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">top_price</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Top Price&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The top price in the Mandelbrot Channel.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





  </div>

  </div>


</div>






<div class="doc doc-object doc-class">



<h7 id="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher</span>


<a href="#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher" class="headerlink" title="Permanent link">¤</a></h7>


  <div class="doc doc-contents ">

  
      <p>Fetcher for the Mandelbrot Channel command.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>context_params</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams">ToolboxQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The context parameters for the toolbox query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>command_params</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams" href="../core/#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams">MandelbrotChannelQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The command-specific parameters for the Mandelbrot Channel query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Attributes:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.context_params">context_params</span></code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams">ToolboxQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Stores the context parameters passed during initialization.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.command_params">command_params</span></code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams" href="../core/#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams">MandelbrotChannelQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Stores the command-specific parameters passed during initialization.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code><span title="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.equity_historical_data">equity_historical_data</span></code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The raw data extracted from the data provider, before transformation.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Methods:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.transform_query" href="../core/#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.transform_query">transform_query</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Transform the command-specific parameters into a query.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.extract_data" href="../core/#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.extract_data">extract_data</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Extracts the data from the provider and returns it as a Polars DataFrame.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.transform_data" href="../core/#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.transform_data">transform_data</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Transforms the command-specific data according to the Mandelbrot Channel logic.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.fetch_data" href="../core/#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.fetch_data">fetch_data</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Execute TET Pattern.</p>
              </div>
            </td>
          </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.humblobject.HumblObject" href="../core/#humbldata.core.standard_models.abstract.humblobject.HumblObject">HumblObject</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>results : MandelbrotChannelData
    Serializable results.
provider : Literal['fmp', 'intrinio', 'polygon', 'tiingo', 'yfinance']
    Provider name.
warnings : Optional[List[Warning_]]
    List of warnings.
chart : Optional[Chart]
    Chart object.
context_params : ToolboxQueryParams
    Context-specific parameters.
command_params : MandelbrotChannelQueryParams
    Command-specific parameters.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/mandelbrot_channel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MandelbrotChannelFetcher</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetcher for the Mandelbrot Channel command.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    context_params : ToolboxQueryParams</span>
<span class="sd">        The context parameters for the toolbox query.</span>
<span class="sd">    command_params : MandelbrotChannelQueryParams</span>
<span class="sd">        The command-specific parameters for the Mandelbrot Channel query.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    context_params : ToolboxQueryParams</span>
<span class="sd">        Stores the context parameters passed during initialization.</span>
<span class="sd">    command_params : MandelbrotChannelQueryParams</span>
<span class="sd">        Stores the command-specific parameters passed during initialization.</span>
<span class="sd">    equity_historical_data : pl.DataFrame</span>
<span class="sd">        The raw data extracted from the data provider, before transformation.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    transform_query()</span>
<span class="sd">        Transform the command-specific parameters into a query.</span>
<span class="sd">    extract_data()</span>
<span class="sd">        Extracts the data from the provider and returns it as a Polars DataFrame.</span>
<span class="sd">    transform_data()</span>
<span class="sd">        Transforms the command-specific data according to the Mandelbrot Channel logic.</span>
<span class="sd">    fetch_data()</span>
<span class="sd">        Execute TET Pattern.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    HumblObject</span>
<span class="sd">        results : MandelbrotChannelData</span>
<span class="sd">            Serializable results.</span>
<span class="sd">        provider : Literal[&#39;fmp&#39;, &#39;intrinio&#39;, &#39;polygon&#39;, &#39;tiingo&#39;, &#39;yfinance&#39;]</span>
<span class="sd">            Provider name.</span>
<span class="sd">        warnings : Optional[List[Warning_]]</span>
<span class="sd">            List of warnings.</span>
<span class="sd">        chart : Optional[Chart]</span>
<span class="sd">            Chart object.</span>
<span class="sd">        context_params : ToolboxQueryParams</span>
<span class="sd">            Context-specific parameters.</span>
<span class="sd">        command_params : MandelbrotChannelQueryParams</span>
<span class="sd">            Command-specific parameters.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context_params</span><span class="p">:</span> <span class="n">ToolboxQueryParams</span><span class="p">,</span>
        <span class="n">command_params</span><span class="p">:</span> <span class="n">MandelbrotChannelQueryParams</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the MandelbrotChannelFetcher with context and command parameters.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        context_params : ToolboxQueryParams</span>
<span class="sd">            The context parameters for the toolbox query.</span>
<span class="sd">        command_params : MandelbrotChannelQueryParams</span>
<span class="sd">            The command-specific parameters for the Mandelbrot Channel query.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span> <span class="o">=</span> <span class="n">context_params</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="n">command_params</span>

    <span class="k">def</span> <span class="nf">transform_query</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transform the command-specific parameters into a query.</span>

<span class="sd">        If command_params is not provided, it initializes a default MandelbrotChannelQueryParams object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="c1"># Set Default Arguments</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">:</span> <span class="n">MandelbrotChannelQueryParams</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">MandelbrotChannelQueryParams</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">:</span> <span class="n">MandelbrotChannelQueryParams</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">MandelbrotChannelQueryParams</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">extract_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract the data from the provider and returns it as a Polars DataFrame.</span>

<span class="sd">        Drops unnecessary columns like dividends and stock splits from the data.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pl.DataFrame</span>
<span class="sd">            The extracted data as a Polars DataFrame.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">equity_historical_data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">obb</span><span class="o">.</span><span class="n">equity</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="n">historical</span><span class="p">(</span>
                <span class="n">symbol</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">symbols</span><span class="p">,</span>
                <span class="n">start_date</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">start_date</span><span class="p">,</span>
                <span class="n">end_date</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">end_date</span><span class="p">,</span>
                <span class="n">provider</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">provider</span><span class="p">,</span>
                <span class="n">adjustment</span><span class="o">=</span><span class="s2">&quot;splits_and_dividends&quot;</span><span class="p">,</span>
                <span class="c1"># add kwargs</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">to_polars</span><span class="p">()</span>
            <span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s2">&quot;dividend&quot;</span><span class="p">,</span> <span class="s2">&quot;split_ratio&quot;</span><span class="p">])</span>  <span class="c1"># TODO: drop `capital_gains` col</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">symbols</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">equity_historical_data</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">equity_historical_data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                    <span class="n">symbol</span><span class="o">=</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">symbols</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">transform_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transform the command-specific data according to the Mandelbrot Channel logic.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pl.DataFrame</span>
<span class="sd">            The transformed data as a Polars DataFrame</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">historical</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">transformed_data</span> <span class="o">=</span> <span class="n">calc_mandelbrot_channel</span><span class="p">(</span>
                <span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">equity_historical_data</span><span class="p">,</span>
                <span class="n">window</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">window</span><span class="p">,</span>
                <span class="n">rv_adjustment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rv_adjustment</span><span class="p">,</span>
                <span class="n">rv_method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rv_method</span><span class="p">,</span>
                <span class="n">rv_grouped_mean</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rv_grouped_mean</span><span class="p">,</span>
                <span class="n">rs_method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rs_method</span><span class="p">,</span>
                <span class="n">live_price</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">live_price</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">transformed_data</span> <span class="o">=</span> <span class="n">calc_mandelbrot_channel_historical_concurrent</span><span class="p">(</span>
                <span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">equity_historical_data</span><span class="p">,</span>
                <span class="n">window</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">window</span><span class="p">,</span>
                <span class="n">rv_adjustment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rv_adjustment</span><span class="p">,</span>
                <span class="n">rv_method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rv_method</span><span class="p">,</span>
                <span class="n">rv_grouped_mean</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rv_grouped_mean</span><span class="p">,</span>
                <span class="n">rs_method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rs_method</span><span class="p">,</span>
                <span class="n">live_price</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">live_price</span><span class="p">,</span>
                <span class="n">use_processes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span> <span class="o">=</span> <span class="n">MandelbrotChannelData</span><span class="p">(</span>
            <span class="n">transformed_data</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">()</span>  <span class="c1">## HOTFIX - need to trace where coming from w/ unequal data</span>
        <span class="p">)</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">chart</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">chart</span> <span class="o">=</span> <span class="n">generate_plots</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">equity_historical_data</span><span class="p">,</span>
                <span class="n">template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">template</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">chart</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;binary&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="nd">@log_start_end</span><span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">fetch_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Execute TET Pattern.</span>

<span class="sd">        This method executes the query transformation, data fetching and</span>
<span class="sd">        transformation process by first calling `transform_query` to prepare the query parameters, then</span>
<span class="sd">        extracting the raw data using `extract_data` method, and finally</span>
<span class="sd">        transforming the raw data using `transform_data` method.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pl.DataFrame</span>
<span class="sd">            The transformed data as a Polars DataFrame, ready for further analysis</span>
<span class="sd">            or visualization.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transform_query</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extract_data</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transform_data</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span> <span class="s2">&quot;warnings&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">return</span> <span class="n">HumblObject</span><span class="p">(</span>
            <span class="n">results</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="p">,</span>
            <span class="n">provider</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">provider</span><span class="p">,</span>
            <span class="n">equity_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">equity_historical_data</span><span class="o">.</span><span class="n">serialize</span><span class="p">(),</span>
            <span class="n">warnings</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">warnings</span><span class="p">,</span>
            <span class="n">chart</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart</span><span class="p">,</span>
            <span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span>
            <span class="n">command_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.__init__</span>


<a href="#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.__init__" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span><span class="nf">context_params</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams">ToolboxQueryParams</a></span><span class="p">,</span> <span class="n">command_params</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams" href="../core/#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams">MandelbrotChannelQueryParams</a></span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Initialize the MandelbrotChannelFetcher with context and command parameters.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>context_params</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams">ToolboxQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The context parameters for the toolbox query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>command_params</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams" href="../core/#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelQueryParams">MandelbrotChannelQueryParams</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The command-specific parameters for the Mandelbrot Channel query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/mandelbrot_channel.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">context_params</span><span class="p">:</span> <span class="n">ToolboxQueryParams</span><span class="p">,</span>
    <span class="n">command_params</span><span class="p">:</span> <span class="n">MandelbrotChannelQueryParams</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the MandelbrotChannelFetcher with context and command parameters.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    context_params : ToolboxQueryParams</span>
<span class="sd">        The context parameters for the toolbox query.</span>
<span class="sd">    command_params : MandelbrotChannelQueryParams</span>
<span class="sd">        The command-specific parameters for the Mandelbrot Channel query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span> <span class="o">=</span> <span class="n">context_params</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="n">command_params</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.transform_query" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.transform_query</span>


<a href="#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.transform_query" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">transform_query</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Transform the command-specific parameters into a query.</p>
<p>If command_params is not provided, it initializes a default MandelbrotChannelQueryParams object.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/mandelbrot_channel.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transform_query</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transform the command-specific parameters into a query.</span>

<span class="sd">    If command_params is not provided, it initializes a default MandelbrotChannelQueryParams object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Set Default Arguments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">:</span> <span class="n">MandelbrotChannelQueryParams</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">MandelbrotChannelQueryParams</span><span class="p">()</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">:</span> <span class="n">MandelbrotChannelQueryParams</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">MandelbrotChannelQueryParams</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">)</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.extract_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.extract_data</span>


<a href="#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.extract_data" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_data</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Extract the data from the provider and returns it as a Polars DataFrame.</p>
<p>Drops unnecessary columns like dividends and stock splits from the data.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The extracted data as a Polars DataFrame.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/mandelbrot_channel.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">extract_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extract the data from the provider and returns it as a Polars DataFrame.</span>

<span class="sd">    Drops unnecessary columns like dividends and stock splits from the data.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame</span>
<span class="sd">        The extracted data as a Polars DataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">equity_historical_data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">obb</span><span class="o">.</span><span class="n">equity</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="n">historical</span><span class="p">(</span>
            <span class="n">symbol</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">symbols</span><span class="p">,</span>
            <span class="n">start_date</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">start_date</span><span class="p">,</span>
            <span class="n">end_date</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">end_date</span><span class="p">,</span>
            <span class="n">provider</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">provider</span><span class="p">,</span>
            <span class="n">adjustment</span><span class="o">=</span><span class="s2">&quot;splits_and_dividends&quot;</span><span class="p">,</span>
            <span class="c1"># add kwargs</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">to_polars</span><span class="p">()</span>
        <span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
    <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s2">&quot;dividend&quot;</span><span class="p">,</span> <span class="s2">&quot;split_ratio&quot;</span><span class="p">])</span>  <span class="c1"># TODO: drop `capital_gains` col</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">symbols</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">equity_historical_data</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">equity_historical_data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="n">symbol</span><span class="o">=</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">symbols</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.transform_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.transform_data</span>


<a href="#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.transform_data" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">transform_data</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Transform the command-specific data according to the Mandelbrot Channel logic.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The transformed data as a Polars DataFrame</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/mandelbrot_channel.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">transform_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Transform the command-specific data according to the Mandelbrot Channel logic.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame</span>
<span class="sd">        The transformed data as a Polars DataFrame</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">historical</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">transformed_data</span> <span class="o">=</span> <span class="n">calc_mandelbrot_channel</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">equity_historical_data</span><span class="p">,</span>
            <span class="n">window</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">window</span><span class="p">,</span>
            <span class="n">rv_adjustment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rv_adjustment</span><span class="p">,</span>
            <span class="n">rv_method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rv_method</span><span class="p">,</span>
            <span class="n">rv_grouped_mean</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rv_grouped_mean</span><span class="p">,</span>
            <span class="n">rs_method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rs_method</span><span class="p">,</span>
            <span class="n">live_price</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">live_price</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">transformed_data</span> <span class="o">=</span> <span class="n">calc_mandelbrot_channel_historical_concurrent</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">equity_historical_data</span><span class="p">,</span>
            <span class="n">window</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">window</span><span class="p">,</span>
            <span class="n">rv_adjustment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rv_adjustment</span><span class="p">,</span>
            <span class="n">rv_method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rv_method</span><span class="p">,</span>
            <span class="n">rv_grouped_mean</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rv_grouped_mean</span><span class="p">,</span>
            <span class="n">rs_method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">rs_method</span><span class="p">,</span>
            <span class="n">live_price</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">live_price</span><span class="p">,</span>
            <span class="n">use_processes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span> <span class="o">=</span> <span class="n">MandelbrotChannelData</span><span class="p">(</span>
        <span class="n">transformed_data</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">()</span>  <span class="c1">## HOTFIX - need to trace where coming from w/ unequal data</span>
    <span class="p">)</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">chart</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chart</span> <span class="o">=</span> <span class="n">generate_plots</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">equity_historical_data</span><span class="p">,</span>
            <span class="n">template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="o">.</span><span class="n">template</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chart</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;binary&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h8 id="humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.fetch_data" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.fetch_data</span>


<a href="#humbldata.core.standard_models.toolbox.technical.mandelbrot_channel.MandelbrotChannelFetcher.fetch_data" class="headerlink" title="Permanent link">¤</a></h8>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">fetch_data</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Execute TET Pattern.</p>
<p>This method executes the query transformation, data fetching and
transformation process by first calling <code>transform_query</code> to prepare the query parameters, then
extracting the raw data using <code>extract_data</code> method, and finally
transforming the raw data using <code>transform_data</code> method.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The transformed data as a Polars DataFrame, ready for further analysis
or visualization.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/technical/mandelbrot_channel.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@log_start_end</span><span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fetch_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Execute TET Pattern.</span>

<span class="sd">    This method executes the query transformation, data fetching and</span>
<span class="sd">    transformation process by first calling `transform_query` to prepare the query parameters, then</span>
<span class="sd">    extracting the raw data using `extract_data` method, and finally</span>
<span class="sd">    transforming the raw data using `transform_data` method.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame</span>
<span class="sd">        The transformed data as a Polars DataFrame, ready for further analysis</span>
<span class="sd">        or visualization.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transform_query</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">extract_data</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transform_data</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span> <span class="s2">&quot;warnings&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">return</span> <span class="n">HumblObject</span><span class="p">(</span>
        <span class="n">results</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">transformed_data</span><span class="p">,</span>
        <span class="n">provider</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">provider</span><span class="p">,</span>
        <span class="n">equity_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">equity_historical_data</span><span class="o">.</span><span class="n">serialize</span><span class="p">(),</span>
        <span class="n">warnings</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="o">.</span><span class="n">warnings</span><span class="p">,</span>
        <span class="n">chart</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">chart</span><span class="p">,</span>
        <span class="n">context_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context_params</span><span class="p">,</span>
        <span class="n">command_params</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">command_params</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>






















<div class="doc doc-object doc-class">



<h5 id="humbldata.core.standard_models.toolbox.ToolboxQueryParams" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.toolbox.ToolboxQueryParams</span>


<a href="#humbldata.core.standard_models.toolbox.ToolboxQueryParams" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.query_params.QueryParams" href="../core/#humbldata.core.standard_models.abstract.query_params.QueryParams">QueryParams</a></code></p>

  
      <p>Query parameters for the ToolboxController.</p>
<p>This class defines the query parameters used by the ToolboxController,
including the stock symbol, data interval, start date, and end date. It also
includes a method to ensure the stock symbol is in uppercase.
If no dates constraints are given, it will collect the MAX amount of data
available.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>symbol</code></td>
          <td>
                <code>str | list[str] | set[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The symbol or ticker of the stock. You can pass multiple tickers like:
"AAPL", "AAPL, MSFT" or ["AAPL", "MSFT"]. The input will be converted
to uppercase.</p>
            </div>
          </td>
          <td>
                <code>&#34;&#34;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>interval</code></td>
          <td>
                <code>str | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The interval of the data. Can be None.</p>
            </div>
          </td>
          <td>
                <code>&#34;1d&#34;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>start_date</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The start date for the data query.</p>
            </div>
          </td>
          <td>
                <code>&#34;&#34;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>end_date</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The end date for the data query.</p>
            </div>
          </td>
          <td>
                <code>&#34;&#34;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>provider</code></td>
          <td>
                <code><span title="humbldata.core.utils.constants.OBB_EQUITY_PRICE_HISTORICAL_PROVIDERS">OBB_EQUITY_PRICE_HISTORICAL_PROVIDERS</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The data provider to be used for the query.</p>
            </div>
          </td>
          <td>
                <code>&#34;yfinance&#34;</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>membership</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The membership level of the user.</p>
            </div>
          </td>
          <td>
                <code>&#34;anonymous&#34;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Methods:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams.upper_symbol" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams.upper_symbol">upper_symbol</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>A Pydantic <code>@field_validator()</code> that converts the stock symbol to
uppercase. If a list or set of symbols is provided, each symbol in the
collection is converted to uppercase and returned as a comma-separated
string.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_interval" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_interval">validate_interval</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>A Pydantic <code>@field_validator()</code> that validates the interval format.
Ensures the interval is a number followed by one of 's', 'm', 'h', 'd', 'W', 'M', 'Q', 'Y'.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_date_format" href="../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_date_format">validate_date_format</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>A Pydantic <code>@field_validator()</code> that validates the date format to ensure it is YYYY-MM-DD.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_start_date">validate_start_date</span></code></td>
            <td>
              <div class="doc-md-description">
                <p>A Pydantic <code>@model_validator()</code> that validates and adjusts the start date based on membership level.</p>
              </div>
            </td>
          </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Raises:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the <code>symbol</code> parameter is a list and not all elements are strings, or
if <code>symbol</code> is not a string, list, or set.
If the <code>interval</code> format is invalid.
If the <code>date</code> format is invalid.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>A Pydantic v2 Model</p>
</details>
            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/__init__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ToolboxQueryParams</span><span class="p">(</span><span class="n">QueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Query parameters for the ToolboxController.</span>

<span class="sd">    This class defines the query parameters used by the ToolboxController,</span>
<span class="sd">    including the stock symbol, data interval, start date, and end date. It also</span>
<span class="sd">    includes a method to ensure the stock symbol is in uppercase.</span>
<span class="sd">    If no dates constraints are given, it will collect the MAX amount of data</span>
<span class="sd">    available.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbol : str | list[str] | set[str], default=&quot;&quot;</span>
<span class="sd">        The symbol or ticker of the stock. You can pass multiple tickers like:</span>
<span class="sd">        &quot;AAPL&quot;, &quot;AAPL, MSFT&quot; or [&quot;AAPL&quot;, &quot;MSFT&quot;]. The input will be converted</span>
<span class="sd">        to uppercase.</span>
<span class="sd">    interval : str | None, default=&quot;1d&quot;</span>
<span class="sd">        The interval of the data. Can be None.</span>
<span class="sd">    start_date : str, default=&quot;&quot;</span>
<span class="sd">        The start date for the data query.</span>
<span class="sd">    end_date : str, default=&quot;&quot;</span>
<span class="sd">        The end date for the data query.</span>
<span class="sd">    provider : OBB_EQUITY_PRICE_HISTORICAL_PROVIDERS, default=&quot;yfinance&quot;</span>
<span class="sd">        The data provider to be used for the query.</span>
<span class="sd">    membership : str, default=&quot;anonymous&quot;</span>
<span class="sd">        The membership level of the user.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    upper_symbol(cls, v: Union[str, list[str], set[str]]) -&gt; Union[str, list[str]]</span>
<span class="sd">        A Pydantic `@field_validator()` that converts the stock symbol to</span>
<span class="sd">        uppercase. If a list or set of symbols is provided, each symbol in the</span>
<span class="sd">        collection is converted to uppercase and returned as a comma-separated</span>
<span class="sd">        string.</span>
<span class="sd">    validate_interval(cls, v: str) -&gt; str</span>
<span class="sd">        A Pydantic `@field_validator()` that validates the interval format.</span>
<span class="sd">        Ensures the interval is a number followed by one of &#39;s&#39;, &#39;m&#39;, &#39;h&#39;, &#39;d&#39;, &#39;W&#39;, &#39;M&#39;, &#39;Q&#39;, &#39;Y&#39;.</span>
<span class="sd">    validate_date_format(cls, v: str | date) -&gt; date</span>
<span class="sd">        A Pydantic `@field_validator()` that validates the date format to ensure it is YYYY-MM-DD.</span>
<span class="sd">    validate_start_date(self) -&gt; &#39;ToolboxQueryParams&#39;</span>
<span class="sd">        A Pydantic `@model_validator()` that validates and adjusts the start date based on membership level.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If the `symbol` parameter is a list and not all elements are strings, or</span>
<span class="sd">        if `symbol` is not a string, list, or set.</span>
<span class="sd">        If the `interval` format is invalid.</span>
<span class="sd">        If the `date` format is invalid.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    A Pydantic v2 Model</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">symbols</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Symbols/Tickers&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;symbols&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">interval</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;1d&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Interval&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;interval&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">start_date</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1950</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Start Date&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The starting date for the data query.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">end_date</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span>
            <span class="n">tz</span><span class="o">=</span><span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s2">&quot;America/New_York&quot;</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">(),</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;End Date&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The ending date for the data query.&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">provider</span><span class="p">:</span> <span class="n">OBB_EQUITY_PRICE_HISTORICAL_PROVIDERS</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;yfinance&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Provider&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;provider&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">membership</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span>
        <span class="s2">&quot;anonymous&quot;</span><span class="p">,</span>
        <span class="s2">&quot;humblPEON&quot;</span><span class="p">,</span>
        <span class="s2">&quot;humblPREMIUM&quot;</span><span class="p">,</span>
        <span class="s2">&quot;humblPOWER&quot;</span><span class="p">,</span>
        <span class="s2">&quot;humblPERMANENT&quot;</span><span class="p">,</span>
        <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;anonymous&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Membership&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">QUERY_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;membership&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;symbols&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">,</span> <span class="n">check_fields</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">upper_symbol</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the stock symbols to uppercase and remove empty strings.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        v : Union[str, List[str], Set[str]]</span>
<span class="sd">            The stock symbol or collection of symbols to be converted.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[str]</span>
<span class="sd">            A list of uppercase stock symbols with empty strings removed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Handle empty inputs</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="c1"># If v is a string, split it by commas into a list. Otherwise, ensure it&#39;s a list.</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="nb">list</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

        <span class="c1"># Convert all elements to uppercase, trim whitespace, and remove empty strings</span>
        <span class="n">valid_symbols</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">symbol</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">v</span> <span class="k">if</span> <span class="n">symbol</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">valid_symbols</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;At least one valid symbol (str) must be provided&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">valid_symbols</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;interval&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">,</span> <span class="n">check_fields</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">validate_interval</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate the interval format.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        v : str</span>
<span class="sd">            The interval string to be validated.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The validated interval string.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If the interval format is invalid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^\d*[smhdWMQY]$&quot;</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Invalid interval format. Must be a number followed by one of &#39;s&#39;, &#39;m&#39;, &#39;h&#39;, &#39;d&#39;, &#39;W&#39;, &#39;M&#39;, &#39;Q&#39;, &#39;Y&#39;.&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span>

    <span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;start_date&quot;</span><span class="p">,</span> <span class="s2">&quot;end_date&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">validate_date_format</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate and convert the input date to a datetime.date object.</span>

<span class="sd">        This method accepts either a string in &#39;YYYY-MM-DD&#39; format or a datetime.date object.</span>
<span class="sd">        It converts the input to a datetime.date object, ensuring it&#39;s in the correct format.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        v : str | dt.date</span>
<span class="sd">            The input date to validate and convert.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dt.date</span>
<span class="sd">            The validated and converted date.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If the input string is not in the correct format.</span>
<span class="sd">        TypeError</span>
<span class="sd">            If the input is neither a string nor a datetime.date object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                    <span class="n">tzinfo</span><span class="o">=</span><span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s2">&quot;America/New_York&quot;</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Invalid date format. Must be YYYY-MM-DD: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">):</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">combine</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">time</span><span class="p">())</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="n">tzinfo</span><span class="o">=</span><span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s2">&quot;America/New_York&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Expected str or date, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="c1"># Check if the date is in the correct format</span>
        <span class="k">if</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Date must be in YYYY-MM-DD format&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">date</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1950</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Date must be after 1950-01-01&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">date</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>

    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">validate_start_date</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ToolboxQueryParams&quot;</span><span class="p">:</span>
        <span class="n">end_date</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_date</span>  <span class="c1"># type: ignore  # noqa: PGH003 the date has already been converted to date</span>

        <span class="n">start_date_mapping</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;anonymous&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">end_date</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">365</span><span class="p">),</span> <span class="s2">&quot;1Y&quot;</span><span class="p">),</span>
            <span class="s2">&quot;humblPEON&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">end_date</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">730</span><span class="p">),</span> <span class="s2">&quot;2Y&quot;</span><span class="p">),</span>
            <span class="s2">&quot;humblPREMIUM&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">end_date</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1825</span><span class="p">),</span> <span class="s2">&quot;5Y&quot;</span><span class="p">),</span>
            <span class="s2">&quot;humblPOWER&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">end_date</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7300</span><span class="p">),</span> <span class="s2">&quot;20Y&quot;</span><span class="p">),</span>
            <span class="s2">&quot;humblPERMANENT&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">end_date</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">10680</span><span class="p">),</span> <span class="s2">&quot;30Y&quot;</span><span class="p">),</span>
            <span class="s2">&quot;admin&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="n">datetime</span><span class="p">(</span>
                    <span class="mi">1950</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s2">&quot;America/New_York&quot;</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">(),</span>
                <span class="s2">&quot;All&quot;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">}</span>

        <span class="n">allowed_start_date</span><span class="p">,</span> <span class="n">data_length</span> <span class="o">=</span> <span class="n">start_date_mapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">membership</span><span class="p">,</span> <span class="p">(</span><span class="n">end_date</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">365</span><span class="p">),</span> <span class="s2">&quot;1Y&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_date</span> <span class="o">&lt;</span> <span class="n">allowed_start_date</span><span class="p">:</span>  <span class="c1"># type: ignore  # noqa: PGH003 the date has already been converted to date</span>
            <span class="n">warning_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Start date adjusted to </span><span class="si">{</span><span class="n">allowed_start_date</span><span class="si">}</span><span class="s2"> based on </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">membership</span><span class="si">}</span><span class="s2"> membership (</span><span class="si">{</span><span class="n">data_length</span><span class="si">}</span><span class="s2"> of data).&quot;</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">warning_msg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_date</span> <span class="o">=</span> <span class="n">allowed_start_date</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;warnings&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">HumblDataWarning</span><span class="p">(</span>
                    <span class="n">category</span><span class="o">=</span><span class="s2">&quot;ToolboxQueryParams&quot;</span><span class="p">,</span>
                    <span class="n">message</span><span class="o">=</span><span class="n">warning_msg</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h6 id="humbldata.core.standard_models.toolbox.ToolboxQueryParams.upper_symbol" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.ToolboxQueryParams.upper_symbol</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#humbldata.core.standard_models.toolbox.ToolboxQueryParams.upper_symbol" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">upper_symbol</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">set</span><span class="p">[</span><span class="n">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Convert the stock symbols to uppercase and remove empty strings.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>v</code></td>
          <td>
                <code>Union[str, List[str], Set[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The stock symbol or collection of symbols to be converted.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>List[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of uppercase stock symbols with empty strings removed.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/__init__.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;symbols&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">,</span> <span class="n">check_fields</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">upper_symbol</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert the stock symbols to uppercase and remove empty strings.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    v : Union[str, List[str], Set[str]]</span>
<span class="sd">        The stock symbol or collection of symbols to be converted.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    List[str]</span>
<span class="sd">        A list of uppercase stock symbols with empty strings removed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Handle empty inputs</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="c1"># If v is a string, split it by commas into a list. Otherwise, ensure it&#39;s a list.</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="nb">list</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

    <span class="c1"># Convert all elements to uppercase, trim whitespace, and remove empty strings</span>
    <span class="n">valid_symbols</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">symbol</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">v</span> <span class="k">if</span> <span class="n">symbol</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">valid_symbols</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;At least one valid symbol (str) must be provided&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">valid_symbols</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_interval" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_interval</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_interval" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">validate_interval</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">str</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Validate the interval format.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>v</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The interval string to be validated.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The validated interval string.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Raises:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the interval format is invalid.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/__init__.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;interval&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">,</span> <span class="n">check_fields</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">validate_interval</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Validate the interval format.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    v : str</span>
<span class="sd">        The interval string to be validated.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        The validated interval string.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If the interval format is invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^\d*[smhdWMQY]$&quot;</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Invalid interval format. Must be a number followed by one of &#39;s&#39;, &#39;m&#39;, &#39;h&#39;, &#39;d&#39;, &#39;W&#39;, &#39;M&#39;, &#39;Q&#39;, &#39;Y&#39;.&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">v</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_date_format" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_date_format</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#humbldata.core.standard_models.toolbox.ToolboxQueryParams.validate_date_format" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">validate_date_format</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n"><span title="datetime.date">date</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="datetime.date">date</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Validate and convert the input date to a datetime.date object.</p>
<p>This method accepts either a string in 'YYYY-MM-DD' format or a datetime.date object.
It converts the input to a datetime.date object, ensuring it's in the correct format.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>v</code></td>
          <td>
                <code>str | <span title="datetime.date">date</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input date to validate and convert.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="datetime.date">date</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The validated and converted date.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Raises:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the input string is not in the correct format.</p>
            </div>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td>
                <code>TypeError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the input is neither a string nor a datetime.date object.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/__init__.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@field_validator</span><span class="p">(</span><span class="s2">&quot;start_date&quot;</span><span class="p">,</span> <span class="s2">&quot;end_date&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
<span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">validate_date_format</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Validate and convert the input date to a datetime.date object.</span>

<span class="sd">    This method accepts either a string in &#39;YYYY-MM-DD&#39; format or a datetime.date object.</span>
<span class="sd">    It converts the input to a datetime.date object, ensuring it&#39;s in the correct format.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    v : str | dt.date</span>
<span class="sd">        The input date to validate and convert.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dt.date</span>
<span class="sd">        The validated and converted date.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If the input string is not in the correct format.</span>
<span class="sd">    TypeError</span>
<span class="sd">        If the input is neither a string nor a datetime.date object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="n">tzinfo</span><span class="o">=</span><span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s2">&quot;America/New_York&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Invalid date format. Must be YYYY-MM-DD: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">):</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">combine</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">time</span><span class="p">())</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
            <span class="n">tzinfo</span><span class="o">=</span><span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s2">&quot;America/New_York&quot;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Expected str or date, got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="c1"># Check if the date is in the correct format</span>
    <span class="k">if</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Date must be in YYYY-MM-DD format&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">date</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">1950</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Date must be after 1950-01-01&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">date</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>






<div class="doc doc-object doc-class">



<h5 id="humbldata.core.standard_models.toolbox.ToolboxData" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.standard_models.toolbox.ToolboxData</span>


<a href="#humbldata.core.standard_models.toolbox.ToolboxData" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.data.Data" href="../core/#humbldata.core.standard_models.abstract.data.Data">Data</a></code></p>

  
      <p>The Data for the ToolboxController.</p>
<p>WIP: I'm thinking that this is the final layer around which the
HumblDataObject will be returned to the user, with all necessary information
about the query, command, data and charts that they should want.
This HumblDataObject will return values in json/dict format, with methods
to allow transformation into polars_df, pandas_df, a list, a dict...</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/standard_models/toolbox/__init__.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ToolboxData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Data for the ToolboxController.</span>

<span class="sd">    WIP: I&#39;m thinking that this is the final layer around which the</span>
<span class="sd">    HumblDataObject will be returned to the user, with all necessary information</span>
<span class="sd">    about the query, command, data and charts that they should want.</span>
<span class="sd">    This HumblDataObject will return values in json/dict format, with methods</span>
<span class="sd">    to allow transformation into polars_df, pandas_df, a list, a dict...</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">date</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Date</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="nb">open</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Open&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">high</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;High&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;high&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">low</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Low&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">close</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Close&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;close&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">volume</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">Field</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Volume&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">DATA_DESCRIPTIONS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;volume&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">





  </div>

  </div>


</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h3 id="humbldata.core.utils" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.utils</span>


<a href="#humbldata.core.utils" class="headerlink" title="Permanent link">¤</a></h3>

  <div class="doc doc-contents ">
  
      <p>humbldata core utils.</p>
<p>Utils is used to keep; helpers, descriptions, constants, and other useful tools.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h4 id="humbldata.core.utils.env" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.utils.env</span>


<a href="#humbldata.core.utils.env" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">
  
      <p>The Env Module, to control a single instance of environment variables.</p>

  

  <div class="doc doc-children">











<div class="doc doc-object doc-class">



<h5 id="humbldata.core.utils.env.Env" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">humbldata.core.utils.env.Env</span>


<a href="#humbldata.core.utils.env.Env" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">

  
      <p>A singleton environment to hold all Environment variables.</p>

            <details class="quote">
              <summary>Source code in <code>src/humbldata/core/utils/env.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Env</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">SingletonMeta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A singleton environment to hold all Environment variables.&quot;&quot;&quot;</span>

    <span class="n">_environ</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">env_path</span> <span class="o">=</span> <span class="n">dotenv</span><span class="o">.</span><span class="n">find_dotenv</span><span class="p">()</span>
        <span class="n">dotenv</span><span class="o">.</span><span class="n">load_dotenv</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">env_path</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_environ</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">OBB_PAT</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># noqa: N802</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;OpenBB Personal Access Token.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OBB_PAT&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">LOGGER_LEVEL</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the global logger level.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            The numeric logging level (default: 20 for INFO).</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Mapping of string levels to numeric values:</span>
<span class="sd">        DEBUG: 10, INFO: 20, WARNING: 30, ERROR: 40, CRITICAL: 50</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">level_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;DEBUG&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;INFO&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
            <span class="s2">&quot;WARNING&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
            <span class="s2">&quot;ERROR&quot;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
            <span class="s2">&quot;CRITICAL&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">level_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;LOGGER_LEVEL&quot;</span><span class="p">,</span> <span class="s2">&quot;INFO&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="mi">20</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">OBB_LOGGED_IN</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">str2bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;OBB_LOGGED_IN&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">str2bool</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Match a value to its boolean correspondent.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (str): The string value to be converted to a boolean.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            bool: The boolean value corresponding to the input string.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">            ValueError: If the input string does not correspond to a boolean</span>
<span class="sd">            value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;false&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;no&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">}:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">}:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Failed to cast &#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&#39; to bool.&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h6 id="humbldata.core.utils.env.Env.OBB_PAT" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>          <span class="doc doc-object-name doc-attribute-name">humbldata.core.utils.env.Env.OBB_PAT</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#humbldata.core.utils.env.Env.OBB_PAT" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">OBB_PAT</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>OpenBB Personal Access Token.</p>
  </div>

</div>






<div class="doc doc-object doc-attribute">



<h6 id="humbldata.core.utils.env.Env.LOGGER_LEVEL" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>          <span class="doc doc-object-name doc-attribute-name">humbldata.core.utils.env.Env.LOGGER_LEVEL</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#humbldata.core.utils.env.Env.LOGGER_LEVEL" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">LOGGER_LEVEL</span><span class="p">:</span> <span class="n">int</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Get the global logger level.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The numeric logging level (default: 20 for INFO).</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>Mapping of string levels to numeric values:
DEBUG: 10, INFO: 20, WARNING: 30, ERROR: 40, CRITICAL: 50</p>
</details>  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.core.utils.env.Env.str2bool" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.utils.env.Env.str2bool</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#humbldata.core.utils.env.Env.str2bool" class="headerlink" title="Permanent link">¤</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">str2bool</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">bool</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Match a value to its boolean correspondent.</p>
<p>Args:
    value (str): The string value to be converted to a boolean.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>    bool: The boolean value corresponding to the input string.</code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Raises:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>    ValueError: If the input string does not correspond to a boolean</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>value.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/utils/env.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">str2bool</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Match a value to its boolean correspondent.</span>

<span class="sd">    Args:</span>
<span class="sd">        value (str): The string value to be converted to a boolean.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">        bool: The boolean value corresponding to the input string.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">        ValueError: If the input string does not correspond to a boolean</span>
<span class="sd">        value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span>
    <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;false&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;no&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">}:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">}:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Failed to cast &#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&#39; to bool.&quot;</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="humbldata.core.utils.descriptions" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.utils.descriptions</span>


<a href="#humbldata.core.utils.descriptions" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">
  
      <p>Common descriptions for model fields.</p>

  

  <div class="doc doc-children">





  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="humbldata.core.utils.constants" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.utils.constants</span>


<a href="#humbldata.core.utils.constants" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">
  
      <p>A module to contain all project-wide constants.</p>

  

  <div class="doc doc-children">





  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="humbldata.core.utils.logger" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.utils.logger</span>


<a href="#humbldata.core.utils.logger" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">












<div class="doc doc-object doc-function">



<h5 id="humbldata.core.utils.logger.setup_logger" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.utils.logger.setup_logger</span>


<a href="#humbldata.core.utils.logger.setup_logger" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">setup_logger</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="n">str</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="logging.Logger">Logger</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Set up a logger with the specified name and logging level.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the logger.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>level</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The logging level, by default logging.INFO.</p>
            </div>
          </td>
          <td>
                <code><span title="logging.INFO">INFO</span></code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="logging.Logger">Logger</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A configured logger instance.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>This function creates a logger with a StreamHandler that outputs to sys.stdout.
It uses a formatter that includes timestamp, logger name, log level, and message.
If the logger already has handlers, it skips the setup to avoid duplicate logging.
The logger is configured not to propagate messages to the root logger.</p>
</details>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">setup_logger</span><span class="p">(</span><span class="s2">&quot;my_logger&quot;</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;This is a debug message&quot;</span><span class="p">)</span>
<span class="go">2023-05-20 10:30:45,123 - my_logger - DEBUG - This is a debug message</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/utils/logger.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">setup_logger</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set up a logger with the specified name and logging level.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name : str</span>
<span class="sd">        The name of the logger.</span>
<span class="sd">    level : int, optional</span>
<span class="sd">        The logging level, by default logging.INFO.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    logging.Logger</span>
<span class="sd">        A configured logger instance.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function creates a logger with a StreamHandler that outputs to sys.stdout.</span>
<span class="sd">    It uses a formatter that includes timestamp, logger name, log level, and message.</span>
<span class="sd">    If the logger already has handlers, it skips the setup to avoid duplicate logging.</span>
<span class="sd">    The logger is configured not to propagate messages to the root logger.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; logger = setup_logger(&quot;my_logger&quot;, logging.DEBUG)</span>
<span class="sd">    &gt;&gt;&gt; logger.debug(&quot;This is a debug message&quot;)</span>
<span class="sd">    2023-05-20 10:30:45,123 - my_logger - DEBUG - This is a debug message</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="c1"># Check if the logger already has handlers to avoid duplicate logging</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>

        <span class="c1"># Install coloredlogs</span>
        <span class="n">coloredlogs</span><span class="o">.</span><span class="n">install</span><span class="p">(</span>
            <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span>
            <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">,</span>
            <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(levelname)s</span><span class="s2">: </span><span class="si">%(name)s</span><span class="s2"> || </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">level_styles</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;debug&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;green&quot;</span><span class="p">},</span>
                <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">},</span>
                <span class="s2">&quot;warning&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;yellow&quot;</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
                <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
                <span class="s2">&quot;critical&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;bold&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="s2">&quot;background&quot;</span><span class="p">:</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">},</span>
            <span class="n">field_styles</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;asctime&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">},</span>
                <span class="s2">&quot;levelname&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;magenta&quot;</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;cyan&quot;</span><span class="p">},</span>
            <span class="p">},</span>
        <span class="p">)</span>

    <span class="c1"># Prevent the logger from propagating messages to the root logger</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">propagate</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="n">logger</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h5 id="humbldata.core.utils.logger.log_start_end" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.utils.logger.log_start_end</span>


<a href="#humbldata.core.utils.logger.log_start_end" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">log_start_end</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n"><span title="collections.abc.Callable">Callable</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n"><span title="logging.Logger">Logger</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="collections.abc.Callable">Callable</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Log the start and end of any function, including time tracking.</p>
<p>This decorator works with both synchronous and asynchronous functions.
It logs the start and end of the function execution, as well as the total
execution time. If an exception occurs, it logs the exception details.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>func</code></td>
          <td>
                <code><span title="collections.abc.Callable">Callable</span> | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The function to be decorated. If None, the decorator can be used with parameters.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>logger</code></td>
          <td>
                <code><span title="logging.Logger">Logger</span> | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The logger to use. If None, a logger will be created using the function's module name.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="collections.abc.Callable">Callable</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The wrapped function.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <ul>
<li>For asynchronous functions, the decorator uses an async wrapper.</li>
<li>For synchronous functions, it uses a sync wrapper.</li>
<li>If a KeyboardInterrupt occurs, it logs the interruption and returns an empty list.</li>
<li>If any other exception occurs, it logs the exception and re-raises it.</li>
</ul>
</details>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="nd">@log_start_end</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">example_function</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This is an example function&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">example_function</span><span class="p">()</span>
<span class="go">START: example_function (sync)</span>
<span class="go">This is an example function</span>
<span class="go">END: example_function (sync) - Total time: 0.0001s</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="nd">@log_start_end</span><span class="p">(</span><span class="n">logger</span><span class="o">=</span><span class="n">custom_logger</span><span class="p">)</span>
<span class="gp">... </span><span class="k">async</span> <span class="k">def</span> <span class="nf">async_example</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">async_example</span><span class="p">())</span>
<span class="go">START: async_example (async)</span>
<span class="go">END: async_example (async) - Total time: 1.0012s</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/utils/logger.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">log_start_end</span><span class="p">(</span>
    <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Log the start and end of any function, including time tracking.</span>

<span class="sd">    This decorator works with both synchronous and asynchronous functions.</span>
<span class="sd">    It logs the start and end of the function execution, as well as the total</span>
<span class="sd">    execution time. If an exception occurs, it logs the exception details.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    func : Callable | None, optional</span>
<span class="sd">        The function to be decorated. If None, the decorator can be used with parameters.</span>
<span class="sd">    logger : logging.Logger | None, optional</span>
<span class="sd">        The logger to use. If None, a logger will be created using the function&#39;s module name.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Callable</span>
<span class="sd">        The wrapped function.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    - For asynchronous functions, the decorator uses an async wrapper.</span>
<span class="sd">    - For synchronous functions, it uses a sync wrapper.</span>
<span class="sd">    - If a KeyboardInterrupt occurs, it logs the interruption and returns an empty list.</span>
<span class="sd">    - If any other exception occurs, it logs the exception and re-raises it.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; @log_start_end</span>
<span class="sd">    ... def example_function():</span>
<span class="sd">    ...     print(&quot;This is an example function&quot;)</span>
<span class="sd">    ...</span>
<span class="sd">    &gt;&gt;&gt; example_function()</span>
<span class="sd">    START: example_function (sync)</span>
<span class="sd">    This is an example function</span>
<span class="sd">    END: example_function (sync) - Total time: 0.0001s</span>

<span class="sd">    &gt;&gt;&gt; @log_start_end(logger=custom_logger)</span>
<span class="sd">    ... async def async_example():</span>
<span class="sd">    ...     await asyncio.sleep(1)</span>
<span class="sd">    ...</span>
<span class="sd">    &gt;&gt;&gt; asyncio.run(async_example())</span>
<span class="sd">    START: async_example (async)</span>
<span class="sd">    END: async_example (async) - Total time: 1.0012s</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> <span class="ow">or</span> <span class="n">func</span> <span class="ow">is</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
        <span class="nd">@functools</span><span class="o">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">async_wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
            <span class="k">nonlocal</span> <span class="n">logger</span>
            <span class="k">if</span> <span class="n">logger</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__module__</span><span class="p">)</span>

            <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;START: </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> (async)&quot;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
                <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                <span class="n">total_time</span> <span class="o">=</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;INTERRUPTED: </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> (async) - Total time: </span><span class="si">{</span><span class="n">total_time</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">s&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="p">[]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                <span class="n">total_time</span> <span class="o">=</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;EXCEPTION in </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> (async) - Total time: </span><span class="si">{</span><span class="n">total_time</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">s&quot;</span>
                <span class="p">)</span>
                <span class="k">raise</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                <span class="n">total_time</span> <span class="o">=</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;END: </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> (async) - Total time: </span><span class="si">{</span><span class="n">total_time</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">s&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">result</span>

        <span class="nd">@functools</span><span class="o">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">sync_wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
            <span class="k">nonlocal</span> <span class="n">logger</span>
            <span class="k">if</span> <span class="n">logger</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__module__</span><span class="p">)</span>

            <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;START: </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> (sync)&quot;</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
                <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                <span class="n">total_time</span> <span class="o">=</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;INTERRUPTED: </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> (sync) - Total time: </span><span class="si">{</span><span class="n">total_time</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">s&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="p">[]</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                <span class="n">total_time</span> <span class="o">=</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;EXCEPTION in </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> (sync) - Total time: </span><span class="si">{</span><span class="n">total_time</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">s&quot;</span>
                <span class="p">)</span>
                <span class="k">raise</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                <span class="n">total_time</span> <span class="o">=</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;END: </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> (sync) - Total time: </span><span class="si">{</span><span class="n">total_time</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">s&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">result</span>

        <span class="k">if</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">iscoroutinefunction</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">async_wrapper</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">sync_wrapper</span>

    <span class="k">return</span> <span class="n">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> <span class="k">else</span> <span class="n">decorator</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="humbldata.core.utils.openbb_helpers" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.utils.openbb_helpers</span>


<a href="#humbldata.core.utils.openbb_helpers" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">
  
      <p>Core Module - OpenBB Helpers.</p>
<p>This module contains functions used to interact with OpenBB, or wrap commands
to have specific data outputs.</p>

  

  <div class="doc doc-children">












<div class="doc doc-object doc-function">



<h5 id="humbldata.core.utils.openbb_helpers.obb_login" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.utils.openbb_helpers.obb_login</span>


<a href="#humbldata.core.utils.openbb_helpers.obb_login" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">obb_login</span><span class="p">(</span><span class="n">pat</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">bool</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Log into the OpenBB Hub using a Personal Access Token (PAT).</p>
<p>This function wraps the <code>obb.account.login</code> method to provide a simplified
interface for logging into OpenBB Hub. It optionally accepts a PAT. If no PAT
is provided, it attempts to use the PAT stored in the environment variable
<code>OBB_PAT</code>.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>pat</code></td>
          <td>
                <code>str | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The personal access token for authentication. If None, the token is
retrieved from the environment variable <code>OBB_PAT</code>. Default is None.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>True if login is successful, False otherwise.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Raises:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>HumblDataError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If an error occurs during the login process.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># obb_login(&quot;your_personal_access_token_here&quot;)</span>
<span class="go">True</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="c1"># obb_login()  # Assumes `OBB_PAT` is set in the environment</span>
<span class="go">True</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/utils/openbb_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">obb_login</span><span class="p">(</span><span class="n">pat</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Log into the OpenBB Hub using a Personal Access Token (PAT).</span>

<span class="sd">    This function wraps the `obb.account.login` method to provide a simplified</span>
<span class="sd">    interface for logging into OpenBB Hub. It optionally accepts a PAT. If no PAT</span>
<span class="sd">    is provided, it attempts to use the PAT stored in the environment variable</span>
<span class="sd">    `OBB_PAT`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    pat : str | None, optional</span>
<span class="sd">        The personal access token for authentication. If None, the token is</span>
<span class="sd">        retrieved from the environment variable `OBB_PAT`. Default is None.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    bool</span>
<span class="sd">        True if login is successful, False otherwise.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    HumblDataError</span>
<span class="sd">        If an error occurs during the login process.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; # obb_login(&quot;your_personal_access_token_here&quot;)</span>
<span class="sd">    True</span>

<span class="sd">    &gt;&gt;&gt; # obb_login()  # Assumes `OBB_PAT` is set in the environment</span>
<span class="sd">    True</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">pat</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pat</span> <span class="o">=</span> <span class="n">Env</span><span class="p">()</span><span class="o">.</span><span class="n">OBB_PAT</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obb</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">pat</span><span class="o">=</span><span class="n">pat</span><span class="p">,</span> <span class="n">remember_me</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># obb.account.save()</span>

        <span class="c1"># dotenv.set_key(dotenv.find_dotenv(), &quot;OBB_LOGGED_IN&quot;, &quot;true&quot;)</span>

        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">humbldata.core.standard_models.abstract.warnings</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">HumblDataWarning</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># dotenv.set_key(dotenv.find_dotenv(), &quot;OBB_LOGGED_IN&quot;, &quot;false&quot;)</span>

        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;An error occurred while logging into OpenBB. Details below:</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
            <span class="n">category</span><span class="o">=</span><span class="n">HumblDataWarning</span><span class="p">,</span>
            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h5 id="humbldata.core.utils.openbb_helpers.get_latest_price" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.utils.openbb_helpers.get_latest_price</span>


<a href="#humbldata.core.utils.openbb_helpers.get_latest_price" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_latest_price</span><span class="p">(</span><span class="n">symbol</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">provider</span><span class="p">:</span> <span class="n"><span title="humbldata.core.utils.constants.OBB_EQUITY_PRICE_QUOTE_PROVIDERS">OBB_EQUITY_PRICE_QUOTE_PROVIDERS</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;yfinance&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Core || Category: Utils || Subcategory: OpenBB Helpers || <strong>Command: get_latest_price</strong>.</p>
<p>Queries the latest stock price data for the given symbol(s) using the
specified provider. Defaults to YahooFinance (<code>yfinance</code>) if no provider is
specified. Returns a LazyFrame with the stock symbols and their latest prices.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>symbol</code></td>
          <td>
                <code>str | list[str] | <span title="polars.Series">Series</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The stock symbol(s) to query for the latest price. Accepts a single
symbol, a list of symbols, or a Polars Series of symbols.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>provider</code></td>
          <td>
                <code><span title="humbldata.core.utils.constants.OBB_EQUITY_PRICE_QUOTE_PROVIDERS">OBB_EQUITY_PRICE_QUOTE_PROVIDERS</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The data provider for fetching stock prices. Defaults is <code>yfinance</code>,
in which case a default provider is used.</p>
            </div>
          </td>
          <td>
                <code>&#39;yfinance&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A Polars LazyFrame with columns for the stock symbols ('symbol') and
their latest prices ('last_price').</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/utils/openbb_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_latest_price</span><span class="p">(</span>
    <span class="n">symbol</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">provider</span><span class="p">:</span> <span class="n">OBB_EQUITY_PRICE_QUOTE_PROVIDERS</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;yfinance&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Core || Category: Utils || Subcategory: OpenBB Helpers || **Command: get_latest_price**.</span>

<span class="sd">    Queries the latest stock price data for the given symbol(s) using the</span>
<span class="sd">    specified provider. Defaults to YahooFinance (`yfinance`) if no provider is</span>
<span class="sd">    specified. Returns a LazyFrame with the stock symbols and their latest prices.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbol : str | list[str] | pl.Series</span>
<span class="sd">        The stock symbol(s) to query for the latest price. Accepts a single</span>
<span class="sd">        symbol, a list of symbols, or a Polars Series of symbols.</span>
<span class="sd">    provider : OBB_EQUITY_PRICE_QUOTE_PROVIDERS, optional</span>
<span class="sd">        The data provider for fetching stock prices. Defaults is `yfinance`,</span>
<span class="sd">        in which case a default provider is used.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        A Polars LazyFrame with columns for the stock symbols (&#39;symbol&#39;) and</span>
<span class="sd">        their latest prices (&#39;last_price&#39;).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;openbb_terminal.stocks.stocks_model&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">CRITICAL</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="n">obb</span><span class="o">.</span><span class="n">equity</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="n">provider</span><span class="p">)</span>
        <span class="o">.</span><span class="n">to_polars</span><span class="p">()</span>
        <span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;last_price&quot;</span><span class="p">])</span>
        <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&quot;last_price&quot;</span><span class="p">:</span> <span class="s2">&quot;recent_price&quot;</span><span class="p">})</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h5 id="humbldata.core.utils.openbb_helpers.aget_latest_price" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.utils.openbb_helpers.aget_latest_price</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#humbldata.core.utils.openbb_helpers.aget_latest_price" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">aget_latest_price</span><span class="p">(</span><span class="n">symbols</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">provider</span><span class="p">:</span> <span class="n"><span title="humbldata.core.utils.constants.OBB_EQUITY_PRICE_QUOTE_PROVIDERS">OBB_EQUITY_PRICE_QUOTE_PROVIDERS</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;yfinance&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Asynchronous version of get_latest_price.</p>
<p>Context: Core || Category: Utils || Subcategory: OpenBB Helpers || <strong>Command: get_latest_price_async</strong>.</p>
<p>Queries the latest stock price data for the given symbol(s) using the
specified provider asynchronously. This functions collects the latest prices
for ETF's and Equities, but not futures or options. Defaults to YahooFinance
(<code>yfinance</code>) if no provider is specified. Returns a LazyFrame with the stock
symbols and their latest prices.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>symbols</code></td>
          <td>
                <code>str | List[str] | <span title="polars.Series">Series</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The stock symbol(s) to query for the latest price. Accepts a single
symbol, a list of symbols, or a Polars Series of symbols.
You can pass multiple symbols as a string; <code>'AAPL,XLE'</code>, and it will
split the string into a list of symbols.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>provider</code></td>
          <td>
                <code><span title="humbldata.core.utils.constants.OBB_EQUITY_PRICE_QUOTE_PROVIDERS">OBB_EQUITY_PRICE_QUOTE_PROVIDERS</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The data provider for fetching stock prices. Default is <code>yfinance</code>.</p>
            </div>
          </td>
          <td>
                <code>&#39;yfinance&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A Polars LazyFrame with columns for the stock symbols ('symbol') and
their latest prices ('recent_price').</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>If entering symbols as a string, DO NOT include spaces between the symbols.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/utils/openbb_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">aget_latest_price</span><span class="p">(</span>
    <span class="n">symbols</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">provider</span><span class="p">:</span> <span class="n">OBB_EQUITY_PRICE_QUOTE_PROVIDERS</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;yfinance&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asynchronous version of get_latest_price.</span>

<span class="sd">    Context: Core || Category: Utils || Subcategory: OpenBB Helpers || **Command: get_latest_price_async**.</span>

<span class="sd">    Queries the latest stock price data for the given symbol(s) using the</span>
<span class="sd">    specified provider asynchronously. This functions collects the latest prices</span>
<span class="sd">    for ETF&#39;s and Equities, but not futures or options. Defaults to YahooFinance</span>
<span class="sd">    (`yfinance`) if no provider is specified. Returns a LazyFrame with the stock</span>
<span class="sd">    symbols and their latest prices.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbols : str | List[str] | pl.Series</span>
<span class="sd">        The stock symbol(s) to query for the latest price. Accepts a single</span>
<span class="sd">        symbol, a list of symbols, or a Polars Series of symbols.</span>
<span class="sd">        You can pass multiple symbols as a string; `&#39;AAPL,XLE&#39;`, and it will</span>
<span class="sd">        split the string into a list of symbols.</span>
<span class="sd">    provider : OBB_EQUITY_PRICE_QUOTE_PROVIDERS, optional</span>
<span class="sd">        The data provider for fetching stock prices. Default is `yfinance`.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        A Polars LazyFrame with columns for the stock symbols (&#39;symbol&#39;) and</span>
<span class="sd">        their latest prices (&#39;recent_price&#39;).</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    If entering symbols as a string, DO NOT include spaces between the symbols.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">obb</span><span class="o">.</span><span class="n">equity</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="n">provider</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">to_polars</span><span class="p">()</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
    <span class="k">if</span> <span class="p">{</span><span class="s2">&quot;last_price&quot;</span><span class="p">,</span> <span class="s2">&quot;prev_close&quot;</span><span class="p">}</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">collect_schema</span><span class="p">()</span><span class="o">.</span><span class="n">names</span><span class="p">()):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;asset_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;ETF&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;prev_close&quot;</span><span class="p">))</span>
                <span class="o">.</span><span class="n">otherwise</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;last_price&quot;</span><span class="p">))</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;last_price&quot;</span><span class="p">),</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="s2">&quot;last_price&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">collect_schema</span><span class="p">()</span><span class="o">.</span><span class="n">names</span><span class="p">():</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">),</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;prev_close&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;last_price&quot;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">),</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;last_price&quot;</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h5 id="humbldata.core.utils.openbb_helpers.aget_last_close" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.utils.openbb_helpers.aget_last_close</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#humbldata.core.utils.openbb_helpers.aget_last_close" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">aget_last_close</span><span class="p">(</span><span class="n">symbols</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">provider</span><span class="p">:</span> <span class="n"><span title="humbldata.core.utils.constants.OBB_EQUITY_PRICE_QUOTE_PROVIDERS">OBB_EQUITY_PRICE_QUOTE_PROVIDERS</span></span> <span class="o">=</span> <span class="s1">&#39;yfinance&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Core || Category: Utils || Subcategory: OpenBB Helpers || <strong>Command: aget_last_close</strong>.</p>
<p>Asynchronously retrieves the last closing price for the given stock symbol(s) using OpenBB's equity price quote data.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>symbols</code></td>
          <td>
                <code>str | List[str] | <span title="polars.Series">Series</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The stock symbol(s) to query for the last closing price. Accepts a single
symbol, a list of symbols, or a Polars Series of symbols. You can pass
multiple symbols as a string; <code>'AAPL,XLE'</code>, and it will split the string
into a list of symbols.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>provider</code></td>
          <td>
                <code><span title="humbldata.core.utils.constants.OBB_EQUITY_PRICE_QUOTE_PROVIDERS">OBB_EQUITY_PRICE_QUOTE_PROVIDERS</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The data provider for fetching stock prices. Default is <code>yfinance</code>.</p>
            </div>
          </td>
          <td>
                <code>&#39;yfinance&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A Polars LazyFrame with columns for the stock symbols ('symbol') and
their last closing prices ('prev_close').</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>This function uses OpenBB's equity price quote data to fetch the last closing price.
It returns a lazy frame for efficient processing, especially with large datasets.</p>
<p>If entering symbols as a string, DO NOT include spaces between the symbols.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/utils/openbb_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">aget_last_close</span><span class="p">(</span>
    <span class="n">symbols</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">provider</span><span class="p">:</span> <span class="n">OBB_EQUITY_PRICE_QUOTE_PROVIDERS</span> <span class="o">=</span> <span class="s2">&quot;yfinance&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Core || Category: Utils || Subcategory: OpenBB Helpers || **Command: aget_last_close**.</span>

<span class="sd">    Asynchronously retrieves the last closing price for the given stock symbol(s) using OpenBB&#39;s equity price quote data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbols : str | List[str] | pl.Series</span>
<span class="sd">        The stock symbol(s) to query for the last closing price. Accepts a single</span>
<span class="sd">        symbol, a list of symbols, or a Polars Series of symbols. You can pass</span>
<span class="sd">        multiple symbols as a string; `&#39;AAPL,XLE&#39;`, and it will split the string</span>
<span class="sd">        into a list of symbols.</span>
<span class="sd">    provider : OBB_EQUITY_PRICE_QUOTE_PROVIDERS, optional</span>
<span class="sd">        The data provider for fetching stock prices. Default is `yfinance`.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        A Polars LazyFrame with columns for the stock symbols (&#39;symbol&#39;) and</span>
<span class="sd">        their last closing prices (&#39;prev_close&#39;).</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function uses OpenBB&#39;s equity price quote data to fetch the last closing price.</span>
<span class="sd">    It returns a lazy frame for efficient processing, especially with large datasets.</span>

<span class="sd">    If entering symbols as a string, DO NOT include spaces between the symbols.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">obb</span><span class="o">.</span><span class="n">equity</span><span class="o">.</span><span class="n">price</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="n">provider</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">to_polars</span><span class="p">()</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">out</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">),</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;prev_close&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h5 id="humbldata.core.utils.openbb_helpers.get_equity_sector" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.utils.openbb_helpers.get_equity_sector</span>


<a href="#humbldata.core.utils.openbb_helpers.get_equity_sector" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_equity_sector</span><span class="p">(</span><span class="n">symbols</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">provider</span><span class="p">:</span> <span class="n"><span title="humbldata.core.utils.constants.OBB_EQUITY_PROFILE_PROVIDERS">OBB_EQUITY_PROFILE_PROVIDERS</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;yfinance&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Core || Category: Utils || Subcategory: OpenBB Helpers || <strong>Command: get_sector</strong>.</p>
<p>Retrieves the sector information for the given stock symbol(s) using OpenBB's equity profile data.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>symbols</code></td>
          <td>
                <code>str | list[str] | <span title="polars.Series">Series</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The stock symbol(s) to query for sector information. Accepts a single
symbol, a list of symbols, or a Polars Series of symbols.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>provider</code></td>
          <td>
                <code>str | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The data provider to use for fetching sector information. If None, the default
provider will be used.</p>
            </div>
          </td>
          <td>
                <code>&#39;yfinance&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A Polars LazyFrame with columns for the stock symbols ('symbol') and
their corresponding sectors ('sector').</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>This function uses OpenBB's equity profile data to fetch sector information.
It returns a lazy frame for efficient processing, especially with large datasets.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/utils/openbb_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_equity_sector</span><span class="p">(</span>
    <span class="n">symbols</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">provider</span><span class="p">:</span> <span class="n">OBB_EQUITY_PROFILE_PROVIDERS</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;yfinance&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Core || Category: Utils || Subcategory: OpenBB Helpers || **Command: get_sector**.</span>

<span class="sd">    Retrieves the sector information for the given stock symbol(s) using OpenBB&#39;s equity profile data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbols : str | list[str] | pl.Series</span>
<span class="sd">        The stock symbol(s) to query for sector information. Accepts a single</span>
<span class="sd">        symbol, a list of symbols, or a Polars Series of symbols.</span>
<span class="sd">    provider : str | None, optional</span>
<span class="sd">        The data provider to use for fetching sector information. If None, the default</span>
<span class="sd">        provider will be used.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        A Polars LazyFrame with columns for the stock symbols (&#39;symbol&#39;) and</span>
<span class="sd">        their corresponding sectors (&#39;sector&#39;).</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function uses OpenBB&#39;s equity profile data to fetch sector information.</span>
<span class="sd">    It returns a lazy frame for efficient processing, especially with large datasets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">obb</span><span class="o">.</span><span class="n">equity</span><span class="o">.</span><span class="n">profile</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="n">provider</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">to_polars</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;sector&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">pl</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">ColumnNotFoundError</span><span class="p">:</span>
        <span class="c1"># If an error occurs, return a LazyFrame with symbol and null sector</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">symbols</span> <span class="o">=</span> <span class="p">[</span><span class="n">symbols</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
            <span class="n">symbols</span> <span class="o">=</span> <span class="n">symbols</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">(</span>
            <span class="p">{</span><span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">symbols</span><span class="p">,</span> <span class="s2">&quot;sector&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">symbols</span><span class="p">)}</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h5 id="humbldata.core.utils.openbb_helpers.aget_equity_sector" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.utils.openbb_helpers.aget_equity_sector</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#humbldata.core.utils.openbb_helpers.aget_equity_sector" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">aget_equity_sector</span><span class="p">(</span><span class="n">symbols</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">provider</span><span class="p">:</span> <span class="n"><span title="humbldata.core.utils.constants.OBB_EQUITY_PROFILE_PROVIDERS">OBB_EQUITY_PROFILE_PROVIDERS</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;yfinance&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Asynchronous version of get_sector.</p>
<p>Context: Core || Category: Utils || Subcategory: OpenBB Helpers || <strong>Command: get_sector_async</strong>.</p>
<p>Retrieves the sector information for the given stock symbol(s) using
OpenBB's equity profile data asynchronously. If an ETF is passed, it will
return a NULL sector for the symbol. The sector returned hasn't been
normalized to GICS_SECTORS, it is the raw OpenBB sector output.
Sectors are normalized to GICS_SECTORS in the <code>aet_sector_filter</code> function.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>symbols</code></td>
          <td>
                <code>str | List[str] | <span title="polars.Series">Series</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The stock symbol(s) to query for sector information. Accepts a single
symbol, a list of symbols, or a Polars Series of symbols.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>provider</code></td>
          <td>
                <code>str | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The data provider to use for fetching sector information. If None, the default
provider will be used.</p>
            </div>
          </td>
          <td>
                <code>&#39;yfinance&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A Polars LazyFrame with columns for the stock symbols ('symbol') and
their corresponding sectors ('sector').</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>This function uses OpenBB's equity profile data to fetch sector information.
It returns a lazy frame for efficient processing, especially with large datasets.</p>
<p>If you just pass an ETF to the <code>obb.equity.profile</code> function, it will throw
return data without the NULL columns (sector column included) and only
returns columns where there is data, so we need to handle that edge case.
If an ETF is included with an equity, it will return a NULL sector column,
so we can select the sector column from the ETF data and return it as a
NULL sector for the equity.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/utils/openbb_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">aget_equity_sector</span><span class="p">(</span>
    <span class="n">symbols</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">provider</span><span class="p">:</span> <span class="n">OBB_EQUITY_PROFILE_PROVIDERS</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;yfinance&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asynchronous version of get_sector.</span>

<span class="sd">    Context: Core || Category: Utils || Subcategory: OpenBB Helpers || **Command: get_sector_async**.</span>

<span class="sd">    Retrieves the sector information for the given stock symbol(s) using</span>
<span class="sd">    OpenBB&#39;s equity profile data asynchronously. If an ETF is passed, it will</span>
<span class="sd">    return a NULL sector for the symbol. The sector returned hasn&#39;t been</span>
<span class="sd">    normalized to GICS_SECTORS, it is the raw OpenBB sector output.</span>
<span class="sd">    Sectors are normalized to GICS_SECTORS in the `aet_sector_filter` function.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbols : str | List[str] | pl.Series</span>
<span class="sd">        The stock symbol(s) to query for sector information. Accepts a single</span>
<span class="sd">        symbol, a list of symbols, or a Polars Series of symbols.</span>
<span class="sd">    provider : str | None, optional</span>
<span class="sd">        The data provider to use for fetching sector information. If None, the default</span>
<span class="sd">        provider will be used.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        A Polars LazyFrame with columns for the stock symbols (&#39;symbol&#39;) and</span>
<span class="sd">        their corresponding sectors (&#39;sector&#39;).</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function uses OpenBB&#39;s equity profile data to fetch sector information.</span>
<span class="sd">    It returns a lazy frame for efficient processing, especially with large datasets.</span>

<span class="sd">    If you just pass an ETF to the `obb.equity.profile` function, it will throw</span>
<span class="sd">    return data without the NULL columns (sector column included) and only</span>
<span class="sd">    returns columns where there is data, so we need to handle that edge case.</span>
<span class="sd">    If an ETF is included with an equity, it will return a NULL sector column,</span>
<span class="sd">    so we can select the sector column from the ETF data and return it as a</span>
<span class="sd">    NULL sector for the equity.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span>
            <span class="kc">None</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">obb</span><span class="o">.</span><span class="n">equity</span><span class="o">.</span><span class="n">profile</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="n">provider</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">to_polars</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;sector&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">pl</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">ColumnNotFoundError</span><span class="p">:</span>
        <span class="c1"># If an error occurs, return a LazyFrame with symbol and null sector</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">symbols</span> <span class="o">=</span> <span class="p">[</span><span class="n">symbols</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
            <span class="n">symbols</span> <span class="o">=</span> <span class="n">symbols</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">(</span>
            <span class="p">{</span><span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">symbols</span><span class="p">,</span> <span class="s2">&quot;sector&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">symbols</span><span class="p">)}</span>
        <span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h5 id="humbldata.core.utils.openbb_helpers.aget_etf_category" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.utils.openbb_helpers.aget_etf_category</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#humbldata.core.utils.openbb_helpers.aget_etf_category" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">aget_etf_category</span><span class="p">(</span><span class="n">symbols</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n">list</span><span class="p">[</span><span class="n">str</span><span class="p">]</span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">provider</span><span class="p">:</span> <span class="n"><span title="humbldata.core.utils.constants.OBB_ETF_INFO_PROVIDERS">OBB_ETF_INFO_PROVIDERS</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;yfinance&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Asynchronously retrieves the category information for the given ETF symbol(s).</p>
<p>This function uses the <code>obb.etf.info</code> function and selects the <code>category</code>
column to get the sector information. This function handles EQUITY
symbols that are not ETF's the same way that <code>aget_equity_sector</code> does.
The sector returned (under the OpenBB column name <code>category</code>) hasn't been
normalized to GICS_SECTORS, it is the raw OpenBB category output.
Sectors are normalized to GICS_SECTORS in the <code>aget_sector_filter</code> function.</p>



  <p><span class="doc-section-title">Parameters:</span></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td><code>symbols</code></td>
          <td>
                <code>str | list[str] | <span title="polars.Series">Series</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The ETF symbol(s) to query for category information.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr class="doc-section-item">
          <td><code>provider</code></td>
          <td>
                <code><span title="humbldata.core.utils.constants.OBB_EQUITY_PROFILE_PROVIDERS">OBB_EQUITY_PROFILE_PROVIDERS</span> | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
          <td>
                <code>&#39;yfinance&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A Polars LazyFrame with columns for the ETF symbols ('symbol') and
their corresponding categories ('category').</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/utils/openbb_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">aget_etf_category</span><span class="p">(</span>
    <span class="n">symbols</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">provider</span><span class="p">:</span> <span class="n">OBB_ETF_INFO_PROVIDERS</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;yfinance&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asynchronously retrieves the category information for the given ETF symbol(s).</span>

<span class="sd">    This function uses the `obb.etf.info` function and selects the `category`</span>
<span class="sd">    column to get the sector information. This function handles EQUITY</span>
<span class="sd">    symbols that are not ETF&#39;s the same way that `aget_equity_sector` does.</span>
<span class="sd">    The sector returned (under the OpenBB column name `category`) hasn&#39;t been</span>
<span class="sd">    normalized to GICS_SECTORS, it is the raw OpenBB category output.</span>
<span class="sd">    Sectors are normalized to GICS_SECTORS in the `aget_sector_filter` function.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbols : str | list[str] | pl.Series</span>
<span class="sd">        The ETF symbol(s) to query for category information.</span>
<span class="sd">    provider : OBB_EQUITY_PROFILE_PROVIDERS | None, optional</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        A Polars LazyFrame with columns for the ETF symbols (&#39;symbol&#39;) and</span>
<span class="sd">        their corresponding categories (&#39;category&#39;).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span>
            <span class="kc">None</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">obb</span><span class="o">.</span><span class="n">etf</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="n">provider</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">to_polars</span><span class="p">()</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">])</span>
        <span class="c1"># Create a LazyFrame with all input symbols</span>
        <span class="n">all_symbols</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">({</span><span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">symbols</span><span class="p">})</span>

        <span class="c1"># Left join to include all input symbols, filling missing sectors with null</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">all_symbols</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">when</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">is_null</span><span class="p">())</span>
                <span class="o">.</span><span class="n">then</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                <span class="o">.</span><span class="n">otherwise</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">))</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="n">OpenBBError</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">symbols</span> <span class="o">=</span> <span class="p">[</span><span class="n">symbols</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">symbols</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
            <span class="n">symbols</span> <span class="o">=</span> <span class="n">symbols</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">(</span>
            <span class="p">{</span><span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">symbols</span><span class="p">,</span> <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">symbols</span><span class="p">)}</span>
        <span class="p">)</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Utf8</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="humbldata.core.utils.core_helpers" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.core.utils.core_helpers</span>


<a href="#humbldata.core.utils.core_helpers" class="headerlink" title="Permanent link">¤</a></h4>

  <div class="doc doc-contents ">
  
      <p>A module to contain core helper functions for the program.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h5 id="humbldata.core.utils.core_helpers.is_debug_mode" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.utils.core_helpers.is_debug_mode</span>


<a href="#humbldata.core.utils.core_helpers.is_debug_mode" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_debug_mode</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">bool</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Check if the current system is in debug mode.</p>



  <p><span class="doc-section-title">Returns:</span></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr class="doc-section-item">
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>True if the system is in debug mode, False otherwise.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/utils/core_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">is_debug_mode</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if the current system is in debug mode.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    bool</span>
<span class="sd">        True if the system is in debug mode, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h5 id="humbldata.core.utils.core_helpers.run_async" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">humbldata.core.utils.core_helpers.run_async</span>


<a href="#humbldata.core.utils.core_helpers.run_async" class="headerlink" title="Permanent link">¤</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">run_async</span><span class="p">(</span><span class="n">coro</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Run an async function in a new thread and return the result.</p>

          <details class="quote">
            <summary>Source code in <code>src/humbldata/core/utils/core_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">run_async</span><span class="p">(</span><span class="n">coro</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run an async function in a new thread and return the result.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">()</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
        <span class="n">future</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">coro</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div><hr />







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: 📚 Code Documentation">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                📚 Code Documentation
              </div>
            </div>
          </a>
        
        
          
          <a href="../core/" class="md-footer__link md-footer__link--next" aria-label="Next: Core">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Core
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Jennings Fantini
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/jjfantini" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
    
    
    
      
      
    
    <a href="https://fosstodon.org/@fractalFinance" target="_blank" rel="noopener me" title="fosstodon.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/fractalFinance_" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/humbldata/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.action.edit", "content.action.view", "content.code.copy", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.instant.preview", "navigation.tracking", "navigation.tabs", "navigation.expand", "navigation.path", "navigation.indexes", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>