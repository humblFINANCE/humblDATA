
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Jennings Fantini">
      
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../../category/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.13">
    
    
      
        <title>Toolbox - humbldata</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Code:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Fira Code";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#toolbox" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="humbldata" class="md-header__button md-logo" aria-label="humbldata" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            humbldata
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Toolbox
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/jjfantini/humbldata/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../getting_started/" class="md-tabs__link">
          
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../code_design/" class="md-tabs__link">
          
  
    
  
  Code Design

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  Code Documentation

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../contributing/" class="md-tabs__link">
        
  
    
  
  Contributing

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../roadmap/" class="md-tabs__link">
        
  
    
  
  Roadmap

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="humbldata" class="md-nav__button md-logo" aria-label="humbldata" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    humbldata
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jjfantini/humbldata/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../getting_started/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/installation/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17 14 5-5-1.4-1.4-2.6 2.6V3h-2v7.2l-2.6-2.6L12 9l5 5m6 0v2c0 1.1-.9 2-2 2h-7v2h2v2H8v-2h2v-2H3c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h9v2H3v12h18v-2h2Z"/></svg>
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/configuration/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"/></svg>
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/usage/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.78 15.3 6 6 2.11-2.16-6-6-2.11 2.16m3.72-5.2c-.39 0-.81-.05-1.14-.19L4.97 21.25l-2.11-2.11 7.41-7.4L8.5 9.96l-.72.7-1.45-1.41v2.86l-.7.7-3.52-3.56.7-.7h2.81l-1.4-1.41 3.56-3.56a2.976 2.976 0 0 1 4.22 0L9.89 5.74l1.41 1.4-.71.71 1.79 1.78 1.82-1.88c-.14-.33-.2-.75-.2-1.12a3.49 3.49 0 0 1 3.5-3.52c.59 0 1.11.14 1.58.42L16.41 6.2l1.5 1.5 2.67-2.67c.28.47.42.97.42 1.6 0 1.92-1.55 3.47-3.5 3.47Z"/></svg>
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting_started/development_setup/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 6V5a1 1 0 0 0-1-1H9V3H6v1H5v2h1v9H5v-2H3v2H2v2h1v4h2v-4h5v4h2v-4h1v-2h-1v-2h-2v2H9V6h8v4.62c-.47.17-.81.61-.81 1.14 0 .44.24.84.61 1.06V14h.62c.34 0 .61.28.61.62 0 .34-.27.62-.61.62-.22 0-.42-.12-.53-.31a.62.62 0 0 0-.84-.22c-.3.16-.4.54-.23.84.33.56.94.92 1.6.92 1.01 0 1.84-.83 1.84-1.85 0-.78-.5-1.48-1.23-1.74v-.06c.38-.22.62-.62.62-1.06 0-.46-.27-.85-.65-1.06V6h2M8 13.66l-1 1v-1.42l1-1v1.42m0-2.95-1 1v-1.42l1-1v1.42m-1-2V7.29l1-1v1.42l-1 1Z"/></svg>
  
  <span class="md-ellipsis">
    Development Setup
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../code_design/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Code Design
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Code Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code_design/cccc_method/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 22c-1.67 0-3.16-1.5-4.1-4.07-.07-.2.03-.43.24-.49.2-.08.42.03.49.23.81 2.23 2.07 3.56 3.37 3.56.94 0 1.87-.68 2.62-1.92a.386.386 0 0 1 .66.4C14.38 21.19 13.22 22 12 22m3.91-4.28a.36.36 0 0 1-.11-.02c-.21-.07-.3-.28-.26-.49.46-1.4.68-3.03.68-4.71 0-3.85-1.25-7.26-3.03-8.36-.25.36-.69.64-1.19.64-.76 0-1.39-.62-1.39-1.39 0-.77.63-1.39 1.39-1.39.77 0 1.4.61 1.41 1.37C15.53 4.5 17 8.21 17 12.5c0 1.75-.25 3.46-.72 4.95-.05.16-.2.27-.37.27M12 2.77c-.34 0-.62.28-.62.62 0 .34.29.61.62.61.35 0 .64-.27.64-.61 0-.34-.29-.62-.64-.62M4.08 18.54c-.77 0-1.4-.63-1.4-1.39 0-.49.26-.93.65-1.18-.14-2.41 2.35-5.56 6.17-7.75 1.59-.9 3.25-1.55 4.82-1.88.18-.05.41.08.45.29.05.21-.08.42-.27.46-1.5.32-3.09.94-4.6 1.8-3.44 1.97-5.8 4.79-5.8 6.87.76.01 1.4.63 1.4 1.39 0 .77-.65 1.39-1.42 1.39m0-2.01c-.34 0-.62.28-.62.62 0 .35.28.62.62.62s.63-.27.63-.62c0-.34-.29-.62-.63-.62m14.42-3.09c-.07 0-.16-.03-.23-.09a.393.393 0 0 1-.04-.55c1.54-1.8 2.07-3.54 1.41-4.66-.47-.81-1.54-1.26-3.01-1.28-.22 0-.39-.18-.38-.39 0-.21.18-.37.39-.38 1.75.02 3.06.61 3.67 1.66.84 1.44.29 3.46-1.49 5.55-.08.09-.19.14-.32.14m-2 5.46c-2 0-4.56-.74-7-2.13-1.55-.89-2.93-1.98-4-3.14a.402.402 0 0 1 0-.55c.18-.14.42-.13.57.03 1.01 1.1 2.33 2.14 3.82 2.99 3.31 1.9 6.88 2.53 8.76 1.62-.08-.17-.15-.37-.15-.57 0-.77.65-1.39 1.42-1.39.77 0 1.4.62 1.4 1.39a1.396 1.396 0 0 1-2.15 1.17c-.7.39-1.61.58-2.67.58m3-1.27c.13.08.27.14.42.14a.619.619 0 1 0 0-1.24c-.35 0-.62.28-.62.62 0 .14.05.27.13.38.04.02.07.06.07.1M4.46 12c-.13 0-.26-.08-.33-.2-.9-1.55-1.05-2.99-.43-4.06.84-1.44 2.88-1.98 5.61-1.49.19.04.35.25.31.45-.03.21-.23.35-.44.3C6.82 6.59 5 7 4.37 8.13c-.48.82-.33 1.98.43 3.28.1.19.04.42-.15.53-.06.03-.12.06-.19.06m7.75 1.4a.92.92 0 0 1-.4-1.8c.5-.1 1 .21 1.1.71.09.49-.21.98-.7 1.09Z"/></svg>
  
  <span class="md-ellipsis">
    CCCC Organization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code_design/mvcdb/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4Z"/></svg>
  
  <span class="md-ellipsis">
    M-V-C-DB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../code_design/standardization_framework/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 17c-.14 0-.26 0-.39.04L17.5 13.8c.45-.45.75-1.09.75-1.8a2.5 2.5 0 0 0-2.5-2.5c-.14 0-.25 0-.4.04L13.74 6.3c.47-.46.76-1.09.76-1.8a2.5 2.5 0 0 0-5 0c0 .7.29 1.34.76 1.79L8.65 9.54c-.15-.04-.26-.04-.4-.04a2.5 2.5 0 0 0-2.5 2.5c0 .71.29 1.34.75 1.79l-1.61 3.25C4.76 17 4.64 17 4.5 17a2.5 2.5 0 0 0 0 5A2.5 2.5 0 0 0 7 19.5c0-.7-.29-1.34-.76-1.79l1.62-3.25c.14.04.26.04.39.04s.25 0 .38-.04l1.63 3.25c-.47.45-.76 1.09-.76 1.79a2.5 2.5 0 0 0 5 0A2.5 2.5 0 0 0 12 17c-.13 0-.26 0-.39.04L10 13.8c.45-.45.75-1.09.75-1.8 0-.7-.29-1.33-.75-1.79l1.61-3.25c.13.04.26.04.39.04s.26 0 .39-.04L14 10.21a2.5 2.5 0 0 0 1.75 4.29c.13 0 .25 0 .38-.04l1.63 3.25c-.47.45-.76 1.09-.76 1.79a2.5 2.5 0 0 0 5 0 2.5 2.5 0 0 0-2.5-2.5m-15 3.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m8.5-1c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1M7.25 12c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1M11 4.5c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m3.75 7.5c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m4.75 8.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1Z"/></svg>
  
  <span class="md-ellipsis">
    Standardization Framework
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Code Documentation
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Code Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api_reference/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 12c2.5 0 4.5 2 4.5 4.5 0 .88-.25 1.71-.69 2.4l3.08 3.1L21 23.39l-3.12-3.07c-.69.43-1.51.68-2.38.68-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5m0 2a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h1v7l2.5-1.5L12 9V2h6a2 2 0 0 1 2 2v7.81A6.48 6.48 0 0 0 15.5 10 6.5 6.5 0 0 0 9 16.5c0 2.31 1.21 4.35 3.03 5.5H6Z"/></svg>
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.62 13.28 1.64 2.26c.03-.54.12-1.07.3-1.61.18-.56.44-1.07.74-1.52l-2.68.87M17.77 19c-.02-1.32.18-2.73.64-4.15.47-1.43 1.15-2.71 1.95-3.76l-2.04.66c-.78.51-1.45 1.39-1.82 2.48-.33 1.06-.32 2.13 0 2.99L17.77 19m1.48 2c-.5.46-1.04.86-1.62 1.2l-.32-.44C15.9 21 14.04 20.5 12 20.5c-2.04 0-3.9.5-5.31 1.26l-.32.44c-.58-.34-1.12-.74-1.62-1.2l.25-.31c.33-1.61.22-3.57-.42-5.55-.64-1.95-1.68-3.58-2.87-4.68l-.44-.14c.15-.66.36-1.32.62-1.91l.4.13c1.63-.17 3.45-.89 5.14-2.11 1.66-1.21 2.89-2.7 3.57-4.17v-.47l1-.04 1 .04v.42c.67 1.5 1.91 3.02 3.6 4.24 1.66 1.21 3.46 1.92 5.07 2.11l.44-.15c.26.59.47 1.25.62 1.91l-.5.18c-1.19 1.08-2.23 2.71-2.86 4.66-.63 1.93-.75 3.84-.45 5.41l.33.43M11 11.37V8.5c-.34.42-.74.82-1.22 1.17-.49.33-1.01.62-1.53.83l2.75.87m0-7.15c-.75 1.09-1.76 2.13-3 3.02-1.22.9-2.54 1.54-3.82 1.92l1.97.64c.96.08 2.07-.24 3.04-.94.94-.68 1.57-1.59 1.81-2.5V4.22m2 7.15 2.74-.87c-.51-.2-1.02-.47-1.49-.81-.49-.36-.91-.77-1.25-1.19v2.87m6.8-2.21c-1.27-.38-2.57-1.01-3.8-1.9-1.23-.9-2.24-1.95-3-3.06v2.07c.22.94.86 1.9 1.84 2.61.93.68 1.99.99 2.93.94l2.03-.66m-9.42 4.12-2.74-.89c.31.45.56.96.74 1.52.19.59.28 1.15.3 1.71l1.7-2.34m-6.8-2.21c.8 1.05 1.48 2.33 1.95 3.76.47 1.46.67 2.91.64 4.25l1.21-1.67c.38-.91.42-2.05.05-3.19-.36-1.1-1.03-1.98-1.82-2.49l-2.03-.66M12 14.45l-1.65 2.27a6.321 6.321 0 0 1 3.3 0L12 14.45m-4.16 5.73c1.24-.43 2.66-.68 4.16-.68s2.92.25 4.16.68l-1.28-1.76c-.72-.57-1.75-.92-2.88-.92s-2.16.35-2.88.92l-1.28 1.76Z"/></svg>
  
  <span class="md-ellipsis">
    Core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 8V5H5v3h4a3 3 0 0 0 3 3 3 3 0 0 0 3-3h4m0-5a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14M3 15h6a3 3 0 0 0 3 3 3 3 0 0 0 3-3h6v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4Z"/></svg>
  
  <span class="md-ellipsis">
    Context
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Context
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16h-2v-1H8v1H6v-1H2v5h20v-5h-4v1m2-8h-3V6c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v4h4v-2h2v2h8v-2h2v2h4v-4c0-1.1-.9-2-2-2m-5 0H9V6h6v2Z"/></svg>
  
  <span class="md-ellipsis">
    Toolbox
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16h-2v-1H8v1H6v-1H2v5h20v-5h-4v1m2-8h-3V6c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v4h4v-2h2v2h8v-2h2v2h4v-4c0-1.1-.9-2-2-2m-5 0H9V6h6v2Z"/></svg>
  
  <span class="md-ellipsis">
    Toolbox
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#humbldata.toolbox" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;toolbox
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" toolbox">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;toolbox_controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" toolbox_controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller.Toolbox" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Toolbox
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Toolbox">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller.Toolbox.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller.Toolbox.technical" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;technical
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;toolbox_helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" toolbox_helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.log_returns" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;log_returns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.detrend" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;detrend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.cum_sum" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;cum_sum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.std" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;std
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.mean" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;mean
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.range_" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;range_
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;fundamental
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.quantitative" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;quantitative
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;technical
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" technical">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.technical_controller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;technical_controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" technical_controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.technical_controller.Technical" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Technical
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Technical">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.technical_controller.Technical.mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;mandelbrot_channel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;mandelbrot_channel
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" mandelbrot_channel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.add_window_index" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;add_window_index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_buckets" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;vol_buckets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_filter" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;vol_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.price_range" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;price_range
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;model
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;calc_mandelbrot_channel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;volatility
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" volatility">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;realized_volatility_helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" realized_volatility_helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.std" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;std
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.parkinson" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;parkinson
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.garman_klass" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;garman_klass
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.hodges_tompkins" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;hodges_tompkins
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.rogers_satchell" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;rogers_satchell
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.yang_zhang" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;yang_zhang
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.squared_returns" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;squared_returns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_model" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;realized_volatility_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" realized_volatility_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_model.calc_realized_volatility" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;calc_realized_volatility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../category/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 3a2 2 0 0 0-2 2h2m2-2v2h2V3m2 0v2h2V3m2 0v2h2V3m2 0v2h2a2 2 0 0 0-2-2M3 7v2h2V7m2 0v4h4V7m2 0v4h4V7m2 0v2h2V7M3 11v2h2v-2m14 0v2h2v-2M7 13v4h4v-4m2 0v4h4v-4M3 15v2h2v-2m14 0v2h2v-2M3 19a2 2 0 0 0 2 2v-2m2 0v2h2v-2m2 0v2h2v-2m2 0v2h2v-2m2 0v2a2 2 0 0 0 2-2Z"/></svg>
  
  <span class="md-ellipsis">
    Category
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../command/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.6 5.29c-1.1-.1-2.07.71-2.17 1.82L13.18 10H16v2h-3l-.44 5.07a3.986 3.986 0 0 1-4.33 3.63 4.007 4.007 0 0 1-3.06-1.87l1.5-1.5c.24.74.9 1.31 1.73 1.38 1.1.1 2.07-.71 2.17-1.82L11 12H8v-2h3.17l.27-3.07c.19-2.2 2.13-3.83 4.33-3.63 1.31.11 2.41.84 3.06 1.87l-1.5 1.5c-.24-.74-.9-1.31-1.73-1.38Z"/></svg>
  
  <span class="md-ellipsis">
    Command
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 5a3.5 3.5 0 0 0-3.5 3.5A3.5 3.5 0 0 0 12 12a3.5 3.5 0 0 0 3.5-3.5A3.5 3.5 0 0 0 12 5m0 2a1.5 1.5 0 0 1 1.5 1.5A1.5 1.5 0 0 1 12 10a1.5 1.5 0 0 1-1.5-1.5A1.5 1.5 0 0 1 12 7M5.5 8A2.5 2.5 0 0 0 3 10.5c0 .94.53 1.75 1.29 2.18.36.2.77.32 1.21.32.44 0 .85-.12 1.21-.32.37-.21.68-.51.91-.87A5.42 5.42 0 0 1 6.5 8.5v-.28c-.3-.14-.64-.22-1-.22m13 0c-.36 0-.7.08-1 .22v.28c0 1.2-.39 2.36-1.12 3.31.12.19.25.34.4.49a2.482 2.482 0 0 0 1.72.7c.44 0 .85-.12 1.21-.32.76-.43 1.29-1.24 1.29-2.18A2.5 2.5 0 0 0 18.5 8M12 14c-2.34 0-7 1.17-7 3.5V19h14v-1.5c0-2.33-4.66-3.5-7-3.5m-7.29.55C2.78 14.78 0 15.76 0 17.5V19h3v-1.93c0-1.01.69-1.85 1.71-2.52m14.58 0c1.02.67 1.71 1.51 1.71 2.52V19h3v-1.5c0-1.74-2.78-2.72-4.71-2.95M12 16c1.53 0 3.24.5 4.23 1H7.77c.99-.5 2.7-1 4.23-1Z"/></svg>
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../roadmap/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.81 3.4-5.42.96.7 3.94L.733 9.95l.867 4.92 1.97-.34c.14.78.58 1.47 1.24 1.93.65.46 1.45.64 2.24.5.78-.14 1.48-.58 1.95-1.23.44-.66.62-1.46.5-2.23l5.89-1.06c.14.79.58 1.48 1.23 1.94.65.45 1.46.62 2.24.5.79-.14 1.48-.59 1.94-1.24.46-.64.64-1.46.5-2.24l1.97-.35-.52-2.95c-.2-1.1-1.25-1.82-2.32-1.6l-1.97.32-3.65-3.42m-3.68 2.18 3.45-.61 2.36 2.12-5.37.95-.44-2.46m-4.86 6.95A1.492 1.492 0 0 1 8 13.74c.07.4 0 .8-.25 1.12-.22.33-.57.55-.96.64-.4.05-.79-.04-1.12-.27a1.48 1.48 0 0 1-.62-.97c-.05-.39.02-.79.25-1.12.23-.32.57-.54.97-.61m11.81-2.09c.39-.07.8.02 1.12.25.33.23.55.58.62.97.07.39-.02.8-.25 1.12-.23.33-.57.55-.97.62-.39.07-.79-.02-1.1-.25-.34-.23-.57-.58-.63-.97-.07-.39.02-.79.24-1.12.23-.33.58-.56.97-.62M2.83 19.17 2 20v2h20v-6h-5.38c-1.07 0-2.12.17-3.16.5l-1.38.47C10.04 17.65 7.9 18 5.75 18h-.09c-1.06 0-2.08.42-2.83 1.17Z"/></svg>
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#humbldata.toolbox" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;toolbox
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" toolbox">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;toolbox_controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" toolbox_controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller.Toolbox" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Toolbox
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Toolbox">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller.Toolbox.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_controller.Toolbox.technical" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;technical
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;toolbox_helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" toolbox_helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.log_returns" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;log_returns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.detrend" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;detrend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.cum_sum" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;cum_sum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.std" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;std
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.mean" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;mean
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.toolbox_helpers.range_" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;range_
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.fundamental" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;fundamental
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.quantitative" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;quantitative
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;technical
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" technical">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.technical_controller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;technical_controller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" technical_controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.technical_controller.Technical" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Technical
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Technical">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.technical_controller.Technical.mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;mandelbrot_channel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;mandelbrot_channel
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" mandelbrot_channel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.add_window_index" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;add_window_index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_buckets" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;vol_buckets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_filter" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;vol_filter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.price_range" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;price_range
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;model
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;calc_mandelbrot_channel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;volatility
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" volatility">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;realized_volatility_helpers
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" realized_volatility_helpers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.std" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;std
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.parkinson" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;parkinson
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.garman_klass" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;garman_klass
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.hodges_tompkins" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;hodges_tompkins
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.rogers_satchell" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;rogers_satchell
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.yang_zhang" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;yang_zhang
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.squared_returns" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;squared_returns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_model" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;realized_volatility_model
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" realized_volatility_model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#humbldata.toolbox.technical.volatility.realized_volatility_model.calc_realized_volatility" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;calc_realized_volatility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="toolbox">🧰 <strong>Toolbox</strong><a class="headerlink" href="#toolbox" title="Permanent link">#</a></h1>


<div class="doc doc-object doc-module">



<h2 id="humbldata.toolbox" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">humbldata.toolbox</span>


<a href="#humbldata.toolbox" class="headerlink" title="Permanent link">#</a></h2>

  <div class="doc doc-contents first">
  
      <p><strong>Context: Toolbox</strong>.</p>
<p>A category to group all of the technical indicators available in the <code>Toolbox()</code></p>
<p>Technical indicators rely on statistical transformations of time series data.
These are raw math operations.</p>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h3 id="humbldata.toolbox.toolbox_controller" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">toolbox_controller</span>


<a href="#humbldata.toolbox.toolbox_controller" class="headerlink" title="Permanent link">#</a></h3>

  <div class="doc doc-contents ">
  
      <p><strong>Context: Toolbox</strong>.</p>
<p>The Toolbox Controller Module.</p>

  

  <div class="doc doc-children">















<div class="doc doc-object doc-class">



<h4 id="humbldata.toolbox.toolbox_controller.Toolbox" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">Toolbox</span>


<a href="#humbldata.toolbox.toolbox_controller.Toolbox" class="headerlink" title="Permanent link">#</a></h4>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.ToolboxQueryParams" href="../../core/#humbldata.core.standard_models.toolbox.ToolboxQueryParams">ToolboxQueryParams</a></code></p>

  
      <p>The top-level controller for all data analysis in the <code>humbldata</code> package.</p>
<p>This module serves as the primary controller, routing user-specified
ToolboxQueryParams as core arguments that are used to fetch time series
data.</p>
<p>The <code>Toolbox</code> controller also gives access to all sub-modules adn their
functions.</p>
<p>It is designed to facilitate the collection of data across various types such as
stocks, options, or alternative time series by requiring minimal input from the user.</p>

<details class="submodules" open>
  <summary>Submodules</summary>
  <p>The <code>Toolbox</code> controller is composed of the following submodules:</p>
<ul>
<li><code>technical</code>:</li>
<li><code>quantitative</code>:</li>
<li><code>fundamental</code>:</li>
</ul>
</details>


  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>symbol</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The symbol or ticker of the stock.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>interval</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The interval of the data. Defaults to '1d'.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>start_date</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The start date for the data query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>end_date</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The end date for the data query.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

<details class="parameter-notes" open>
  <summary>Parameter Notes</summary>
  <p>The Parameters (<code>symbol</code>, <code>interval</code>, <code>start_date</code>, <code>end_date</code>)
are the <code>ToolboxQueryParams</code>. They are used for data collection further
down the pipeline. to execute operations on core data sets.
This approach enables composable and standardized querying while
accommodating data-specific collection logic.</p>
</details>
            <details class="quote">
              <summary>Source code in <code>src\humbldata\toolbox\toolbox_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Toolbox</span><span class="p">(</span><span class="n">ToolboxQueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    The top-level controller for all data analysis in the `humbldata` package.</span>

<span class="sd">    This module serves as the primary controller, routing user-specified</span>
<span class="sd">    ToolboxQueryParams as core arguments that are used to fetch time series</span>
<span class="sd">    data.</span>

<span class="sd">    The `Toolbox` controller also gives access to all sub-modules adn their</span>
<span class="sd">    functions.</span>

<span class="sd">    It is designed to facilitate the collection of data across various types such as</span>
<span class="sd">    stocks, options, or alternative time series by requiring minimal input from the user.</span>

<span class="sd">    Submodules</span>
<span class="sd">    ----------</span>
<span class="sd">    The `Toolbox` controller is composed of the following submodules:</span>

<span class="sd">    - `technical`:</span>
<span class="sd">    - `quantitative`:</span>
<span class="sd">    - `fundamental`:</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbol : str</span>
<span class="sd">        The symbol or ticker of the stock.</span>
<span class="sd">    interval : str, optional</span>
<span class="sd">        The interval of the data. Defaults to &#39;1d&#39;.</span>
<span class="sd">    start_date : str</span>
<span class="sd">        The start date for the data query.</span>
<span class="sd">    end_date : str</span>
<span class="sd">        The end date for the data query.</span>

<span class="sd">    Parameter Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The Parameters (`symbol`, `interval`, `start_date`, `end_date`)</span>
<span class="sd">    are the `ToolboxQueryParams`. They are used for data collection further</span>
<span class="sd">    down the pipeline. to execute operations on core data sets.</span>
<span class="sd">    This approach enables composable and standardized querying while</span>
<span class="sd">    accommodating data-specific collection logic.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the Toolbox module.</span>

<span class="sd">        This method does not take any parameters and does not return anything.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">technical</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The technical submodule of the Toolbox controller.</span>

<span class="sd">        Access to all the technical indicators.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Technical</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h5 id="humbldata.toolbox.toolbox_controller.Toolbox.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">__init__</span>


<a href="#humbldata.toolbox.toolbox_controller.Toolbox.__init__" class="headerlink" title="Permanent link">#</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Initialize the Toolbox module.</p>
<p>This method does not take any parameters and does not return anything.</p>

          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\toolbox_controller.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the Toolbox module.</span>

<span class="sd">    This method does not take any parameters and does not return anything.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>






<div class="doc doc-object doc-attribute">



<h5 id="humbldata.toolbox.toolbox_controller.Toolbox.technical" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>          <span class="doc doc-object-name doc-attribute-name">technical</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#humbldata.toolbox.toolbox_controller.Toolbox.technical" class="headerlink" title="Permanent link">#</a></h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">technical</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>The technical submodule of the Toolbox controller.</p>
<p>Access to all the technical indicators.</p>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h3 id="humbldata.toolbox.toolbox_helpers" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">toolbox_helpers</span>


<a href="#humbldata.toolbox.toolbox_helpers" class="headerlink" title="Permanent link">#</a></h3>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || <strong>Category: Helpers</strong>.</p>
<p>These <code>Toolbox()</code> helpers are used in various calculations in the toolbox
context. Most of the helpers will be mathematical transformations of data. These
functions should be <strong>DUMB</strong> functions.</p>

  

  <div class="doc doc-children">












<div class="doc doc-object doc-function">



<h4 id="humbldata.toolbox.toolbox_helpers.log_returns" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">log_returns</span>


<a href="#humbldata.toolbox.toolbox_helpers.log_returns" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">log_returns</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.Series">Series</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_column_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;adj_close&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.Series">Series</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Helpers || <strong>Command: log_returns</strong>.</p>
<p>This is a DUMB command. It can be used in any CONTEXT or CATEGORY.
Calculates the logarithmic returns for a given Polars Series, DataFrame, or
LazyFrame. Logarithmic returns are widely used in the financial
industry to measure the rate of return on investments over time. This
function supports calculations on both individual series and dataframes
containing financial time series data.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="polars.Series">Series</span> | <span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data for which to calculate the log returns. Default is None.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>_drop_nulls</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to drop null values from the result. Default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The column name to use for log return calculations in DataFrame or
LazyFrame. Default is "adj_close".</p>
            </div>
          </td>
          <td>
                <code>&#39;adj_close&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_sort</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, sorts the DataFrame or LazyFrame by <code>date</code> and <code>symbol</code> before
calculation. If you want a DUMB function, set to False.
Default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="polars.Series">Series</span> | <span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The original <code>data</code>, with an extra column of <code>log returns</code> of the input
data. The return type matches the input type.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.abstract.errors.HumblDataError" href="../../core/#humbldata.core.standard_models.abstract.errors.HumblDataError">HumblDataError</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If neither a series, DataFrame, nor LazyFrame is provided as input.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">series</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">103</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log_returns</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">series</span><span class="p">)</span>
<span class="go">series([-inf, 0.048790, -0.019418])</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;adj_close&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">103</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log_returns</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
<span class="go">shape: (3, 2)</span>
<span class="go">┌───────────┬────────────┐</span>
<span class="go">│ adj_close ┆ log_returns│</span>
<span class="go">│ ---       ┆ ---        │</span>
<span class="go">│ f64       ┆ f64        │</span>
<span class="go">╞═══════════╪════════════╡</span>
<span class="go">│ 100.0     ┆ NaN        │</span>
<span class="go">├───────────┼────────────┤</span>
<span class="go">│ 105.0     ┆ 0.048790   │</span>
<span class="go">├───────────┼────────────┤</span>
<span class="go">│ 103.0     ┆ -0.019418  │</span>
<span class="go">└───────────┴────────────┘</span>
</code></pre></div>

<details class="improvements" open>
  <summary>Improvements</summary>
  <p>Add a parameter <code>_sort_cols: list[str] | None = None</code> to make the function even
dumber. This way you could specify certain columns to sort by instead of
using default <code>date</code> and <code>symbol</code>. If <code>_sort_cols=None</code> and <code>_sort=True</code>,
then the function will use the default <code>date</code> and <code>symbol</code> columns for
sorting.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\toolbox_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">log_returns</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;adj_close&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Helpers || **Command: log_returns**.</span>

<span class="sd">    This is a DUMB command. It can be used in any CONTEXT or CATEGORY.</span>
<span class="sd">    Calculates the logarithmic returns for a given Polars Series, DataFrame, or</span>
<span class="sd">    LazyFrame. Logarithmic returns are widely used in the financial</span>
<span class="sd">    industry to measure the rate of return on investments over time. This</span>
<span class="sd">    function supports calculations on both individual series and dataframes</span>
<span class="sd">    containing financial time series data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.Series | pl.DataFrame | pl.LazyFrame, optional</span>
<span class="sd">        The input data for which to calculate the log returns. Default is None.</span>
<span class="sd">    _drop_nulls : bool, optional</span>
<span class="sd">        Whether to drop null values from the result. Default is True.</span>
<span class="sd">    _column_name : str, optional</span>
<span class="sd">        The column name to use for log return calculations in DataFrame or</span>
<span class="sd">        LazyFrame. Default is &quot;adj_close&quot;.</span>
<span class="sd">    _sort : bool, optional</span>
<span class="sd">        If True, sorts the DataFrame or LazyFrame by `date` and `symbol` before</span>
<span class="sd">        calculation. If you want a DUMB function, set to False.</span>
<span class="sd">        Default is True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.Series | pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The original `data`, with an extra column of `log returns` of the input</span>
<span class="sd">        data. The return type matches the input type.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    HumblDataError</span>
<span class="sd">        If neither a series, DataFrame, nor LazyFrame is provided as input.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; series = pl.Series([100, 105, 103])</span>
<span class="sd">    &gt;&gt;&gt; log_returns(data=series)</span>
<span class="sd">    series([-inf, 0.048790, -0.019418])</span>

<span class="sd">    &gt;&gt;&gt; df = pl.DataFrame({&quot;adj_close&quot;: [100, 105, 103]})</span>
<span class="sd">    &gt;&gt;&gt; log_returns(data=df)</span>
<span class="sd">    shape: (3, 2)</span>
<span class="sd">    ┌───────────┬────────────┐</span>
<span class="sd">    │ adj_close ┆ log_returns│</span>
<span class="sd">    │ ---       ┆ ---        │</span>
<span class="sd">    │ f64       ┆ f64        │</span>
<span class="sd">    ╞═══════════╪════════════╡</span>
<span class="sd">    │ 100.0     ┆ NaN        │</span>
<span class="sd">    ├───────────┼────────────┤</span>
<span class="sd">    │ 105.0     ┆ 0.048790   │</span>
<span class="sd">    ├───────────┼────────────┤</span>
<span class="sd">    │ 103.0     ┆ -0.019418  │</span>
<span class="sd">    └───────────┴────────────┘</span>

<span class="sd">    Improvements</span>
<span class="sd">    -----------</span>
<span class="sd">    Add a parameter `_sort_cols: list[str] | None = None` to make the function even</span>
<span class="sd">    dumber. This way you could specify certain columns to sort by instead of</span>
<span class="sd">    using default `date` and `symbol`. If `_sort_cols=None` and `_sort=True`,</span>
<span class="sd">    then the function will use the default `date` and `symbol` columns for</span>
<span class="sd">    sorting.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Calculation for Polars Series</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">log</span><span class="p">()</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">()</span>
    <span class="c1"># Calculation for Polars DataFrame or LazyFrame</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Data must contain &#39;symbol&#39; and &#39;date&#39; columns for sorting.&quot;</span>
            <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;log_returns&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">log</span><span class="p">()</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_returns&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="s2">&quot;log_returns&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No valid data type was provided for `log_returns()` calculation.&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h4 id="humbldata.toolbox.toolbox_helpers.detrend" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">detrend</span>


<a href="#humbldata.toolbox.toolbox_helpers.detrend" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">detrend</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">_detrend_col</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;log_returns&#39;</span><span class="p">,</span> <span class="n">_detrend_value_col</span><span class="p">:</span> <span class="n">str</span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;window_mean&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <pre><code>Context: Toolbox || Category: Helpers || **Command: detrend**.

This is a DUMB command. It can be used in any CONTEXT or CATEGORY.

Detrends a column in a DataFrame, LazyFrame, or Series by subtracting the
values of another column from it. Optionally sorts the data by 'symbol' and
'date' before detrending if _sort is True.
</code></pre>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>    Union[pl.DataFrame, pl.LazyFrame, pl.Series]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The detrended data structure with the same type as the input,
with an added column named <code>f"detrended_{_detrend_col}"</code>.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>Function doesn't use <code>.over()</code> in calculation. Once the data is sorted,
subtracting _detrend_value_col from _detrend_col is a simple operation
that doesn't need to be grouped, because the sorting has already aligned
the rows for subtraction</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\toolbox_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">detrend</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">_detrend_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log_returns&quot;</span><span class="p">,</span>
    <span class="n">_detrend_value_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;window_mean&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Context: Toolbox || Category: Helpers || **Command: detrend**.</span>

<span class="sd">        This is a DUMB command. It can be used in any CONTEXT or CATEGORY.</span>

<span class="sd">        Detrends a column in a DataFrame, LazyFrame, or Series by subtracting the</span>
<span class="sd">        values of another column from it. Optionally sorts the data by &#39;symbol&#39; and</span>
<span class="sd">        &#39;date&#39; before detrending if _sort is True.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">        data : Union[pl.DataFrame, pl.LazyFrame, pl.Series]</span>
<span class="sd">            The data structure containing the columns to be processed.</span>
<span class="sd">        _detrend_col : str</span>
<span class="sd">            The name of the column from which values will be subtracted.</span>
<span class="sd">        _detrend_value_col : str | pl.Series | None, optional</span>
<span class="sd">            The name of the column whose values will be subtracted OR if you pass a</span>
<span class="sd">            pl.Series to the `data` parameter, then you can use this to pass a</span>
<span class="sd">            second `pl.Series` to</span>
<span class="sd">            subtract from the first.</span>
<span class="sd">        _sort : bool, optional</span>
<span class="sd">            If True, sorts the data by &#39;symbol&#39; and &#39;date&#39; before detrending.</span>
<span class="sd">            Default is False.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">        Union[pl.DataFrame, pl.LazyFrame, pl.Series]</span>
<span class="sd">            The detrended data structure with the same type as the input,</span>
<span class="sd">            with an added column named `f&quot;detrended_{_detrend_col}&quot;`.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Function doesn&#39;t use `.over()` in calculation. Once the data is sorted,</span>
<span class="sd">    subtracting _detrend_value_col from _detrend_col is a simple operation</span>
<span class="sd">    that doesn&#39;t need to be grouped, because the sorting has already aligned</span>
<span class="sd">    the rows for subtraction</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Data must contain &#39;symbol&#39; and &#39;date&#39; columns for sorting.&quot;</span>
            <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">_detrend_value_col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span>
            <span class="ow">or</span> <span class="n">_detrend_col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span>
        <span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Both </span><span class="si">{</span><span class="n">_detrend_value_col</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">_detrend_col</span><span class="si">}</span><span class="s2"> must be columns in the data.&quot;</span>
            <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">detrended</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_detrend_col</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_detrend_value_col</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;detrended_</span><span class="si">{</span><span class="n">_detrend_col</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_detrend_value_col</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;When &#39;data&#39; is a Series, &#39;_detrend_value_col&#39; must also be a Series.&quot;</span>
            <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">detrended</span> <span class="o">=</span> <span class="n">data</span> <span class="o">-</span> <span class="n">_detrend_value_col</span>
        <span class="n">detrended</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;detrended_</span><span class="si">{</span><span class="n">_detrend_col</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">detrended</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h4 id="humbldata.toolbox.toolbox_helpers.cum_sum" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">cum_sum</span>


<a href="#humbldata.toolbox.toolbox_helpers.cum_sum" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">cum_sum</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_column_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;detrended_returns&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_mandelbrot_usage</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Helpers || <strong>Command: cum_sum</strong>.</p>
<p>This is a DUMB command. It can be used in any CONTEXT or CATEGORY.</p>
<p>Calculate the cumulative sum of a series or column in a DataFrame or
LazyFrame.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.Series">Series</span> | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The data to process.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column to calculate the cumulative sum on,
applicable if df is provided.</p>
            </div>
          </td>
          <td>
                <code>&#39;detrended_returns&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_sort</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, sorts the DataFrame or LazyFrame by date and symbol before
calculation. Default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>_mandelbrot_usage</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, performs additional checks specific to the Mandelbrot Channel
calculation. This should be set to True when you have a cumulative
deviate series, and False when not. Please check 'Notes' for more
information. Default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.Series">Series</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The DataFrame or Series with the cumulative deviate series added as a
new column or as itself.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>This function is used to calculate the cumulative sum for the deviate series
of detrended returns for the data in the pipeline for
<code>calc_mandelbrot_channel</code>.</p>
<p>So, although it is calculating a cumulative sum, it is known as a cumulative
deviate because it is a cumulative sum on a deviate series, meaning that the
cumulative sum should = 0 for each window. The _mandelbrot_usage parameter
allows for checks to ensure the data is suitable for Mandelbrot Channel
calculations, i.e that the deviate series was calculated correctly by the
end of each series being 0, meaning the trend (the mean over the
window_index) was successfully removed from the data.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\toolbox_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">cum_sum</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;detrended_returns&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_mandelbrot_usage</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Helpers || **Command: cum_sum**.</span>

<span class="sd">    This is a DUMB command. It can be used in any CONTEXT or CATEGORY.</span>

<span class="sd">    Calculate the cumulative sum of a series or column in a DataFrame or</span>
<span class="sd">    LazyFrame.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame | pl.Series | None</span>
<span class="sd">        The data to process.</span>
<span class="sd">    _column_name : str</span>
<span class="sd">        The name of the column to calculate the cumulative sum on,</span>
<span class="sd">        applicable if df is provided.</span>
<span class="sd">    _sort : bool, optional</span>
<span class="sd">        If True, sorts the DataFrame or LazyFrame by date and symbol before</span>
<span class="sd">        calculation. Default is True.</span>
<span class="sd">    _mandelbrot_usage : bool, optional</span>
<span class="sd">        If True, performs additional checks specific to the Mandelbrot Channel</span>
<span class="sd">        calculation. This should be set to True when you have a cumulative</span>
<span class="sd">        deviate series, and False when not. Please check &#39;Notes&#39; for more</span>
<span class="sd">        information. Default is True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame | pl.LazyFrame | pl.Series</span>
<span class="sd">        The DataFrame or Series with the cumulative deviate series added as a</span>
<span class="sd">        new column or as itself.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function is used to calculate the cumulative sum for the deviate series</span>
<span class="sd">    of detrended returns for the data in the pipeline for</span>
<span class="sd">    `calc_mandelbrot_channel`.</span>

<span class="sd">    So, although it is calculating a cumulative sum, it is known as a cumulative</span>
<span class="sd">    deviate because it is a cumulative sum on a deviate series, meaning that the</span>
<span class="sd">    cumulative sum should = 0 for each window. The _mandelbrot_usage parameter</span>
<span class="sd">    allows for checks to ensure the data is suitable for Mandelbrot Channel</span>
<span class="sd">    calculations, i.e that the deviate series was calculated correctly by the</span>
<span class="sd">    end of each series being 0, meaning the trend (the mean over the</span>
<span class="sd">    window_index) was successfully removed from the data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_sort</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>

        <span class="n">over_cols</span> <span class="o">=</span> <span class="n">_set_over_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;window_index&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">over_cols</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">cum_sum</span><span class="p">()</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="n">over_cols</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;cum_sum&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">cum_sum</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;cum_sum&quot;</span><span class="p">)</span>
            <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">cum_sum</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;cum_sum&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No DataFrame/LazyFrame/Series was provided.&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">_mandelbrot_usage</span><span class="p">:</span>
        <span class="n">_cumsum_check</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">_column_name</span><span class="o">=</span><span class="s2">&quot;cum_sum&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h4 id="humbldata.toolbox.toolbox_helpers.std" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">std</span>


<a href="#humbldata.toolbox.toolbox_helpers.std" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">std</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">_column_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;cum_sum&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Helpers || <strong>Command: std</strong>.</p>
<p>Calculate the standard deviation of the cumulative deviate series within
each window of the dataset.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>df</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The LazyFrame from which to calculate the standard deviation.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>_column_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column from which to calculate the standard deviation,
with "cumdev" as the default value.</p>
            </div>
          </td>
          <td>
                <code>&#39;cum_sum&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A LazyFrame with the standard deviation of the specified column for each
window, added as a new column named "S".</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="improvements" open>
  <summary>Improvements</summary>
  <p>Just need to parametrize <code>.over()</code> call in the function if want an even
dumber function, that doesn't calculate each <code>window_index</code>.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\toolbox_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">std</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cum_sum&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Helpers || **Command: std**.</span>

<span class="sd">    Calculate the standard deviation of the cumulative deviate series within</span>
<span class="sd">    each window of the dataset.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    df : pl.LazyFrame</span>
<span class="sd">        The LazyFrame from which to calculate the standard deviation.</span>
<span class="sd">    _column_name : str, optional</span>
<span class="sd">        The name of the column from which to calculate the standard deviation,</span>
<span class="sd">        with &quot;cumdev&quot; as the default value.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame</span>
<span class="sd">        A LazyFrame with the standard deviation of the specified column for each</span>
<span class="sd">        window, added as a new column named &quot;S&quot;.</span>

<span class="sd">    Improvements</span>
<span class="sd">    -----------</span>
<span class="sd">    Just need to parametrize `.over()` call in the function if want an even</span>
<span class="sd">    dumber function, that doesn&#39;t calculate each `window_index`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="n">over_cols</span> <span class="o">=</span> <span class="n">_set_over_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;window_index&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">over_cols</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">std</span><span class="p">()</span>
                    <span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="n">over_cols</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_std&quot;</span><span class="p">),</span>  <span class="c1"># used to be &#39;S&#39;</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">std</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">),</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h4 id="humbldata.toolbox.toolbox_helpers.mean" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">mean</span>


<a href="#humbldata.toolbox.toolbox_helpers.mean" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">mean</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">_column_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;log_returns&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Helpers || <strong>Function: mean</strong>.</p>
<p>This is a DUMB command. It can be used in any CONTEXT or CATEGORY.</p>
<p>This function calculates the mean of a column (&lt;_column_name&gt;) over a
each window in the dataset, if there are any.
This window is intended to be the <code>window</code> that is passed in the
<code>calc_mandelbrot_channel()</code> function. The mean calculated is meant to be
used as the mean of each <code>window</code> within the time series. This
way, each block of windows has their own mean, which can then be used to
normalize the data (i.e remove the mean) from each window section.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The DataFrame or LazyFrame to calculate the mean on.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>_column_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column to calculate the mean on.</p>
            </div>
          </td>
          <td>
                <code>&#39;log_returns&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_sort</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, sorts the DataFrame or LazyFrame by date before calculation.
Default is False.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The original DataFrame or LazyFrame with a <code>window_mean</code> &amp; <code>date</code> column,
which contains the mean of 'log_returns' per range/window.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>Since this function is an aggregation function, it reduces the # of
observations in the dataset,thus, unless I take each value and iterate each
window_mean value to correlate to the row in the original dataframe, the
function will return a dataframe WITHOUT the original data.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\toolbox_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mean</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log_returns&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Helpers || **Function: mean**.</span>

<span class="sd">    This is a DUMB command. It can be used in any CONTEXT or CATEGORY.</span>

<span class="sd">    This function calculates the mean of a column (&lt;_column_name&gt;) over a</span>
<span class="sd">    each window in the dataset, if there are any.</span>
<span class="sd">    This window is intended to be the `window` that is passed in the</span>
<span class="sd">    `calc_mandelbrot_channel()` function. The mean calculated is meant to be</span>
<span class="sd">    used as the mean of each `window` within the time series. This</span>
<span class="sd">    way, each block of windows has their own mean, which can then be used to</span>
<span class="sd">    normalize the data (i.e remove the mean) from each window section.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The DataFrame or LazyFrame to calculate the mean on.</span>
<span class="sd">    _column_name : str</span>
<span class="sd">        The name of the column to calculate the mean on.</span>
<span class="sd">    _sort : bool</span>
<span class="sd">        If True, sorts the DataFrame or LazyFrame by date before calculation.</span>
<span class="sd">        Default is False.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The original DataFrame or LazyFrame with a `window_mean` &amp; `date` column,</span>
<span class="sd">        which contains the mean of &#39;log_returns&#39; per range/window.</span>


<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Since this function is an aggregation function, it reduces the # of</span>
<span class="sd">    observations in the dataset,thus, unless I take each value and iterate each</span>
<span class="sd">    window_mean value to correlate to the row in the original dataframe, the</span>
<span class="sd">    function will return a dataframe WITHOUT the original data.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No DataFrame was passed to the `mean()` function.&quot;</span>
            <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="n">over_cols</span> <span class="o">=</span> <span class="n">_set_over_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;window_index&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_sort</span> <span class="ow">and</span> <span class="n">sort_cols</span><span class="p">:</span>  <span class="c1"># Check if _sort is True</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">over_cols</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="n">over_cols</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;window_mean&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">sort_cols</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h4 id="humbldata.toolbox.toolbox_helpers.range_" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">range_</span>


<a href="#humbldata.toolbox.toolbox_helpers.range_" class="headerlink" title="Permanent link">#</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">range_</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">_column_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;cum_sum&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: MandelBrot Channel || Sub-Category: Helpers || <strong>Function: mandelbrot_range</strong>.</p>
<p>Calculate the range (max - min) of the cumulative deviate values of a
specified column in a DataFrame for each window in the dataset, if there are any.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The DataFrame to calculate the range from.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>_column_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The column to calculate the range from, by default "cumdev".</p>
            </div>
          </td>
          <td>
                <code>&#39;cum_sum&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A DataFrame with the range of the specified column for each window.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\toolbox_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">range_</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">_column_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cum_sum&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Sub-Category: MandelBrot Channel || Sub-Category: Helpers || **Function: mandelbrot_range**.</span>

<span class="sd">    Calculate the range (max - min) of the cumulative deviate values of a</span>
<span class="sd">    specified column in a DataFrame for each window in the dataset, if there are any.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.LazyFrame</span>
<span class="sd">        The DataFrame to calculate the range from.</span>
<span class="sd">    _column_name : str, optional</span>
<span class="sd">        The column to calculate the range from, by default &quot;cumdev&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame | pl.DataFrame</span>
<span class="sd">        A DataFrame with the range of the specified column for each window.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">data</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
    <span class="n">over_cols</span> <span class="o">=</span> <span class="n">_set_over_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;window_index&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_sort</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">over_cols</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">data</span><span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
            <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="n">over_cols</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_min&quot;</span><span class="p">),</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">max</span><span class="p">()</span>
                    <span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="n">over_cols</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_max&quot;</span><span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
            <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_max&quot;</span><span class="p">)</span>
                    <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_min&quot;</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_range&quot;</span><span class="p">),</span>  <span class="c1"># used to be &#39;R&#39;</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_min&quot;</span><span class="p">),</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_max&quot;</span><span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
            <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_max&quot;</span><span class="p">)</span>
                    <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_min&quot;</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">_column_name</span><span class="si">}</span><span class="s2">_range&quot;</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h3 id="humbldata.toolbox.fundamental" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">fundamental</span>


<a href="#humbldata.toolbox.fundamental" class="headerlink" title="Permanent link">#</a></h3>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || <strong>Category: Fundamental</strong>.</p>
<p>A category to group all of the fundamental indicators available in the
<code>Toolbox()</code>.</p>
<p>Fundamental indicators relies on earnings data, valuation models of companies,
balance sheet metrics etc...</p>

  </div>

</div>






<div class="doc doc-object doc-module">



<h3 id="humbldata.toolbox.quantitative" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">quantitative</span>


<a href="#humbldata.toolbox.quantitative" class="headerlink" title="Permanent link">#</a></h3>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Quantitative.</p>
<p>Quantitative indicators rely on statistical transformations of time series data.</p>

  </div>

</div>






<div class="doc doc-object doc-module">



<h3 id="humbldata.toolbox.technical" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">technical</span>


<a href="#humbldata.toolbox.technical" class="headerlink" title="Permanent link">#</a></h3>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h4 id="humbldata.toolbox.technical.technical_controller" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">technical_controller</span>


<a href="#humbldata.toolbox.technical.technical_controller" class="headerlink" title="Permanent link">#</a></h4>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || <strong>Category: Technical</strong>.</p>
<p>A controller to manage and compile all of the technical indicator models
available. This will be passed as a <code>@property</code> to the <code>Toolbox()</code> class, giving
access to the technical module and its functions.</p>

  

  <div class="doc doc-children">











<div class="doc doc-object doc-class">



<h5 id="humbldata.toolbox.technical.technical_controller.Technical" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>          <span class="doc doc-object-name doc-class-name">Technical</span>


<a href="#humbldata.toolbox.technical.technical_controller.Technical" class="headerlink" title="Permanent link">#</a></h5>


  <div class="doc doc-contents ">

  
      <p>Module for all technical analysis.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code><span title="humbldata.toolbox.technical.technical_controller.Technical.standard_params">standard_params</span></code></td>
          <td>
                <code>ToolboxQueryParams</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The standard query parameters for toolbox data.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Methods:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
          <tr>
            <td><code><a class="autorefs autorefs-internal" title="humbldata.toolbox.technical.technical_controller.Technical.mandelbrot_channel" href="#humbldata.toolbox.technical.technical_controller.Technical.mandelbrot_channel">mandelbrot_channel</a></code></td>
            <td>
              <div class="doc-md-description">
                <p>Calculate the rescaled range statistics.</p>
              </div>
            </td>
          </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>src\humbldata\toolbox\technical\technical_controller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Technical</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Module for all technical analysis.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    standard_params : ToolboxQueryParams</span>
<span class="sd">        The standard query parameters for toolbox data.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    mandelbrot_channel(command_params: MandelbrotChannelQueryParams)</span>
<span class="sd">        Calculate the rescaled range statistics.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context_params</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_context_params</span> <span class="o">=</span> <span class="n">context_params</span>

    <span class="k">def</span> <span class="nf">mandelbrot_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command_params</span><span class="p">:</span> <span class="n">MandelbrotChannelQueryParams</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the rescaled range statistics.</span>

<span class="sd">        Explain the math...</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">humbldata.core.standard_models.toolbox.technical.mandelbrotchannel</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">MandelbrotChannelFetcher</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Instantiate the Fetcher with the query parameters</span>
        <span class="n">fetcher</span> <span class="o">=</span> <span class="n">MandelbrotChannelFetcher</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_context_params</span><span class="p">,</span> <span class="n">command_params</span><span class="p">)</span>

        <span class="c1"># Use the fetcher to get the data</span>
        <span class="k">return</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.technical_controller.Technical.mandelbrot_channel" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>          <span class="doc doc-object-name doc-function-name">mandelbrot_channel</span>


<a href="#humbldata.toolbox.technical.technical_controller.Technical.mandelbrot_channel" class="headerlink" title="Permanent link">#</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">mandelbrot_channel</span><span class="p">(</span><span class="n">command_params</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="humbldata.core.standard_models.toolbox.technical.mandelbrotchannel.MandelbrotChannelQueryParams" href="../../core/#humbldata.core.standard_models.toolbox.technical.mandelbrotchannel.MandelbrotChannelQueryParams">MandelbrotChannelQueryParams</a></span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Calculate the rescaled range statistics.</p>
<p>Explain the math...</p>

          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\technical\technical_controller.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mandelbrot_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command_params</span><span class="p">:</span> <span class="n">MandelbrotChannelQueryParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the rescaled range statistics.</span>

<span class="sd">    Explain the math...</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">humbldata.core.standard_models.toolbox.technical.mandelbrotchannel</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">MandelbrotChannelFetcher</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Instantiate the Fetcher with the query parameters</span>
    <span class="n">fetcher</span> <span class="o">=</span> <span class="n">MandelbrotChannelFetcher</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_context_params</span><span class="p">,</span> <span class="n">command_params</span><span class="p">)</span>

    <span class="c1"># Use the fetcher to get the data</span>
    <span class="k">return</span> <span class="n">fetcher</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>


</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="humbldata.toolbox.technical.mandelbrot_channel" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">mandelbrot_channel</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel" class="headerlink" title="Permanent link">#</a></h4>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h5 id="humbldata.toolbox.technical.mandelbrot_channel.helpers" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">helpers</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers" class="headerlink" title="Permanent link">#</a></h5>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: MandelBrot Channel || <strong>Sub-Category: Helpers</strong>.</p>
<p>These <code>Toolbox()</code> helpers are used in various calculations in the toolbox
context. Most of the helpers will be mathematical transformations of data. These
functions should be <strong>DUMB</strong> functions.</p>

  

  <div class="doc doc-children">












<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.helpers.add_window_index" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">add_window_index</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.add_window_index" class="headerlink" title="Permanent link">#</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">add_window_index</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <pre><code>Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: **add_window_index**.
</code></pre>
<p>Add a column to the dataframe indicating the window grouping for each row in
a time series.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data frame or lazy frame to which the window index will be
added.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The window size as a string, used to determine the grouping of rows into
windows.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The original data frame or lazy frame with an additional column named
"window_index" indicating
the window grouping for each row.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <ul>
<li>This function is essential for calculating the Mandelbrot Channel, where
the dataset is split into
numerous 'windows', and statistics are calculated for each window.</li>
<li>The function adds a dummy <code>symbol</code> column if the data contains only one
symbol, to avoid errors in the <code>group_by_dynamic()</code> function.</li>
<li>It is utilized within the <code>log_mean()</code> function for window-based
calculations.</li>
</ul>
</details>


<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;2021-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2021-01-02&quot;</span><span class="p">],</span> <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;AAPL&quot;</span><span class="p">,</span> <span class="s2">&quot;AAPL&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">window</span> <span class="o">=</span> <span class="s2">&quot;1d&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_window_index</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">window</span><span class="p">)</span>
<span class="go">shape: (2, 4)</span>
<span class="go">┌────────────┬────────┬───────┬──────────────┐</span>
<span class="go">│ date       ┆ symbol ┆ value ┆ window_index │</span>
<span class="go">│ ---        ┆ ---    ┆ ---   ┆ ---          │</span>
<span class="go">│ date       ┆ str    ┆ i64   ┆ i64          │</span>
<span class="go">╞════════════╪════════╪═══════╪══════════════╡</span>
<span class="go">│ 2021-01-01 ┆ AAPL   ┆ 1     ┆ 0            │</span>
<span class="go">├────────────┼────────┼───────┼──────────────┤</span>
<span class="go">│ 2021-01-02 ┆ AAPL   ┆ 2     ┆ 1            │</span>
<span class="go">└────────────┴────────┴───────┴──────────────┘</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\technical\mandelbrot_channel\helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_window_index</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: **add_window_index**.</span>

<span class="sd">    Add a column to the dataframe indicating the window grouping for each row in</span>
<span class="sd">    a time series.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.LazyFrame | pl.DataFrame</span>
<span class="sd">        The input data frame or lazy frame to which the window index will be</span>
<span class="sd">        added.</span>
<span class="sd">    window : str</span>
<span class="sd">        The window size as a string, used to determine the grouping of rows into</span>
<span class="sd">        windows.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.LazyFrame | pl.DataFrame</span>
<span class="sd">        The original data frame or lazy frame with an additional column named</span>
<span class="sd">        &quot;window_index&quot; indicating</span>
<span class="sd">        the window grouping for each row.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    - This function is essential for calculating the Mandelbrot Channel, where</span>
<span class="sd">    the dataset is split into</span>
<span class="sd">    numerous &#39;windows&#39;, and statistics are calculated for each window.</span>
<span class="sd">    - The function adds a dummy `symbol` column if the data contains only one</span>
<span class="sd">    symbol, to avoid errors in the `group_by_dynamic()` function.</span>
<span class="sd">    - It is utilized within the `log_mean()` function for window-based</span>
<span class="sd">    calculations.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; data = pl.DataFrame({&quot;date&quot;: [&quot;2021-01-01&quot;, &quot;2021-01-02&quot;], &quot;symbol&quot;: [&quot;AAPL&quot;, &quot;AAPL&quot;], &quot;value&quot;: [1, 2]})</span>
<span class="sd">    &gt;&gt;&gt; window = &quot;1d&quot;</span>
<span class="sd">    &gt;&gt;&gt; add_window_index(data, window)</span>
<span class="sd">    shape: (2, 4)</span>
<span class="sd">    ┌────────────┬────────┬───────┬──────────────┐</span>
<span class="sd">    │ date       ┆ symbol ┆ value ┆ window_index │</span>
<span class="sd">    │ ---        ┆ ---    ┆ ---   ┆ ---          │</span>
<span class="sd">    │ date       ┆ str    ┆ i64   ┆ i64          │</span>
<span class="sd">    ╞════════════╪════════╪═══════╪══════════════╡</span>
<span class="sd">    │ 2021-01-01 ┆ AAPL   ┆ 1     ┆ 0            │</span>
<span class="sd">    ├────────────┼────────┼───────┼──────────────┤</span>
<span class="sd">    │ 2021-01-02 ┆ AAPL   ┆ 2     ┆ 1            │</span>
<span class="sd">    └────────────┴────────┴───────┴──────────────┘</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_create_monthly_window_index</span><span class="p">(</span><span class="n">col</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">year_diff</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">()</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">()</span>
        <span class="n">month_diff</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">()</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">()</span>
        <span class="n">day_indicator</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">day</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">col</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">day</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">12</span> <span class="o">*</span> <span class="n">year_diff</span> <span class="o">+</span> <span class="n">month_diff</span> <span class="o">-</span> <span class="n">day_indicator</span><span class="p">)</span> <span class="o">//</span> <span class="n">k</span>

    <span class="c1"># Clean the window into stnaardized strings (i.e &quot;1month&quot;/&quot;1 month&quot; = &quot;1mo&quot;)</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># returns `str`</span>

    <span class="k">if</span> <span class="s2">&quot;w&quot;</span> <span class="ow">in</span> <span class="n">window</span> <span class="ow">or</span> <span class="s2">&quot;d&quot;</span> <span class="ow">in</span> <span class="n">window</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;The window cannot include &#39;d&#39; or &#39;w&#39;, the window needs to be larger than 1 month!&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">window_monthly</span> <span class="o">=</span> <span class="n">_window_format_monthly</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>

    <span class="c1"># Adding a &#39;dummy&#39; column if only one symbol is present in data, to avoid</span>
    <span class="c1"># errors in the group_by_dynamic() function</span>
    <span class="k">if</span> <span class="s2">&quot;symbol&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">lit</span><span class="p">(</span><span class="s2">&quot;dummy&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">))</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="n">_create_monthly_window_index</span><span class="p">(</span><span class="n">col</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">window_monthly</span><span class="p">)</span>
        <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;window_index&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_buckets" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">vol_buckets</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_buckets" class="headerlink" title="Permanent link">#</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">vol_buckets</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">lo_quantile</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span> <span class="n">hi_quantile</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span> <span class="n">_column_name_volatility</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;realized_volatility&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: <strong>vol_buckets</strong>.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input dataframe or lazy frame.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>lo_quantile</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The lower quantile for bucketing. Default is 0.4.</p>
            </div>
          </td>
          <td>
                <code>0.4</code>
          </td>
        </tr>
        <tr>
          <td><code>hi_quantile</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The higher quantile for bucketing. Default is 0.8.</p>
            </div>
          </td>
          <td>
                <code>0.8</code>
          </td>
        </tr>
        <tr>
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The window for bucketing. Default is "1m".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The output dataframe or lazy frame with the bucketed volatility.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\technical\mandelbrot_channel\helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">vol_buckets</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">lo_quantile</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span>
    <span class="n">hi_quantile</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span>
    <span class="n">_column_name_volatility</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;realized_volatility&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: **vol_buckets**.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.LazyFrame | pl.DataFrame</span>
<span class="sd">        The input dataframe or lazy frame.</span>
<span class="sd">    lo_quantile : float</span>
<span class="sd">        The lower quantile for bucketing. Default is 0.4.</span>
<span class="sd">    hi_quantile : float</span>
<span class="sd">        The higher quantile for bucketing. Default is 0.8.</span>
<span class="sd">    window : str</span>
<span class="sd">        The window for bucketing. Default is &quot;1m&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame</span>
<span class="sd">        The output dataframe or lazy frame with the bucketed volatility.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Group by &#39;symbol&#39; and apply &#39;calculate_vol_buckets&#39; to each group</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">map_groups</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">group_df</span><span class="p">:</span> <span class="n">_calculate_vol_buckets</span><span class="p">(</span>
            <span class="n">group_df</span><span class="p">,</span> <span class="n">lo_quantile</span><span class="p">,</span> <span class="n">hi_quantile</span><span class="p">,</span> <span class="n">_column_name_volatility</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_filter" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">vol_filter</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.vol_filter" class="headerlink" title="Permanent link">#</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">vol_filter</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: <strong>vol_filter</strong>.</p>
<p>If <code>_rv_adjustment</code> is True, then filter the data to only include rows
that are in the same vol_bucket as the latest row for each symbol.</p>

          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\technical\mandelbrot_channel\helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">vol_filter</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: MandelBrot Channel || Sub-Category: Helpers || Command: **vol_filter**.</span>

<span class="sd">    If `_rv_adjustment` is True, then filter the data to only include rows</span>
<span class="sd">    that are in the same vol_bucket as the latest row for each symbol.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;vol_bucket&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;last_vol_bucket&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">out</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;vol_bucket&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;last_vol_bucket&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;last_vol_bucket&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.helpers.price_range" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">price_range</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.helpers.price_range" class="headerlink" title="Permanent link">#</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">price_range</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span><span class="p">,</span> <span class="n">rs_data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">recent_price_data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">_rs_method</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;RS&#39;</span><span class="p">,</span> <span class="n">_detrended_returns</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;detrended_log_returns&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_rv_adjustment</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Calculate the price range based on the specified method.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code>Union[<span title="polars.LazyFrame">LazyFrame</span>, <span title="polars.DataFrame">DataFrame</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The DataFrame to calculate the price range from.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>_rs_method</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to use the fast method, by default True.</p>
            </div>
          </td>
          <td>
                <code>&#39;RS&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>RS</code></td>
          <td>
                <code>Optional[<span title="polars.Series">Series</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The RS series, by default None.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>RS_mean</code></td>
          <td>
                <code>Optional[float]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The mean of the RS series, by default None.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>RS_max</code></td>
          <td>
                <code>Optional[float]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The maximum of the RS series, by default None.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>RS_min</code></td>
          <td>
                <code>Optional[float]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The minimum of the RS series, by default None.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>recent_price</code></td>
          <td>
                <code>Optional[float]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The recent price, by default None.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>cumdev_max</code></td>
          <td>
                <code>Optional[<span title="polars.DataFrame">DataFrame</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The maximum range, by default None.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>cumdev_min</code></td>
          <td>
                <code>Optional[<span title="polars.DataFrame">DataFrame</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The minimum range, by default None.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>RS_method</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The method to calculate the RS, by default "RS".</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>_detrended_returns</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The column name for detrended returns, by default "detrended_log_returns".</p>
            </div>
          </td>
          <td>
                <code>&#39;detrended_log_returns&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>**kwargs</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Arbitrary keyword arguments.</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Tuple[float, float]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The top and bottom price.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>ValueError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the RS_method is not one of 'RS', 'RS_mean', 'RS_max', 'RS_min'.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\technical\mandelbrot_channel\helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">price_range</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">rs_data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">recent_price_data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">_rs_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;RS&quot;</span><span class="p">,</span>
    <span class="n">_detrended_returns</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;detrended_log_returns&quot;</span><span class="p">,</span>  <span class="c1"># Parameterized detrended_returns column</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_rv_adjustment</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the price range based on the specified method.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : Union[pl.LazyFrame, pl.DataFrame]</span>
<span class="sd">        The DataFrame to calculate the price range from.</span>
<span class="sd">    _rs_method : str, optional</span>
<span class="sd">        Whether to use the fast method, by default True.</span>
<span class="sd">    RS : Optional[pl.Series], optional</span>
<span class="sd">        The RS series, by default None.</span>
<span class="sd">    RS_mean : Optional[float], optional</span>
<span class="sd">        The mean of the RS series, by default None.</span>
<span class="sd">    RS_max : Optional[float], optional</span>
<span class="sd">        The maximum of the RS series, by default None.</span>
<span class="sd">    RS_min : Optional[float], optional</span>
<span class="sd">        The minimum of the RS series, by default None.</span>
<span class="sd">    recent_price : Optional[float], optional</span>
<span class="sd">        The recent price, by default None.</span>
<span class="sd">    cumdev_max : Optional[pl.DataFrame], optional</span>
<span class="sd">        The maximum range, by default None.</span>
<span class="sd">    cumdev_min : Optional[pl.DataFrame], optional</span>
<span class="sd">        The minimum range, by default None.</span>
<span class="sd">    RS_method : str, optional</span>
<span class="sd">        The method to calculate the RS, by default &quot;RS&quot;.</span>
<span class="sd">    _detrended_returns: str, optional</span>
<span class="sd">        The column name for detrended returns, by default &quot;detrended_log_returns&quot;.</span>
<span class="sd">    **kwargs</span>
<span class="sd">        Arbitrary keyword arguments.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Tuple[float, float]</span>
<span class="sd">        The top and bottom price.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If the RS_method is not one of &#39;RS&#39;, &#39;RS_mean&#39;, &#39;RS_max&#39;, &#39;RS_min&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if RS_method is one of the allowed values</span>
    <span class="k">if</span> <span class="n">_rs_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">RS_METHODS</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;RS_method must be one of &#39;RS&#39;, &#39;RS_mean&#39;, &#39;RS_max&#39;, &#39;RS_min&#39;&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">_rv_adjustment</span><span class="p">:</span>
        <span class="c1"># Calculate STD where detrended_returns are in the same rvol_bucket</span>
        <span class="n">std_detrended_returns</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
            <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
            <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_detrended_returns</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">std</span><span class="p">()</span>
                    <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;std_</span><span class="si">{</span><span class="n">_detrended_returns</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Calculate STD where detrended_returns are from the latest range for each symbol</span>
        <span class="n">std_detrended_returns</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">data</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;window_index&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;window_index&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">())</span><span class="o">.</span><span class="n">over</span><span class="p">(</span>
                    <span class="s2">&quot;symbol&quot;</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_detrended_returns</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">std</span><span class="p">()</span>
                    <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;std_</span><span class="si">{</span><span class="n">_detrended_returns</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="p">]</span>
            <span class="p">)</span>
            <span class="c1"># get the latest window of data</span>
            <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">([</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;std_</span><span class="si">{</span><span class="n">_detrended_returns</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]))</span>
        <span class="p">)</span>
    <span class="c1"># Merge RS stats with STD of detrended returns and recent price</span>
    <span class="n">price_range</span> <span class="o">=</span> <span class="n">rs_data</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">std_detrended_returns</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="n">recent_price_data</span><span class="o">.</span><span class="n">lazy</span><span class="p">(),</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;symbol&quot;</span>
    <span class="p">)</span>

    <span class="n">price_range</span> <span class="o">=</span> <span class="n">price_range</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_rs_method</span><span class="p">)</span>
            <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;std_detrended_log_returns&quot;</span><span class="p">)</span>
            <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;recent_price&quot;</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;price_range&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Relative Position Modifier</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">_modify_mandelbrot_prices</span><span class="p">(</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">price_range</span><span class="p">,</span>
        <span class="s2">&quot;cum_sum_max&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cum_sum_min&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.toolbox.technical.mandelbrot_channel.model" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">model</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.model" class="headerlink" title="Permanent link">#</a></h5>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || <strong>Command: calc_mandelbrot_channel</strong>.</p>
<p>A command to generate a Mandelbrot Channel for any time series.</p>

  

  <div class="doc doc-children">








































































<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">calc_mandelbrot_channel</span>


<a href="#humbldata.toolbox.technical.mandelbrot_channel.model.calc_mandelbrot_channel" class="headerlink" title="Permanent link">#</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">calc_mandelbrot_channel</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">rv_adjustment</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_rv_grouped_mean</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_rv_method</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;std&#39;</span><span class="p">,</span> <span class="n">_rs_method</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;RS&#39;</span><span class="p">,</span> <span class="n">_live_price</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || <strong>Command: Mandelbrot Channel</strong>.</p>
<p>Calculates the Mandelbrot Channel for a given time series based on the
provided standard and extra parameters.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The time series data for which to calculate the Mandelbrot Channel.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The window size for the calculation, specified as a string.</p>
            </div>
          </td>
          <td>
                <code>&#39;1m&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>rv_adjustment</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to adjust the calculation for realized volatility.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>_rv_grouped_mean</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to use the grouped mean in the realized volatility calculation.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>_rv_method</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The method to use for calculating realized volatility. You only need to
supply a value if <code>rv_adjustment</code> is True.</p>
            </div>
          </td>
          <td>
                <code>&#39;std&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_rs_method</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The method to use for calculating the range over standard deviation.
You can choose either RS/RS_mean/RS_min/RS_max. This changes the width of
the calculated Mandelbrot Channel</p>
            </div>
          </td>
          <td>
                <code>&#39;RS&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_live_price</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to use live price data in the calculation. This may add a
significant amount of time to the calculation (1-3s)</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The calculated Mandelbrot Channel data for the given time series.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\technical\mandelbrot_channel\model.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calc_mandelbrot_channel</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">rv_adjustment</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_rv_grouped_mean</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_rv_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="n">_rs_method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;RS&quot;</span><span class="p">,</span>
    <span class="n">_live_price</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || **Command: Mandelbrot Channel**.</span>

<span class="sd">    Calculates the Mandelbrot Channel for a given time series based on the</span>
<span class="sd">    provided standard and extra parameters.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data: pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The time series data for which to calculate the Mandelbrot Channel.</span>
<span class="sd">    window: str, default &quot;1m&quot;</span>
<span class="sd">        The window size for the calculation, specified as a string.</span>
<span class="sd">    rv_adjustment: bool, default True</span>
<span class="sd">        Whether to adjust the calculation for realized volatility.</span>
<span class="sd">    _rv_grouped_mean: bool, default True</span>
<span class="sd">        Whether to use the grouped mean in the realized volatility calculation.</span>
<span class="sd">    _rv_method: str, default &quot;std&quot;</span>
<span class="sd">        The method to use for calculating realized volatility. You only need to</span>
<span class="sd">        supply a value if `rv_adjustment` is True.</span>
<span class="sd">    _rs_method: str, default &quot;RS&quot;</span>
<span class="sd">        The method to use for calculating the range over standard deviation.</span>
<span class="sd">        You can choose either RS/RS_mean/RS_min/RS_max. This changes the width of</span>
<span class="sd">        the calculated Mandelbrot Channel</span>
<span class="sd">    _live_price: bool, default True</span>
<span class="sd">        Whether to use live price data in the calculation. This may add a</span>
<span class="sd">        significant amount of time to the calculation (1-3s)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The calculated Mandelbrot Channel data for the given time series.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Setup ====================================================</span>
    <span class="n">window_int</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
    <span class="c1"># Step 1: Collect Price Data -------------------------------------------</span>
    <span class="c1"># Step X: Add window bins ----------------------------------------------</span>
    <span class="c1"># We want date grouping, non-overlapping window bins</span>
    <span class="n">data1</span> <span class="o">=</span> <span class="n">add_window_index</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">)</span>

    <span class="c1"># Step X: Calculate Log Returns + Rvol ---------------------------------</span>
    <span class="k">if</span> <span class="s2">&quot;log_returns&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data1</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">data2</span> <span class="o">=</span> <span class="n">log_returns</span><span class="p">(</span><span class="n">data1</span><span class="p">,</span> <span class="n">_column_name</span><span class="o">=</span><span class="s2">&quot;close&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data2</span> <span class="o">=</span> <span class="n">data1</span>

    <span class="c1"># Step X: Calculate Log Mean Series ------------------------------------</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data2</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">data3</span> <span class="o">=</span> <span class="n">mean</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;A series was passed to `mean()` calculation. Please provide a DataFrame or LazyFrame.&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="c1"># Step X: Calculate Mean De-trended Series -----------------------------</span>
    <span class="n">data4</span> <span class="o">=</span> <span class="n">detrend</span><span class="p">(</span>
        <span class="n">data3</span><span class="p">,</span> <span class="n">_detrend_value_col</span><span class="o">=</span><span class="s2">&quot;window_mean&quot;</span><span class="p">,</span> <span class="n">_detrend_col</span><span class="o">=</span><span class="s2">&quot;log_returns&quot;</span>
    <span class="p">)</span>
    <span class="c1"># Step X: Calculate Cumulative Deviate Series --------------------------</span>
    <span class="n">data5</span> <span class="o">=</span> <span class="n">cum_sum</span><span class="p">(</span><span class="n">data4</span><span class="p">,</span> <span class="n">_column_name</span><span class="o">=</span><span class="s2">&quot;detrended_log_returns&quot;</span><span class="p">)</span>
    <span class="c1"># Step X: Calculate Mandelbrot Range -----------------------------------</span>
    <span class="n">data6</span> <span class="o">=</span> <span class="n">range_</span><span class="p">(</span><span class="n">data5</span><span class="p">,</span> <span class="n">_column_name</span><span class="o">=</span><span class="s2">&quot;cum_sum&quot;</span><span class="p">)</span>
    <span class="c1"># Step X: Calculate Standard Deviation ---------------------------------</span>
    <span class="n">data7</span> <span class="o">=</span> <span class="n">std</span><span class="p">(</span><span class="n">data6</span><span class="p">,</span> <span class="n">_column_name</span><span class="o">=</span><span class="s2">&quot;cum_sum&quot;</span><span class="p">)</span>
    <span class="c1"># Step X: Calculate Range (R) &amp; Standard Deviation (S) -----------------</span>
    <span class="k">if</span> <span class="n">rv_adjustment</span><span class="p">:</span>
        <span class="c1"># Step 8.1: Calculate Realized Volatility --------------------------</span>
        <span class="n">data7</span> <span class="o">=</span> <span class="n">calc_realized_volatility</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data7</span><span class="p">,</span>
            <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="n">_rv_method</span><span class="p">,</span>
            <span class="n">grouped_mean</span><span class="o">=</span><span class="n">_rv_grouped_mean</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># rename col for easy selection</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">data7</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;volatility_pct&quot;</span> <span class="ow">in</span> <span class="n">col</span><span class="p">:</span>
                <span class="n">data7</span> <span class="o">=</span> <span class="n">data7</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="n">col</span><span class="p">:</span> <span class="s2">&quot;realized_volatility&quot;</span><span class="p">})</span>
        <span class="c1"># Step 8.2: Calculate Volatility Bucket Stats ----------------------</span>
        <span class="n">data7</span> <span class="o">=</span> <span class="n">vol_buckets</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data7</span><span class="p">,</span> <span class="n">lo_quantile</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">hi_quantile</span><span class="o">=</span><span class="mf">0.65</span><span class="p">)</span>
        <span class="n">data7</span> <span class="o">=</span> <span class="n">vol_filter</span><span class="p">(</span><span class="n">data7</span><span class="p">)</span>

    <span class="c1"># Step X: Calculate RS -------------------------------------------------</span>
    <span class="n">data8</span> <span class="o">=</span> <span class="n">data7</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cum_sum_range&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;cum_sum_std&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;RS&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="c1"># Calculate mean, min, and max of &#39;RS&#39; for each &#39;symbol&#39; group</span>
    <span class="c1"># do i need to collect only the last window for RS or do i want the calcs over the whole data</span>
    <span class="n">rs_data</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data8</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">agg</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;RS&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;RS&quot;</span><span class="p">),</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;RS&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;RS_mean&quot;</span><span class="p">),</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;RS&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;RS_min&quot;</span><span class="p">),</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;RS&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;RS_max&quot;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Step X: Collect Recent Prices ----------------------------------------</span>
    <span class="k">if</span> <span class="n">_live_price</span><span class="p">:</span>
        <span class="n">symbols</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">data</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">recent_prices</span> <span class="o">=</span> <span class="n">get_latest_price</span><span class="p">(</span><span class="n">symbols</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">recent_prices</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">data1</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;close&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;recent_price&quot;</span><span class="p">))</span>
            <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="c1"># Step X: Calculate Rescaled Price Range ------------------------------</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">price_range</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data8</span><span class="p">,</span>
        <span class="n">rs_data</span><span class="o">=</span><span class="n">rs_data</span><span class="p">,</span>
        <span class="n">recent_price_data</span><span class="o">=</span><span class="n">recent_prices</span><span class="p">,</span>
        <span class="n">_rs_method</span><span class="o">=</span><span class="n">_rs_method</span><span class="p">,</span>
        <span class="n">_rv_adjustment</span><span class="o">=</span><span class="n">rv_adjustment</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h4 id="humbldata.toolbox.technical.volatility" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">volatility</span>


<a href="#humbldata.toolbox.technical.volatility" class="headerlink" title="Permanent link">#</a></h4>

  <div class="doc doc-contents ">

  

  <div class="doc doc-children">







<div class="doc doc-object doc-module">



<h5 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">realized_volatility_helpers</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers" class="headerlink" title="Permanent link">#</a></h5>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || <strong>Sub-Category: Volatility Helpers</strong>.</p>
<p>All of the volatility estimators used in <code>calc_realized_volatility()</code>.
These are various methods to calculate the realized volatility of financial data.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers.std" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">std</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.std" class="headerlink" title="Permanent link">#</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">std</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">trading_periods</span><span class="o">=</span><span class="mi">252</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_column_name_returns</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;log_returns&#39;</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || <strong>Command: _std</strong>.</p>
<p>This function computes the standard deviation of returns, which is a common
measure of volatility.It calculates the rolling standard deviation for a
given window size, optionally adjusting for the average number of trading
days and scaling the result to an annualized volatility percentage.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code>Union[<span title="polars.DataFrame">DataFrame</span>, <span title="polars.LazyFrame">LazyFrame</span>, <span title="polars.Series">Series</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data containing the returns. It can be a DataFrame, LazyFrame,
or Series.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The rolling window size for calculating the standard deviation.
The default is "1m" (one month).</p>
            </div>
          </td>
          <td>
                <code>&#39;1m&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>trading_periods</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The number of trading periods in a year, used for annualizing the
volatility. The default is 252.</p>
            </div>
          </td>
          <td>
                <code>252</code>
          </td>
        </tr>
        <tr>
          <td><code>_drop_nulls</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, null values will be dropped from the result.
The default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>_avg_trading_days</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, the average number of trading days will be used when
calculating the window size. The default is True.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_returns</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the returns. This parameter is used
when <code>data</code> is a DataFrame or LazyFrame. The default is "log_returns".</p>
            </div>
          </td>
          <td>
                <code>&#39;log_returns&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Union[<span title="polars.DataFrame">DataFrame</span>, <span title="polars.LazyFrame">LazyFrame</span>, <span title="polars.Series">Series</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data structure with an additional column for the rolling
standard deviation of returns, or the modified Series with the rolling
standard deviation values.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\technical\volatility\realized_volatility_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">std</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">trading_periods</span><span class="o">=</span><span class="mi">252</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_column_name_returns</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log_returns&quot;</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || **Command: _std**.</span>

<span class="sd">    This function computes the standard deviation of returns, which is a common</span>
<span class="sd">    measure of volatility.It calculates the rolling standard deviation for a</span>
<span class="sd">    given window size, optionally adjusting for the average number of trading</span>
<span class="sd">    days and scaling the result to an annualized volatility percentage.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : Union[pl.DataFrame, pl.LazyFrame, pl.Series]</span>
<span class="sd">        The input data containing the returns. It can be a DataFrame, LazyFrame,</span>
<span class="sd">        or Series.</span>
<span class="sd">    window : str, optional</span>
<span class="sd">        The rolling window size for calculating the standard deviation.</span>
<span class="sd">        The default is &quot;1m&quot; (one month).</span>
<span class="sd">    trading_periods : int, optional</span>
<span class="sd">        The number of trading periods in a year, used for annualizing the</span>
<span class="sd">        volatility. The default is 252.</span>
<span class="sd">    _drop_nulls : bool, optional</span>
<span class="sd">        If True, null values will be dropped from the result.</span>
<span class="sd">        The default is True.</span>
<span class="sd">    _avg_trading_days : bool, optional</span>
<span class="sd">        If True, the average number of trading days will be used when</span>
<span class="sd">        calculating the window size. The default is True.</span>
<span class="sd">    _column_name_returns : str, optional</span>
<span class="sd">        The name of the column containing the returns. This parameter is used</span>
<span class="sd">        when `data` is a DataFrame or LazyFrame. The default is &quot;log_returns&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Union[pl.DataFrame, pl.LazyFrame, pl.Series]</span>
<span class="sd">        The input data structure with an additional column for the rolling</span>
<span class="sd">        standard deviation of returns, or the modified Series with the rolling</span>
<span class="sd">        standard deviation values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">window_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
        <span class="n">window</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="o">=</span><span class="n">_avg_trading_days</span>
    <span class="p">)</span><span class="o">.</span><span class="n">days</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">rolling_std</span><span class="p">(</span><span class="n">window_size</span><span class="o">=</span><span class="n">window_int</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_sort</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="c1"># convert window_timedelta to days to use fixed window</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
            <span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
            <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_returns</span><span class="p">)</span><span class="o">.</span><span class="n">rolling_std</span><span class="p">(</span>
                        <span class="n">window_size</span><span class="o">=</span><span class="n">window_int</span><span class="p">,</span>
                        <span class="n">min_periods</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>  <span class="c1"># using min_periods=2, bc if min_periods=1, the first value will be 0.</span>
                        <span class="n">by</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">trading_periods</span><span class="p">)</span>
                    <span class="o">*</span> <span class="mi">100</span>
                <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;std_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;std_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers.parkinson" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">parkinson</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.parkinson" class="headerlink" title="Permanent link">#</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">parkinson</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">_column_name_high</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="n">_column_name_low</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Calculate Parkinson's volatility over a specified window.</p>
<p>Parkinson's volatility is a measure that uses the stock's high and low prices
of the day rather than just close to close prices. It is particularly useful
for capturing large price movements during the day.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data containing the stock prices.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>window</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The rolling window size for calculating volatility, by default 30.</p>
            </div>
          </td>
          <td>
                <code>&#39;1m&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>trading_periods</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The number of trading periods in a year, by default 252.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_high</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the high prices, by default "high".</p>
            </div>
          </td>
          <td>
                <code>&#39;high&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_low</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the low prices, by default "low".</p>
            </div>
          </td>
          <td>
                <code>&#39;low&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_drop_nulls</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to drop null values from the result, by default True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>_avg_trading_days</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to use the average number of trading days when calculating the
window size, by default True.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The calculated Parkinson's volatility, with an additional column
"parkinson_volatility_pct_{window_int}D"
indicating the percentage volatility.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>This function requires the input data to have 'high' and 'low' columns to
calculate
the logarithm of their ratio, which is squared and scaled by a constant to
estimate
volatility. The result is then annualized and expressed as a percentage.</p>
</details>
<details class="usage" open>
  <summary>Usage</summary>
  <p>If you pass <code>"1m</code> as a <code>window</code> argument and  <code>_avg_trading_days=False</code>.
The result will be <code>30</code>. If <code>_avg_trading_days=True</code>, the result will be
<code>21</code>.</p>
</details>


<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;high&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">120</span><span class="p">,</span> <span class="mi">125</span><span class="p">],</span> <span class="s1">&#39;low&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">115</span><span class="p">,</span> <span class="mi">120</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_parkinson</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">A DataFrame with the calculated Parkinson&#39;s volatility.</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\technical\volatility\realized_volatility_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">parkinson</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">_column_name_high</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="n">_column_name_low</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate Parkinson&#39;s volatility over a specified window.</span>

<span class="sd">    Parkinson&#39;s volatility is a measure that uses the stock&#39;s high and low prices</span>
<span class="sd">    of the day rather than just close to close prices. It is particularly useful</span>
<span class="sd">    for capturing large price movements during the day.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The input data containing the stock prices.</span>
<span class="sd">    window : int, optional</span>
<span class="sd">        The rolling window size for calculating volatility, by default 30.</span>
<span class="sd">    trading_periods : int, optional</span>
<span class="sd">        The number of trading periods in a year, by default 252.</span>
<span class="sd">    _column_name_high : str, optional</span>
<span class="sd">        The name of the column containing the high prices, by default &quot;high&quot;.</span>
<span class="sd">    _column_name_low : str, optional</span>
<span class="sd">        The name of the column containing the low prices, by default &quot;low&quot;.</span>
<span class="sd">    _drop_nulls : bool, optional</span>
<span class="sd">        Whether to drop null values from the result, by default True.</span>
<span class="sd">    _avg_trading_days : bool, optional</span>
<span class="sd">        Whether to use the average number of trading days when calculating the</span>
<span class="sd">        window size, by default True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The calculated Parkinson&#39;s volatility, with an additional column</span>
<span class="sd">        &quot;parkinson_volatility_pct_{window_int}D&quot;</span>
<span class="sd">        indicating the percentage volatility.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function requires the input data to have &#39;high&#39; and &#39;low&#39; columns to</span>
<span class="sd">    calculate</span>
<span class="sd">    the logarithm of their ratio, which is squared and scaled by a constant to</span>
<span class="sd">    estimate</span>
<span class="sd">    volatility. The result is then annualized and expressed as a percentage.</span>

<span class="sd">    Usage</span>
<span class="sd">    -----</span>
<span class="sd">    If you pass `&quot;1m` as a `window` argument and  `_avg_trading_days=False`.</span>
<span class="sd">    The result will be `30`. If `_avg_trading_days=True`, the result will be</span>
<span class="sd">    `21`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; data = pl.DataFrame({&#39;high&#39;: [120, 125], &#39;low&#39;: [115, 120]})</span>
<span class="sd">    &gt;&gt;&gt; _parkinson(data)</span>
<span class="sd">    A DataFrame with the calculated Parkinson&#39;s volatility.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_sort</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>

    <span class="n">var1</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="mf">4.0</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mf">2.0</span><span class="p">))</span>
    <span class="n">var2</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="o">.</span><span class="n">select</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_high</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_low</span><span class="p">))</span><span class="o">.</span><span class="n">log</span><span class="p">())</span>
        <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
        <span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">rs</span> <span class="o">=</span> <span class="n">var1</span> <span class="o">*</span> <span class="n">var2</span><span class="o">**</span><span class="mi">2</span>

    <span class="n">window_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
        <span class="n">window</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="o">=</span><span class="n">_avg_trading_days</span>
    <span class="p">)</span><span class="o">.</span><span class="n">days</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="n">rs</span><span class="o">.</span><span class="n">rolling_map</span><span class="p">(</span>
                    <span class="n">_annual_vol</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="n">window_int</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span>
                <span class="p">)</span>
                <span class="o">*</span> <span class="mi">100</span>
            <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;parkinson_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span>
            <span class="n">subset</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;parkinson_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers.garman_klass" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">garman_klass</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.garman_klass" class="headerlink" title="Permanent link">#</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">garman_klass</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">_column_name_high</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="n">_column_name_low</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="n">_column_name_open</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="n">_column_name_close</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;adj_close&#39;</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || <strong>Command: _garman_klass</strong>.</p>
<p>Calculates the Garman-Klass volatility for a given dataset.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data containing the price information.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The rolling window size for volatility calculation, by default "1m".</p>
            </div>
          </td>
          <td>
                <code>&#39;1m&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_high</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the high prices, by default "high".</p>
            </div>
          </td>
          <td>
                <code>&#39;high&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_low</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the low prices, by default "low".</p>
            </div>
          </td>
          <td>
                <code>&#39;low&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_open</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the opening prices, by default "open".</p>
            </div>
          </td>
          <td>
                <code>&#39;open&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_close</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the adjusted closing prices, by
default "adj_close".</p>
            </div>
          </td>
          <td>
                <code>&#39;adj_close&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_drop_nulls</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to drop null values from the result, by default True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>_avg_trading_days</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to use the average number of trading days when calculating the
window size, by default True.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span> | <span title="polars.Series">Series</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The calculated Garman-Klass volatility, with an additional column
"volatility_pct" indicating the percentage volatility.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <p>Garman-Klass volatility extends Parkinson’s volatility by considering the
opening and closing prices in addition to the high and low prices. This
approach provides a more accurate estimation of volatility, especially in
markets with significant activity at the opening and closing of trading
sessions.</p>
</details>
          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\technical\volatility\realized_volatility_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">garman_klass</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">_column_name_high</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="n">_column_name_low</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
    <span class="n">_column_name_open</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span>
    <span class="n">_column_name_close</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;adj_close&quot;</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || **Command: _garman_klass**.</span>

<span class="sd">    Calculates the Garman-Klass volatility for a given dataset.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The input data containing the price information.</span>
<span class="sd">    window : str, optional</span>
<span class="sd">        The rolling window size for volatility calculation, by default &quot;1m&quot;.</span>
<span class="sd">    _column_name_high : str, optional</span>
<span class="sd">        The name of the column containing the high prices, by default &quot;high&quot;.</span>
<span class="sd">    _column_name_low : str, optional</span>
<span class="sd">        The name of the column containing the low prices, by default &quot;low&quot;.</span>
<span class="sd">    _column_name_open : str, optional</span>
<span class="sd">        The name of the column containing the opening prices, by default &quot;open&quot;.</span>
<span class="sd">    _column_name_close : str, optional</span>
<span class="sd">        The name of the column containing the adjusted closing prices, by</span>
<span class="sd">        default &quot;adj_close&quot;.</span>
<span class="sd">    _drop_nulls : bool, optional</span>
<span class="sd">        Whether to drop null values from the result, by default True.</span>
<span class="sd">    _avg_trading_days : bool, optional</span>
<span class="sd">        Whether to use the average number of trading days when calculating the</span>
<span class="sd">        window size, by default True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame | pl.LazyFrame | pl.Series</span>
<span class="sd">        The calculated Garman-Klass volatility, with an additional column</span>
<span class="sd">        &quot;volatility_pct&quot; indicating the percentage volatility.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Garman-Klass volatility extends Parkinson’s volatility by considering the</span>
<span class="sd">    opening and closing prices in addition to the high and low prices. This</span>
<span class="sd">    approach provides a more accurate estimation of volatility, especially in</span>
<span class="sd">    markets with significant activity at the opening and closing of trading</span>
<span class="sd">    sessions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_sort</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
    <span class="n">log_hi_lo</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="o">.</span><span class="n">select</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_high</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_low</span><span class="p">))</span><span class="o">.</span><span class="n">log</span><span class="p">())</span>
        <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
        <span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">log_close_open</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">select</span><span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_close</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">))</span><span class="o">.</span><span class="n">log</span><span class="p">())</span>
        <span class="o">.</span><span class="n">collect</span><span class="p">()</span>
        <span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">rs</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">log_hi_lo</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">log_close_open</span><span class="o">**</span><span class="mi">2</span>

    <span class="n">window_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
        <span class="n">window</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="o">=</span><span class="n">_avg_trading_days</span>
    <span class="p">)</span><span class="o">.</span><span class="n">days</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span>
            <span class="n">rs</span><span class="o">.</span><span class="n">rolling_map</span><span class="p">(</span><span class="n">_annual_vol</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="n">window_int</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="o">*</span> <span class="mi">100</span>
        <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;gk_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;gk_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers.hodges_tompkins" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">hodges_tompkins</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.hodges_tompkins" class="headerlink" title="Permanent link">#</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">hodges_tompkins</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">trading_periods</span><span class="o">=</span><span class="mi">252</span><span class="p">,</span> <span class="n">_column_name_returns</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;log_returns&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.Series">Series</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || <strong>Command: _hodges_tompkins</strong>.</p>
<p>Hodges-Tompkins volatility is a bias correction for estimation using an
overlapping data sample that produces unbiased estimates and a
substantial gain in efficiency.</p>

          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\technical\volatility\realized_volatility_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">hodges_tompkins</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">trading_periods</span><span class="o">=</span><span class="mi">252</span><span class="p">,</span>
    <span class="n">_column_name_returns</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log_returns&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || **Command: _hodges_tompkins**.</span>

<span class="sd">    Hodges-Tompkins volatility is a bias correction for estimation using an</span>
<span class="sd">    overlapping data sample that produces unbiased estimates and a</span>
<span class="sd">    substantial gain in efficiency.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># When calculating rv_mean, need a different adjustment factor,</span>
    <span class="c1"># so window doesn&#39;t influence the Volatility_mean</span>
    <span class="c1"># RV_MEAN</span>

    <span class="c1"># Define Window Size</span>
    <span class="n">window_timedelta</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
        <span class="n">window</span><span class="p">,</span> <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="o">=</span><span class="n">_avg_trading_days</span>
    <span class="p">)</span>
    <span class="c1"># Calculate STD, assigned to `vol`</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">rolling_std</span><span class="p">(</span><span class="n">window_size</span><span class="o">=</span><span class="n">window_timedelta</span><span class="o">.</span><span class="n">days</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_sort</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
            <span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
            <span class="o">.</span><span class="n">select</span><span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_returns</span><span class="p">)</span><span class="o">.</span><span class="n">rolling_std</span><span class="p">(</span>
                    <span class="n">window_size</span><span class="o">=</span><span class="n">window_timedelta</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s2">&quot;date&quot;</span>
                <span class="p">)</span>
                <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">trading_periods</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="c1"># Assign window size to h for adjustment</span>
    <span class="n">h</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">window_timedelta</span><span class="o">.</span><span class="n">days</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">len</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">):</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">count</span> <span class="o">-</span> <span class="n">h</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">adj_factor</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="p">(</span><span class="n">h</span> <span class="o">/</span> <span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="p">((</span><span class="n">h</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">n</span><span class="o">**</span><span class="mi">2</span><span class="p">)))</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pl</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">vol</span> <span class="o">*</span> <span class="n">adj_factor</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">((</span><span class="n">vol</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span> <span class="o">*</span> <span class="n">adj_factor</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
            <span class="o">.</span><span class="n">to_series</span><span class="p">()</span>
            <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ht_volatility_pct_</span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ht_volatility_pct_</span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers.rogers_satchell" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">rogers_satchell</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.rogers_satchell" class="headerlink" title="Permanent link">#</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">rogers_satchell</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">_column_name_high</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="n">_column_name_low</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="n">_column_name_open</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="n">_column_name_close</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;adj_close&#39;</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || <strong>Command: _rogers_satchell</strong>.</p>
<p>Rogers-Satchell is an estimator for measuring the volatility of
securities with an average return not equal to zero. Unlike Parkinson
and Garman-Klass estimators, Rogers-Satchell incorporates a drift term
(mean return not equal to zero). This function calculates the
Rogers-Satchell volatility estimator over a specified window and optionally
drops null values from the result.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data for which to calculate the Rogers-Satchell volatility
estimator. This can be either a DataFrame or a LazyFrame. There need to
be OHLC columns present in the data.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The window over which to calculate the volatility estimator. The
window is specified as a string, such as "1m" for one month.</p>
            </div>
          </td>
          <td>
                <code>&#34;1m&#34;</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_high</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column representing the high prices in the data.</p>
            </div>
          </td>
          <td>
                <code>&#34;high&#34;</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_low</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column representing the low prices in the data.</p>
            </div>
          </td>
          <td>
                <code>&#34;low&#34;</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_open</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column representing the opening prices in the data.</p>
            </div>
          </td>
          <td>
                <code>&#34;open&#34;</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_close</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column representing the adjusted closing prices in the
data.</p>
            </div>
          </td>
          <td>
                <code>&#34;adj_close&#34;</code>
          </td>
        </tr>
        <tr>
          <td><code>_drop_nulls</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to drop null values from the result. If True, rows with null
values in the calculated volatility column will be removed from the
output.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>_avg_trading_days</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Indicates whether to use the average number of trading days per window.
This affects how the window size is interpreted. i.e instead of "1mo"
returning <code>timedelta(days=31)</code>, it will return <code>timedelta(days=21)</code>.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data with an additional column containing the calculated
Rogers-Satchell volatility estimator. The return type matches the input
type (DataFrame or LazyFrame).</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\technical\volatility\realized_volatility_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">rogers_satchell</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">_column_name_high</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="n">_column_name_low</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
    <span class="n">_column_name_open</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span>
    <span class="n">_column_name_close</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;adj_close&quot;</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || **Command: _rogers_satchell**.</span>

<span class="sd">    Rogers-Satchell is an estimator for measuring the volatility of</span>
<span class="sd">    securities with an average return not equal to zero. Unlike Parkinson</span>
<span class="sd">    and Garman-Klass estimators, Rogers-Satchell incorporates a drift term</span>
<span class="sd">    (mean return not equal to zero). This function calculates the</span>
<span class="sd">    Rogers-Satchell volatility estimator over a specified window and optionally</span>
<span class="sd">    drops null values from the result.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The input data for which to calculate the Rogers-Satchell volatility</span>
<span class="sd">        estimator. This can be either a DataFrame or a LazyFrame. There need to</span>
<span class="sd">        be OHLC columns present in the data.</span>
<span class="sd">    window : str, default &quot;1m&quot;</span>
<span class="sd">        The window over which to calculate the volatility estimator. The</span>
<span class="sd">        window is specified as a string, such as &quot;1m&quot; for one month.</span>
<span class="sd">    _column_name_high : str, default &quot;high&quot;</span>
<span class="sd">        The name of the column representing the high prices in the data.</span>
<span class="sd">    _column_name_low : str, default &quot;low&quot;</span>
<span class="sd">        The name of the column representing the low prices in the data.</span>
<span class="sd">    _column_name_open : str, default &quot;open&quot;</span>
<span class="sd">        The name of the column representing the opening prices in the data.</span>
<span class="sd">    _column_name_close : str, default &quot;adj_close&quot;</span>
<span class="sd">        The name of the column representing the adjusted closing prices in the</span>
<span class="sd">        data.</span>
<span class="sd">    _drop_nulls : bool, default True</span>
<span class="sd">        Whether to drop null values from the result. If True, rows with null</span>
<span class="sd">        values in the calculated volatility column will be removed from the</span>
<span class="sd">        output.</span>
<span class="sd">    _avg_trading_days : bool, default True</span>
<span class="sd">        Indicates whether to use the average number of trading days per window.</span>
<span class="sd">        This affects how the window size is interpreted. i.e instead of &quot;1mo&quot;</span>
<span class="sd">        returning `timedelta(days=31)`, it will return `timedelta(days=21)`.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The input data with an additional column containing the calculated</span>
<span class="sd">        Rogers-Satchell volatility estimator. The return type matches the input</span>
<span class="sd">        type (DataFrame or LazyFrame).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if all required columns are present in the DataFrame</span>
    <span class="n">_check_required_columns</span><span class="p">(</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">_column_name_high</span><span class="p">,</span>
        <span class="n">_column_name_low</span><span class="p">,</span>
        <span class="n">_column_name_open</span><span class="p">,</span>
        <span class="n">_column_name_close</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_sort</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
    <span class="c1"># assign window</span>
    <span class="n">window_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
        <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span>
        <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">_avg_trading_days</span><span class="o">=</span><span class="n">_avg_trading_days</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">days</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_high</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">))</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_ho&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_low</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">))</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_lo&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_close</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">))</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_co&quot;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_ho&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_ho&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_co&quot;</span><span class="p">))</span>
                <span class="o">+</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_lo&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_lo&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_co&quot;</span><span class="p">))</span>
            <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;rs&quot;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
        <span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;rs&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rolling_map</span><span class="p">(</span>
                <span class="n">_annual_vol</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="n">window_int</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span>
            <span class="p">)</span>
            <span class="o">*</span> <span class="mi">100</span>
        <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;rs_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;rs_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers.yang_zhang" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">yang_zhang</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.yang_zhang" class="headerlink" title="Permanent link">#</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">yang_zhang</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">trading_periods</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">252</span><span class="p">,</span> <span class="n">_column_name_high</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="n">_column_name_low</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="n">_column_name_open</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="n">_column_name_close</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;adj_close&#39;</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || <strong>Command: _yang_zhang</strong>.</p>
<p>Yang-Zhang volatility is the combination of the overnight
(close-to-open volatility), a weighted average of the Rogers-Satchell
volatility and the day’s open-to-close volatility.</p>

          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\technical\volatility\realized_volatility_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">yang_zhang</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">trading_periods</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">252</span><span class="p">,</span>
    <span class="n">_column_name_high</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="n">_column_name_low</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
    <span class="n">_column_name_open</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span>
    <span class="n">_column_name_close</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;adj_close&quot;</span><span class="p">,</span>
    <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || Sub-Category: Volatility Helpers || **Command: _yang_zhang**.</span>

<span class="sd">    Yang-Zhang volatility is the combination of the overnight</span>
<span class="sd">    (close-to-open volatility), a weighted average of the Rogers-Satchell</span>
<span class="sd">    volatility and the day’s open-to-close volatility.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># check required columns</span>
    <span class="n">_check_required_columns</span><span class="p">(</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">_column_name_high</span><span class="p">,</span>
        <span class="n">_column_name_low</span><span class="p">,</span>
        <span class="n">_column_name_open</span><span class="p">,</span>
        <span class="n">_column_name_close</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_sort</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>

    <span class="c1"># assign window</span>
    <span class="n">window_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
        <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span>
        <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">_avg_trading_days</span><span class="o">=</span><span class="n">_avg_trading_days</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">days</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_high</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">))</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_ho&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_low</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">))</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_lo&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_close</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">))</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_co&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_open</span><span class="p">)</span> <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_close</span><span class="p">)</span><span class="o">.</span><span class="n">shift</span><span class="p">())</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_oc&quot;</span><span class="p">),</span>
                <span class="p">(</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_close</span><span class="p">)</span>
                    <span class="o">/</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_close</span><span class="p">)</span><span class="o">.</span><span class="n">shift</span><span class="p">()</span>
                <span class="p">)</span>
                <span class="o">.</span><span class="n">log</span><span class="p">()</span>
                <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_cc&quot;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_oc&quot;</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_oc_sq&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_cc&quot;</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;log_cc_sq&quot;</span><span class="p">),</span>
                <span class="p">(</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_ho&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_ho&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_co&quot;</span><span class="p">))</span>
                    <span class="o">+</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_lo&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_lo&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;log_co&quot;</span><span class="p">))</span>
                <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;rs&quot;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="n">k</span> <span class="o">=</span> <span class="mf">0.34</span> <span class="o">/</span> <span class="p">(</span><span class="mf">1.34</span> <span class="o">+</span> <span class="p">(</span><span class="n">window_int</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">window_int</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">_yang_zhang_engine</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="n">window_int</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;open_vol&quot;</span><span class="p">)</span>
                    <span class="o">+</span> <span class="n">k</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;close_vol&quot;</span><span class="p">)</span>
                    <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">k</span><span class="p">)</span> <span class="o">*</span> <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;window_rs&quot;</span><span class="p">)</span>
                <span class="p">)</span><span class="o">.</span><span class="n">sqrt</span><span class="p">()</span>
                <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">trading_periods</span><span class="p">)</span>
                <span class="o">*</span> <span class="mi">100</span>
            <span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;yz_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">select</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="s2">&quot;log_ho&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;log_lo&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;log_co&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;log_oc&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;log_cc&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;log_oc_sq&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;log_cc_sq&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;rs&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;close_vol&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;open_vol&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;window_rs&quot;</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;yz_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>







<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_helpers.squared_returns" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">squared_returns</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_helpers.squared_returns" class="headerlink" title="Permanent link">#</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">squared_returns</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">trading_periods</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">252</span><span class="p">,</span> <span class="n">_drop_nulls</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">_column_name_returns</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;log_returns&#39;</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Calculate squared returns over a rolling window.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data containing the price information.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The rolling window size for calculating squared returns, by default "1m".</p>
            </div>
          </td>
          <td>
                <code>&#39;1m&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>trading_periods</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The number of trading periods in a year, used for scaling the result.
The default is 252.</p>
            </div>
          </td>
          <td>
                <code>252</code>
          </td>
        </tr>
        <tr>
          <td><code>_drop_nulls</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether to drop null values from the result, by default True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_returns</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the price data, by default "adj_close".</p>
            </div>
          </td>
          <td>
                <code>&#39;log_returns&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input data structure with an additional column for the rolling
squared returns.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\technical\volatility\realized_volatility_helpers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">squared_returns</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">trading_periods</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">252</span><span class="p">,</span>
    <span class="n">_drop_nulls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">_avg_trading_days</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">_column_name_returns</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log_returns&quot;</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate squared returns over a rolling window.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The input data containing the price information.</span>
<span class="sd">    window : str, optional</span>
<span class="sd">        The rolling window size for calculating squared returns, by default &quot;1m&quot;.</span>
<span class="sd">    trading_periods : int, optional</span>
<span class="sd">        The number of trading periods in a year, used for scaling the result.</span>
<span class="sd">        The default is 252.</span>
<span class="sd">    _drop_nulls : bool, optional</span>
<span class="sd">        Whether to drop null values from the result, by default True.</span>
<span class="sd">    _column_name_returns : str, optional</span>
<span class="sd">        The name of the column containing the price data, by default &quot;adj_close&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The input data structure with an additional column for the rolling</span>
<span class="sd">        squared returns.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_check_required_columns</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">_column_name_returns</span><span class="p">)</span>

    <span class="n">sort_cols</span> <span class="o">=</span> <span class="n">_set_sort_cols</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_sort</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>

    <span class="c1"># assign window</span>
    <span class="n">window_int</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">_window_format</span><span class="p">(</span>
        <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span>
        <span class="n">_return_timedelta</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">_avg_trading_days</span><span class="o">=</span><span class="n">_avg_trading_days</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">days</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">set_sorted</span><span class="p">(</span><span class="n">sort_cols</span><span class="p">)</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="p">((</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="n">_column_name_returns</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span>
                <span class="s2">&quot;sq_log_returns_pct&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="c1"># Calculate rolling squared returns</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">data</span><span class="o">.</span><span class="n">lazy</span><span class="p">()</span>
        <span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;sq_log_returns_pct&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">rolling_mean</span><span class="p">(</span><span class="n">window_size</span><span class="o">=</span><span class="n">window_int</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;sq_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;sq_log_returns_pct&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">_drop_nulls</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">drop_nulls</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;sq_volatility_pct_</span><span class="si">{</span><span class="n">window_int</span><span class="si">}</span><span class="s2">D&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>






<div class="doc doc-object doc-module">



<h5 id="humbldata.toolbox.technical.volatility.realized_volatility_model" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>          <span class="doc doc-object-name doc-module-name">realized_volatility_model</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_model" class="headerlink" title="Permanent link">#</a></h5>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || <strong>Command: calc_realized_volatility</strong>.</p>
<p>A command to generate Realized Volatility for any time series.</p>

  

  <div class="doc doc-children">




















































<div class="doc doc-object doc-function">



<h6 id="humbldata.toolbox.technical.volatility.realized_volatility_model.calc_realized_volatility" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>          <span class="doc doc-object-name doc-function-name">calc_realized_volatility</span>


<a href="#humbldata.toolbox.technical.volatility.realized_volatility_model.calc_realized_volatility" class="headerlink" title="Permanent link">#</a></h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">calc_realized_volatility</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span><span class="p">,</span> <span class="n">window</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;1m&#39;</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="n"><span title="typing.Literal">Literal</span></span><span class="p">[</span><span class="s1">&#39;std&#39;</span><span class="p">,</span> <span class="s1">&#39;parkinson&#39;</span><span class="p">,</span> <span class="s1">&#39;garman_klass&#39;</span><span class="p">,</span> <span class="s1">&#39;gk&#39;</span><span class="p">,</span> <span class="s1">&#39;hodges_tompkins&#39;</span><span class="p">,</span> <span class="s1">&#39;ht&#39;</span><span class="p">,</span> <span class="s1">&#39;rogers_satchell&#39;</span><span class="p">,</span> <span class="s1">&#39;rs&#39;</span><span class="p">,</span> <span class="s1">&#39;yang_zhang&#39;</span><span class="p">,</span> <span class="s1">&#39;yz&#39;</span><span class="p">,</span> <span class="s1">&#39;squared_returns&#39;</span><span class="p">,</span> <span class="s1">&#39;sq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;std&#39;</span><span class="p">,</span> <span class="n">grouped_mean</span><span class="p">:</span> <span class="n">list</span><span class="p">[</span><span class="n">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_trading_periods</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="mi">252</span><span class="p">,</span> <span class="n">_column_name_returns</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;log_returns&#39;</span><span class="p">,</span> <span class="n">_column_name_close</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="n">_column_name_high</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span> <span class="n">_column_name_low</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;low&#39;</span><span class="p">,</span> <span class="n">_column_name_open</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="s1">&#39;open&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_sort</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="polars.LazyFrame">LazyFrame</span></span> <span class="o">|</span> <span class="n"><span title="polars.DataFrame">DataFrame</span></span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Context: Toolbox || Category: Technical || <strong>Command: calc_realized_volatility</strong>.</p>
<p>Calculates the Realized Volatility for a given time series based on the
provided standard and extra parameters. This function adds ONE rolling
volatility column to the input DataFrame.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span> | <span title="polars.LazyFrame">LazyFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The time series data for which to calculate the Realized Volatility.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>window</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The window size for a rolling volatility calculation, default is <code>"1m"</code>
(1 month).</p>
            </div>
          </td>
          <td>
                <code>&#39;1m&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>method</code></td>
          <td>
                <code><span title="typing.Literal">Literal</span>[&#39;std&#39;, &#39;parkinson&#39;, &#39;garman_klass&#39;, &#39;hodges_tompkins&#39;, &#39;rogers_satchell&#39;, &#39;yang_zhang&#39;, &#39;squared_returns&#39;]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The volatility estimator to use. You can also use abbreviations to
access the same methods. The abbreviations are: <code>gk</code> for <code>garman_klass</code>,
<code>ht</code> for <code>hodges_tompkins</code>, <code>rs</code> for <code>rogers_satchell</code>, <code>yz</code> for
<code>yang_zhang</code>, <code>sq</code> for <code>squared_returns</code>.</p>
            </div>
          </td>
          <td>
                <code>&#39;std&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>grouped_mean</code></td>
          <td>
                <code>list[int] | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of window sizes to use for calculating volatility. If provided,
the volatility method will be calculated across these various windows,
and then an averaged value of all the windows will be returned. If <code>None</code>,
a single window size specified by <code>window</code> parameter will be used.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>_sort</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If True, the data will be sorted before calculation. Default is True.</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>_trading_periods</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The number of trading periods in a year, default is 252 (the typical
number of trading days in a year).</p>
            </div>
          </td>
          <td>
                <code>252</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_returns</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the returns. Default is "log_returns".</p>
            </div>
          </td>
          <td>
                <code>&#39;log_returns&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_close</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the close prices. Default is "close".</p>
            </div>
          </td>
          <td>
                <code>&#39;close&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_high</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the high prices. Default is "high".</p>
            </div>
          </td>
          <td>
                <code>&#39;high&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_low</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the low prices. Default is "low".</p>
            </div>
          </td>
          <td>
                <code>&#39;low&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>_column_name_open</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the column containing the open prices. Default is "open".</p>
            </div>
          </td>
          <td>
                <code>&#39;open&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>VolatilityData</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The calculated Realized Volatility data for the given time series.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

<details class="note" open>
  <summary>Notes</summary>
  <ul>
<li>
<p>Rolling calculations are used to show a time series of recent volatility
that captures only a certain number of data points. The window size is
used to determine the number of data points to use in the calculation. We do
this because when looking at the volatility of a stock, you get a better
insight (more granular) into the characteristics of the volatility seeing how 1-month or
3-month rolling volatility looked over time.</p>
</li>
<li>
<p>This function does not accept <code>pl.Series</code> because the methods used to
calculate volatility require, high, low, close, open columns for the data.
It would be too cumbersome to pass each series needed for the calculation
as a separate argument. Therefore, the function only accepts <code>pl.DataFrame</code>
or <code>pl.LazyFrame</code> as input.</p>
</li>
</ul>
</details>
          <details class="quote">
            <summary>Source code in <code>src\humbldata\toolbox\technical\volatility\realized_volatility_model.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">calc_realized_volatility</span><span class="p">(</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">method</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span>  <span class="c1"># used to be rvol_method</span>
        <span class="s2">&quot;std&quot;</span><span class="p">,</span>
        <span class="s2">&quot;parkinson&quot;</span><span class="p">,</span>
        <span class="s2">&quot;garman_klass&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;hodges_tompkins&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ht&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rogers_satchell&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rs&quot;</span><span class="p">,</span>
        <span class="s2">&quot;yang_zhang&quot;</span><span class="p">,</span>
        <span class="s2">&quot;yz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;squared_returns&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sq&quot;</span><span class="p">,</span>
    <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;std&quot;</span><span class="p">,</span>
    <span class="n">grouped_mean</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># used to be rv_mean</span>
    <span class="n">_trading_periods</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">252</span><span class="p">,</span>
    <span class="n">_column_name_returns</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;log_returns&quot;</span><span class="p">,</span>
    <span class="n">_column_name_close</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;close&quot;</span><span class="p">,</span>
    <span class="n">_column_name_high</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="n">_column_name_low</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span>
    <span class="n">_column_name_open</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">_sort</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">LazyFrame</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Context: Toolbox || Category: Technical || **Command: calc_realized_volatility**.</span>

<span class="sd">    Calculates the Realized Volatility for a given time series based on the</span>
<span class="sd">    provided standard and extra parameters. This function adds ONE rolling</span>
<span class="sd">    volatility column to the input DataFrame.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : pl.DataFrame | pl.LazyFrame</span>
<span class="sd">        The time series data for which to calculate the Realized Volatility.</span>
<span class="sd">    window : str</span>
<span class="sd">        The window size for a rolling volatility calculation, default is `&quot;1m&quot;`</span>
<span class="sd">        (1 month).</span>
<span class="sd">    method : Literal[&quot;std&quot;, &quot;parkinson&quot;, &quot;garman_klass&quot;, &quot;hodges_tompkins&quot;,&quot;rogers_satchell&quot;, &quot;yang_zhang&quot;, &quot;squared_returns&quot;]</span>
<span class="sd">        The volatility estimator to use. You can also use abbreviations to</span>
<span class="sd">        access the same methods. The abbreviations are: `gk` for `garman_klass`,</span>
<span class="sd">        `ht` for `hodges_tompkins`, `rs` for `rogers_satchell`, `yz` for</span>
<span class="sd">        `yang_zhang`, `sq` for `squared_returns`.</span>
<span class="sd">    grouped_mean : list[int] | None</span>
<span class="sd">        A list of window sizes to use for calculating volatility. If provided,</span>
<span class="sd">        the volatility method will be calculated across these various windows,</span>
<span class="sd">        and then an averaged value of all the windows will be returned. If `None`,</span>
<span class="sd">        a single window size specified by `window` parameter will be used.</span>
<span class="sd">    _sort : bool</span>
<span class="sd">        If True, the data will be sorted before calculation. Default is True.</span>
<span class="sd">    _trading_periods : int</span>
<span class="sd">        The number of trading periods in a year, default is 252 (the typical</span>
<span class="sd">        number of trading days in a year).</span>
<span class="sd">    _column_name_returns : str</span>
<span class="sd">        The name of the column containing the returns. Default is &quot;log_returns&quot;.</span>
<span class="sd">    _column_name_close : str</span>
<span class="sd">        The name of the column containing the close prices. Default is &quot;close&quot;.</span>
<span class="sd">    _column_name_high : str</span>
<span class="sd">        The name of the column containing the high prices. Default is &quot;high&quot;.</span>
<span class="sd">    _column_name_low : str</span>
<span class="sd">        The name of the column containing the low prices. Default is &quot;low&quot;.</span>
<span class="sd">    _column_name_open : str</span>
<span class="sd">        The name of the column containing the open prices. Default is &quot;open&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    VolatilityData</span>
<span class="sd">        The calculated Realized Volatility data for the given time series.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    - Rolling calculations are used to show a time series of recent volatility</span>
<span class="sd">    that captures only a certain number of data points. The window size is</span>
<span class="sd">    used to determine the number of data points to use in the calculation. We do</span>
<span class="sd">    this because when looking at the volatility of a stock, you get a better</span>
<span class="sd">    insight (more granular) into the characteristics of the volatility seeing how 1-month or</span>
<span class="sd">    3-month rolling volatility looked over time.</span>

<span class="sd">    - This function does not accept `pl.Series` because the methods used to</span>
<span class="sd">    calculate volatility require, high, low, close, open columns for the data.</span>
<span class="sd">    It would be too cumbersome to pass each series needed for the calculation</span>
<span class="sd">    as a separate argument. Therefore, the function only accepts `pl.DataFrame`</span>
<span class="sd">    or `pl.LazyFrame` as input.</span>
<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa: W505</span>
    <span class="c1"># Step 1: Get the correct realized volatility function =====================</span>
    <span class="n">func</span> <span class="o">=</span> <span class="n">VOLATILITY_METHODS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">func</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Volatility method: &#39;</span><span class="si">{</span><span class="n">method</span><span class="si">}</span><span class="s2">&#39; is not supported.&quot;</span>
        <span class="k">raise</span> <span class="n">HumblDataError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="c1"># Step 2: Get the names of the parameters that the function accepts ========</span>
    <span class="n">func_params</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">func</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span>

    <span class="c1"># Step 3: Filter out the parameters not accepted by the function ===========</span>
    <span class="n">args_to_pass</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">func_params</span>
    <span class="p">}</span>

    <span class="c1"># Step 4: Calculate Realized Volatility ====================================</span>
    <span class="k">if</span> <span class="n">grouped_mean</span><span class="p">:</span>
        <span class="c1"># calculate volatility over multiple windows and average the result, add to a new column</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;🚧 WIP!&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">**</span><span class="n">args_to_pass</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div>




  </div>

  </div>

</div><hr />







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: 📥 Context">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                📥 Context
              </div>
            </div>
          </a>
        
        
          
          <a href="../../category/" class="md-footer__link md-footer__link--next" aria-label="Next: Category">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Category
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.instant.preview", "navigation.tracking", "navigation.tabs", "navigation.expand", "navigation.path", "navigation.indexes", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
    
  </body>
</html>